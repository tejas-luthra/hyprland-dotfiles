/*! For license information please see 8321.vendors.chunk.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[8321],{72481:(e,t,r)=>{r.d(t,{p:()=>n});var n,i=r(27378),o=r(40327),a=r(38983),s=r(98403),l=r(19751),c=r(2834),u=r(9223),d=r(5114),p=r(83078),m=r(90845);!function(e){e.Manager=function(t){var r=t.children,n=t.cardWidth,o=s.Dx(n).pipe(l.shareReplay({refCount:!0,bufferSize:1}));return m.P.useSingleton("CardWidth.Manager"),m.P.useSubscriptionTo(o),i.createElement(e.Context.Provider,{value:o},r)},e.DefaultManager=function(t){var r=t.children;return m.P.useSingleton("CardWidth.DefaultManager"),i.createElement(e.Manager,{cardWidth:e.withCardWidthEffect(e.defaultSizeObserver)},r)},e.withCardWidthEffect=function(t,r){return void 0===r&&(r=e.defaultCardWidthSetter),t.pipe(c.b((function(e){return r(d.some(e))})),u.x(r.bind(null,d.none)),l.shareReplay({refCount:!0,bufferSize:1}))},e.defaultCardWidthSetter=function(t){e.setRootCssVar(document.documentElement,t)},e.defaultSizeObserver=a.h.create(400),e.Context=i.createContext(e.defaultSizeObserver),e.setRootCssVar=function(e,t){e.style.setProperty("--cardWidth",(0,o.pipe)(t,d.map(String),p.QP))}}(n||(n={}))},62295:(e,t,r)=>{r.d(t,{x:()=>m});var n,i,o,a,s,l,c,u,d,p,m,h=r(59312),g=r(27378),f=r(5739),y=r(12187),v=r(77176),b=r(98403),w=r(57091),x=r(93508),I=r(19962),S=r(44060),C=r(33678),E=r(61922),A=r(8965),k=r(89894),M=r(40456),T=r(61722),_=r(48439);!function(e){function t(e){return 0===e?"":e>=1e3?"".concat(Math.min(Math.trunc(e/1e3),9),"k+"):String(e)}var r=function(e){var t=e.className,r=e.isChecking,n=e.type,i=e.animateFade,o=void 0===i||i,a=T.f.fadeOutState(r),s=a.state,l=a.complete,c="checking-complete";return g.createElement(f.F.div,(0,h.pi)({},(0,y.Sh)(re.loader,t)),o?s.pipe(v.U((function(e){return"end"===e?g.createElement("div",{key:"checking-complete",className:c}):g.createElement(A.$,{key:"spinner",variation:n,size:"100%",className:"fadeOut"===e?re.fadeOut:void 0,onTransitionEnd:l})}))):r.pipe(v.U((function(e){return e?g.createElement(A.$,{variation:n,size:"100%"}):g.createElement("div",{className:c})}))))},n=function(e){var r=e.name,n=e.theme,i=void 0===n?{}:n,o=e.count,a=e.type,s=void 0===a?"white":a,l=e.suffix,c=void 0===l?"":l,u=g.useContext(C.a.Context);return g.createElement(f.F.div,(0,h.pi)({},(0,y.Sh)(re.roundCounter,b.ab(s,A.$.getClassName(re)),i.counterWrapper),{"data-role":"counter"}),g.createElement("svg",{"aria-hidden":!0,viewBox:"0 0 32 32",className:re.circular},g.createElement("g",null,g.createElement("circle",{r:"15.75",cx:"16",cy:"16"}),g.createElement("text",(0,h.pi)({x:"16",y:"17"},I.h5(u.has(C.a.Flag.supportsSVGDominantBaseline)),{fontSize:o>=100?14:18,"data-name":r},(0,y.Sh)(j,i.counterContent)),t(o),c))))},i=function(e){var r=e.name,n=e.theme,i=void 0===n?{}:n,o=e.count,a=e.type,s=void 0===a?"white":a,l=e.suffix,c=void 0===l?"":l,u=g.useContext(C.a.Context);return g.createElement(f.F.div,(0,h.pi)({},(0,y.Sh)(re.ovalCounter,b.ab(s,A.$.getClassName(re)),i.counterWrapper),{"data-role":"counter"}),g.createElement("svg",{"aria-hidden":!0,viewBox:"0 0 32 20",className:re.circular},g.createElement("rect",{width:"32",height:"20",rx:"10"}),g.createElement("text",(0,h.pi)({x:"16",y:"10.5"},I.h5(u.has(C.a.Flag.supportsSVGDominantBaseline)),{fontSize:11,"data-name":r},(0,y.Sh)(j,i.counterContent)),t(o),c)))};e.Counter=function(e){var t=e.theme,r=void 0===t?{}:t,o=e.count,a=e.type,s=void 0===a?"white":a,l=o>=100?i:n;return g.createElement(l,{theme:(0,h.pi)((0,h.pi)({},r),{counterWrapper:(0,y.Sh)(r.counterWrapper,re.flexCounter).className}),count:o,type:s})},e.OutcomeCounter=function(e){var r=e.name,n=e.theme,i=void 0===n?{}:n,o=e.count,a=e.type,s=void 0===a?"white":a,l=e.suffix,c=e.fontSize,u=void 0===c?12:c,d=g.useContext(C.a.Context);return g.createElement(f.F.div,(0,h.pi)({},(0,y.Sh)(re.outcomeCounter,b.ab(s,A.$.getClassName(re)),i.counterWrapper),{"data-role":"counter"}),g.createElement("svg",{"aria-hidden":!0,viewBox:"0 0 32 18",className:re.circular},g.createElement("rect",(0,h.pi)({},function(e,t){return t||e>=100?{width:32}:e>=10?{x:4,width:24}:{x:7,width:18}}(o,Boolean(l)),{height:18,rx:9})),g.createElement("text",(0,h.pi)({x:"50%",y:"10px"},I.h5(d.has(C.a.Flag.supportsSVGDominantBaseline)),{fontSize:u,"data-name":r},(0,y.Sh)(j,i.counterContent)),t(o),l)))},e.MainMeter=function(e){var t=e.count,i=e.isChecking,o=e.className,a=0===t;return g.createElement("div",(0,h.pi)({},(0,y.Sh)(re.meter,o)),g.createElement(r,{isChecking:i,type:a?"green":"red"}),0===t?g.createElement(E.JO.Grammarly,null):g.createElement(n,{count:t,type:"red",name:"toolbar-mistakes"}))},e.LensNavMeter=function(e){var t=e.count,i=e.isChecking;return g.createElement("div",{className:re.lensNavMeter},g.createElement(r,{isChecking:i,type:"red"}),g.createElement(n,{count:t,type:"white",name:"toolbar-mistakes"}))},e.PlagiarismMeter=function(e){var t=e.count,n=e.isChecking,o=e.className;return g.createElement("div",(0,h.pi)({},(0,y.Sh)(re.plagiarismMeter,o)),g.createElement(r,{isChecking:n,type:"violet",animateFade:!1}),g.createElement(f.F.div,{className:re.wrapper},t.pipe(w.a(n),v.U((function(e){var t=e[0],r=e[1];return 0===t?g.createElement(E.JO.NotificationInfo,{className:re.plagiarismIcon,key:"icon",width:20}):!r&&g.createElement(i,{count:t,type:"violet",key:"value",suffix:g.createElement("tspan",{fontSize:8,dominantBaseline:"center"},"%")})})),x.O(null))))},e.PlagiarismOutcomesMeter=function(t){var n=t.count,i=t.isChecking,o=t.className;return g.createElement("div",(0,h.pi)({},(0,y.Sh)(re.plagiarismMeter,o)),g.createElement(r,{isChecking:i,type:"cyan",animateFade:!1}),g.createElement(f.F.div,{className:re.wrapper},n.pipe(w.a(i),v.U((function(t){var r=t[0],n=t[1];return _.g.isMin(r)?g.createElement(E.JO.CheckmarkOutcomes,{className:re.plagiarismOutcomeIcon,key:"icon",width:20}):!n&&g.createElement(e.OutcomeCounter,{count:_.g.prism.reverseGet(r),type:"cyan",key:"value",suffix:g.createElement("tspan",{fontSize:11},"%")})})),x.O(null))))}}(m||(m={}));var L=1.25,N={position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"visible",margin:"auto",width:k.ux.percent(100),height:k.ux.percent(100)},O={position:"absolute",width:k.ux.percent(150),height:k.ux.percent(150),transform:"translate(-17%, -17%)"},D={position:"relative",display:"inline-flex"},U={width:k.ux.percent(100),height:k.ux.percent(100)},R={minWidth:k.ux.rem(2),width:k.ux.percent(100),height:k.ux.rem(L)},P={maxWidth:k.ux.rem(2),height:k.ux.rem(L)},F="counterText",j=k.ux.joinClasses([F,k.ux.style({fontWeight:"bold",textAnchor:"middle",fill:S.Il.CoreNeutral0})]),z={fill:M.zh,$nest:(n={},n["& .".concat(F)]={fill:M.FW},n)},B={fill:S.Il.CoreRed50,$nest:(i={},i["& .".concat(F)]={fill:S.Il.CoreNeutral0},i)},G={fill:S.Il.CoreGreen50,$nest:(o={},o["& .".concat(F)]={fill:S.Il.CoreNeutral0},o)},W={fill:S.Il.CoreBlue50,$nest:(a={},a["& .".concat(F)]={fill:S.Il.CoreNeutral0},a)},H={fill:"transparent",$nest:(s={},s["& .".concat(F)]={fill:M.FW},s)},$={fill:M.lh,$nest:(l={},l["& .".concat(F)]={fill:S.Il.CoreNeutral0},l)},V={fill:M.AX,$nest:(c={},c["& .".concat(F)]={fill:S.Il.CoreNeutral0},c)},Q={fill:S.Il.CoreYellow20,$nest:(u={},u["& .".concat(F)]={fill:S.Il.CoreYellow80},u)},Y={fill:S.Il.CoreYellow60,$nest:(d={},d["& .".concat(F)]={fill:S.Il.CoreNeutral0},d)},Z={fill:S.Il.CoreCyan50,$nest:(p={},p["& .".concat(F)]={fill:S.Il.CoreNeutral0},p)},q={width:k.ux.rem(1.5),height:k.ux.rem(1.5)},J={margin:"0 ".concat(k.ux.rem(.25))},K={width:k.ux.rem(2),height:k.ux.rem(L)},X={margin:"".concat(k.ux.rem(-1)," 0")},ee={$nest:{"&:not([data-disabled='true'])[data-active='true'], &:not([data-disabled='true'])[data-hovered='true']":{fill:S.Il.CoreCyan50}}},te={width:k.ux.rem(2),height:k.ux.rem(1.125),position:"relative"},re=k.ux.stylesheet({fadeOut:[{opacity:0,transition:"opacity .5s linear"}],circular:[N],loader:[O],wrapper:[D],roundCounter:[D,U],ovalCounter:[D,R],flexCounter:[D,P],gray:[z],red:[B],green:[G],blue:[W],white:[H],violet:[$],yellow:[V],yellowPremium:[Q],orange:[Y],cyan:[Z],meter:[D,q],lensNavMeter:[D,q,J],plagiarismMeter:[D,K],plagiarismIcon:[X],plagiarismOutcomeIcon:[X,ee],outcomeCounter:[D,{position:"absolute",left:0},te]})},64078:(e,t,r)=>{r.d(t,{X:()=>T});var n,i=r(59312),o=r(27378),a=r(57050),s=r(19962),l=r(5114),c=r(44060),u=r(67424),d=r(89894),p=r(32096),m=r(40327),h=r(5739),g=r(98403),f=r(49708),y=r(85985),v=r(41398),b=r(24209),w=r(17343),x=r(38194),I=r(598),S=r(50628),C=r(25781),E=r(83078),A=r(18625);!function(e){var t="scrollaction";e.emit=function(e){return self.dispatchEvent(new CustomEvent(t,{detail:e}))},e.observe=A.P((function(){return f.R(self,t)}))}(n||(n={}));var k=r(42103),M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subs=[],t._outOfTarget=function(e){return function(t){return!s.UL.hasPoint(t.getBoundingClientRect(),e)}},t}return(0,i.ZT)(t,e),t.prototype.componentDidMount=function(){this._listenTooltipAppearance()},t.prototype.componentWillUnmount=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[],this.context.hide()},t.prototype.render=function(){return o.createElement(h.F.div,{"data-role":"tooltip"},this.context.state.view(this.props.children))},t.prototype._listenTooltipAppearance=function(){var e=this,t=f.R(document,"keydown").pipe(y.h((function(e){return e.keyCode===C.R.ESC_CODE}))),r=f.R(document,"mousedown").pipe(v.M(this.context.state),y.h((function(t){var r=t[0],n=t[1];return(0,m.pipe)(n,l.map((function(e){return e.target})),l.filter((function(){return s.pK(r.target)})),E.wo(e._outOfTarget({x:r.clientX,y:r.clientY})))}))),i=b.T(t,r,f.R(document,"scroll"),n.observe.pipe(y.h((function(e){return"show"===e.detail})))).pipe(w.h(g.PU),x.B());this._subs=[this.context.hasContent.pipe(y.h(Boolean),I.c(i.pipe(S.P()))).subscribe(this.context.hide),this.context.hasContent.pipe(y.h(Boolean),I.c(b.T(g.gw(!0,500),i.pipe(w.h(!1))).pipe(S.P())),y.h(Boolean)).subscribe(this.context.show)]},t.contextType=k.G.Context,t}(o.Component),T=function(){return o.createElement(M,null,(0,a.ls)(l.map((function(e){return o.createElement(u.t.ByAbsoluteRect,(0,i.pi)({rect:s.UL.fromEl(e.target),className:N.container},u.t.Alignment.toSelector(e.alignment),{withPin:!0}),o.createElement("div",{className:N.content},e.content))})),l.toNullable))},_={position:"fixed",zIndex:p.DY,pointerEvents:"none",$nest:{"@media print":{visibility:"hidden"}}},L={padding:"".concat(d.ux.rem(.25)," ").concat(d.ux.rem(1)),borderRadius:d.ux.rem(p.fx),background:c.Il.BackgroundTooltip,color:c.Il.CoreNeutral1,textAlign:"center",whiteSpace:"nowrap",letterSpacing:d.ux.px(.25),fontSize:d.ux.rem(.75),lineHeight:d.ux.rem(1)},N=d.ux.stylesheet({container:[_],content:[L]})},59443:(e,t,r)=>{r.d(t,{Y1:()=>n,uq:()=>l});var n,i,o,a,s,l,c,u,d=r(73975),p=r(55415),m=r(22232),h=r(8125),g=r(51996);!function(e){var t;!function(t){var r;!function(e){e.user="user",e.api="api",e.doubleClick="doubleClick"}(r=t.Source||(t.Source={})),t.eq=(0,d.f7)((function(t,n){return t.source===n.source&&(t.source===r.doubleClick&&n.source===r.doubleClick?t.selectedWord===n.selectedWord:e.eqFormatting.equals(t.formatting,n.formatting))}))}(t=e.Meta||(e.Meta={})),e.nonEmpty=function(e){return e.length>0},e.isEmpty=function(e){return 0===e.length},e.toTextRange=function(e){return g.SV.create(e.index,e.index+e.length)},e.isUserSelection=function(e){return e.meta.source===t.Source.user},e.isApiSelection=function(e){return e.meta.source===t.Source.api},e.isDoubleClickSelection=function(e){return e.meta.source===t.Source.doubleClick},e.eqRange=(0,d.f7)((function(e,t){return e.index===t.index&&e.length===t.length})),e.eqFormatting=(0,d.f7)(p.vZ),e.eq=(0,d.f7)((function(t,r){return e.eqRange.equals(t,r)&&e.Meta.eq.equals(t.meta,r.meta)})),e.empty={index:0,length:0,meta:{source:e.Meta.Source.user,formatting:{}}}}(n||(n={})),function(e){e.DenaliOtherDocSession="denaliOtherDocSession",e.DenaliSameDocSession="denaliSameDocSession",e.MSOutlook="outlook",e.MSWord="word",e.MSWordOnline="wordOnline",e.MSExcel="excel",e.MSOffice="msoffice",e.ProbablyMSOutlookOnline="probablyMSOutlookOnline",e.GDocs="gdocs",e.GSheets="gsheets",e.ProbablyGMail="probablyGmail",e.CocoaHTMLWriter="cocoaHTMLWriter",e.DropboxPaper="dropbox_paper",e.PlainText="plainText",e.Unknown="unknown",e.Synthetic="synthetic"}(i||(i={})),function(e){e.empty={top:0,bottom:0}}(o||(o={})),function(e){!function(e){e.top="top",e.middle="middle",e.bottom="bottom"}(e.Y||(e.Y={})),function(e){e.left="left",e.middle="middle",e.right="right"}(e.X||(e.X={})),function(t){t.toViewport=function(t){return function(r){switch(r){case e.X.left:return t.left;case e.X.middle:return t.left+t.width/2;case e.X.right:return t.right;default:return(0,m.vE)(r)}}}}(e.X||(e.X={})),function(t){t.toViewport=function(t){return function(r){switch(r){case e.Y.top:return t.top;case e.Y.middle:return t.top+t.height/2;case e.Y.bottom:return t.bottom;default:return(0,m.vE)(r)}}}}(e.Y||(e.Y={}))}(a||(a={})),function(e){var t;!function(e){e.textMaybeWithFormatting="text",e.onlyFormatting="formatting"}(t=e.Type||(e.Type={})),e.isTextMaybeWithFormatting=function(e){return e.type===t.textMaybeWithFormatting},e.isOnlyFormatting=function(e){return e.type===t.onlyFormatting}}(s||(s={})),function(e){e.none="none",e.fast="fast",e.initial="initial",e.fake="fake"}(l||(l={})),function(e){var t;!function(e){e.bold="bold",e.italic="italic",e.underline="underline",e.strike="strike",e.header1="header1",e.header2="header2",e.bulletList="bulletList",e.dashedList="dashedList",e.orderedList="orderedList",e.link="link"}(t=e.Type||(e.Type={})),e.is=function(e){return(0,h.CI)(t,e)},e.asList=Object.values(e.Type),function(e){e.is=function(e){return void 0!==e[t.link]}}(e.LinkPayload||(e.LinkPayload={}))}(c||(c={})),function(e){e.undo="undo",e.redo="redo",e.cut="cut",e.copy="copy",e.paste="paste",e.selectAll="selectAll"}(u||(u={}))},81301:(e,t,r)=>{r.d(t,{EQ:()=>g,Iy:()=>i,dC:()=>n});var n,i,o,a=r(38983),s=r(5114),l=r(8125),c=r(66310),u=r(18625),d=r(95300),p=r(76974),m=r(2834),h=r(40151);!function(e){e.SetGoals="SetGoals",e.Performance="Performance"}(n||(n={})),function(e){e.setGoals=e=>({type:n.SetGoals,source:e}),e.performance={type:n.Performance}}(i||(i={}));class g{constructor(e){this._modalViews=e,this.state=a.h.create(s.none),this._modalFactoryCache=new Map}show(e){return this.preload(e).pipe(c.w((e=>this.showPreloaded(e))))}showPreloaded(e){return u.P((()=>{const t=new d.X("opened");return this.state.set(s.some(e({onClose:()=>{this.state.set(s.none),t.next("closed"),t.complete()}}))),t}))}preload(e){const t=JSON.stringify(e);if(this._modalFactoryCache.has(t)){const e=this._modalFactoryCache.get(t);return p.of(e)}return u.P((()=>this._modalViews.load(e))).pipe(m.b((e=>{this._modalFactoryCache.set(t,e)})))}hideAll(){this.state.set(s.none)}}!function(e){e.Mock=class{constructor(){this.state=a.h.create(s.none),this.hideAll=l.Q1}show(e){return h.E}showPreloaded(e){return h.E}preload(e){return h.E}}}(o||(o={}))},6782:(e,t,r)=>{r.d(t,{Q:()=>n});var n,i=r(40327),o=r(5114);!function(e){e.group=function(e){return Object.values(e.reduce(((e,{group:t,category:r,categoryHuman:n,cost:i})=>(void 0===e[r]&&(e[r]={group:t,category:r,categoryHuman:n,count:0,lensName:"",bundleInfo:o.none}),e[r].count+=i,e)),{})).sort(((e,t)=>t.count-e.count))},e.groupByGroup=function(e){return Object.values(e.reduce(((e,{group:t,category:r,categoryHuman:n,cost:i,lensName:a="",bundleInfo:s=o.none})=>(void 0===e[a]&&(e[a]={group:t,category:r,categoryHuman:n,count:0,lensName:a,bundleInfo:s}),e[a].count+=i,e)),{})).sort(((e,t)=>t.count-e.count))},e.groupByBundleInfo=function(e){return Object.values(e.reduce(((e,{group:t,category:r,categoryHuman:n,cost:a,lensName:s="",bundleInfo:l=o.none})=>{const c=(0,i.pipe)(l,o.getOrElse((()=>n)));return void 0===e[c]&&(e[c]={group:t,category:r,categoryHuman:n,count:0,lensName:s,bundleInfo:l}),e[c].count+=a,e}),{})).sort(((e,t)=>t.count-e.count))}}(n||(n={}))},6488:(e,t,r)=>{r.d(t,{e:()=>n});var n,i=r(40327),o=r(5114),a=r(4390),s=r(40018);!function(e){e.create=function(e){const t=t=>(0,i.pipe)(e.get(),a.p.get(t),o.map(s.bZ.fromAlertModel)),r=e=>(0,i.pipe)(t(e),o.filter(s.bZ.isInteractable)),n=e=>(0,i.pipe)(t(e),o.filter(s.bZ.isRegistered));return{getById:t,getRegistered:n,getInteractable:r,isRegistered:e=>(0,i.pipe)(n(e),o.isSome),isInteractable:e=>(0,i.pipe)(r(e),o.isSome)}}}(n||(n={}))},43320:(e,t,r)=>{r.d(t,{R:()=>o});var n=r(51072),i=r(32952);class o{static init(e,t,r,n,a,s){const l=new i.xQ;return new o(e,t,r,n,a,s,l),l}constructor(e,t,r,n,i,a,s){const l=o.NamedChangesSink.factory(s),c={pm:l(o.Receiver.PM,n),dm:l(o.Receiver.PM,i),capi:l(o.Receiver.CAPI,r),userTextEcho:l(o.Receiver.UserText,e)};o.Producer.create(o.Producer.UserText,{changes:e.changes})(c.dm,c.pm,c.capi),o.Producer.create(o.Producer.ALERT_APPLY,a)(c.userTextEcho),t.subscribe((t=>{"before_alert"===t.kind&&e.flushChanges()}))}}!function(e){let t,r,i,o;!function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.ALERT_APPLY="alert_synonyms_manager"}(t=e.Producer||(e.Producer={})),function(e){e.create=function(e,t){return(...r)=>t.changes.subscribe((t=>{r.forEach((r=>r.pushChanges(e,t)))}))}}(t=e.Producer||(e.Producer={})),function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.CAPI="checking_service",e.PM="position_manager"}(r=e.Receiver||(e.Receiver={})),function(e){function t(e,t,r){return{pushChanges:(i,o)=>{try{let a=t.pushChanges(o);"function"==typeof a&&(a=n.Vi(a)),void 0!==a&&a.catch((t=>r.next({exception:t,details:{from:i,to:e}})))}catch(t){r.next({exception:t,details:{from:i,to:e}})}}}}e.factory=function(e){return(r,n)=>t(r,n,e)},e.create=t}(i=e.NamedChangesSink||(e.NamedChangesSink={})),function(e){e.create=e=>({changes:e.changes,pushChanges(t){e.pushChanges(t,"user")},getContents:()=>e.getContents(),flushChanges:()=>e.flushChanges()})}(o=e.UserTextChangesSync||(e.UserTextChangesSync={}))}(o||(o={}))},5008:(e,t,r)=>{r.d(t,{A:()=>i,n:()=>n});var n,i,o=r(57050),a=r(25938),s=r(36991),l=r(8125),c=r(62965),u=r(24209);!function(e){e.noopSync={pushChanges:l.Q1},e.ignoreResult=function(e){return{pushChanges:t=>{e.pushChanges(t)}}},e.ignoreTEResult=function(e){return{pushChanges:(0,o.ls)(e.pushChanges,c.UI(l.Q1))}},e.pushDeleteThenInsert=function(e){return{pushChanges:t=>{(a.RI.isDelta(t)?a.RI.fromArrayOfDeltas(s.s.splitToDeleteThenInsert(t.delta).filter(s.s.nonEmpty),t.prevLen):[t]).forEach((t=>e.pushChanges(t)))}}}}(n||(n={})),function(e){e.merge=function(e){return{changes:u.T(...e.map((e=>e.changes)))}}}(i||(i={}))},89772:(e,t,r)=>{r.d(t,{w:()=>i});var n,i,o=r(57050),a=r(40327),s=r(92843),l=r(68983),c=r(5114),u=r(50147),d=r(66896),p=r(51653),m=r(70996);!function(e){e.modelToCounters=function(e){return m.h.isRegistered(e)?e.counters:p.R.empty}}(n||(n={})),function(e){e.monoid=u.uZ(d.R.Id.ord,d.R.Meta.group),e.eq=u.Eh(d.R.Id.ord,d.R.Meta.eq),e.isEmpty=u.xb,e.lookup=u.P5(d.R.Id.ord),e.applyDiff=t=>n=>c=>(0,a.pipe)(n,s.v.foldMap(e.monoid)(i(t),p(t),r(t)),(0,l.W)(e.monoid.concat)(c),u.hX((0,o.ff)(d.R.Meta.isEmpty))),e.updatePercentiles=e=>t=>{let r=t;return e.forEach(((e,t)=>{r=(0,a.pipe)(r,u.cq(d.R.Id.ord)(t,d.R.Meta.ratioToPercentile(e)),c.fold((()=>(0,a.pipe)(r,u.ZQ(d.R.Id.ord)(t,d.R.Meta.fromPercentile(e)))),o.yR))})),r};const t=(0,o.ls)(n.modelToCounters,d.R.Meta.fromAlertCounters),r=e=>r=>m(e)(r,t),i=e=>r=>m(e)(r,(0,o.ls)(t,d.R.Meta.group.inverse)),p=t=>(n,o)=>e.monoid.concat(r(t)(o),i(t)(n)),m=e=>(t,r)=>(0,a.pipe)(e,u.hX((e=>e(t.alert))),u.UI((()=>r(t))))}(i||(i={}))},13313:(e,t,r)=>{r.d(t,{A:()=>n});var n,i=r(38983),o=r(4390),a=r(54216),s=r(93508),l=r(57091),c=r(67434),u=r(98403),d=r(89772);!function(e){e.defaultState={alerts:o.p.empty,lenses:d.w.monoid.empty},e.get=(n,i,a)=>i.pipe(s.O(new Map),l.a(n.pipe(s.O(o.p.empty),c.R(((e,r)=>t(r,a.lensFilters)(e)),e.defaultState)),r)),e.getMock=(t,r)=>{const n=i.h.create(e.defaultState);return e.get(t,r,a.t.create(a.t.defaultLensFilters,a.t.defaultTextFilters)).subscribe(u.wW(n)),n};const t=(e,t)=>r=>{const n=o.p.Diff.toRegistered(o.p.diff(r.alerts,e));return{alerts:e,lenses:d.w.applyDiff(t)(n)(r.lenses)}},r=(e,t)=>Object.assign(Object.assign({},t),{lenses:d.w.updatePercentiles(e)(t.lenses)})}(n||(n={}))},35301:(e,t,r)=>{r.d(t,{J:()=>n});var n,i=r(71249),o=r(22690),a=r(57050),s=r(40327),l=r(38983),c=r(84966),u=r(80358),d=r(45701),p=r(50147),m=r(5114),h=r(43675),g=r(62965),f=r(95195),y=r(8125),v=r(81531),b=r(40018),w=r(32952),x=r(9922),I=r(85985),S=r(77176),C=r(2834),E=r(98403),A=r(16118),k=r(40151),M=r(85654);!function(e){let t,r,n;!function(e){let t;!function(e){e.ord=d.ordString,e.show=o._3,e.create=e=>e}(t=e.Id||(e.Id={})),e.isSpecial=e=>Object.values(c.JW.SpecialCategory).includes(e),e.specialCategoryDescription="Special category"}(t=e.Category||(e.Category={})),function(e){e.filter=e=>p.hX((t=>e(t.id))),e.filterWithCount=(e,t)=>r=>{const n=Array.from(r.keys()),i=M.k.getAlerts(t,n).byCategory;return(0,s.pipe)(r,p.DZ((t=>e(t.id)?m.some(Object.assign(Object.assign({},t),{alertsCount:i.get(t.id).filter(b.bZ.isRegistered).length})):m.none)))}}(r=e.BaseMutedCategories||(e.BaseMutedCategories={})),function(e){let n,o;!function(e){let t;!function(e){e.CategoriesChanged="CategoriesChanged"}(t=e.Type||(e.Type={})),e.isChangedEvent=function(e){return e.type===t.CategoriesChanged}}(n=e.Events||(e.Events={})),e.create=function(e,o,d,p,y){const k=v.C8.Logging.getLogger("MutedAlertsModel"),T=l.h.create(new Map),_=new w.xQ,L=new x.w.Keeper;return L.push(e.pipe(I.h(u.h.is("session_started")),S.U((e=>function(e){const t=e.map((e=>[e.userMuteCategory,{id:e.userMuteCategory,description:e.userMuteCategoryDescription,scope:e.userMuteScope}]));return new Map(t)}(e.userMutedCategories))),C.b(E.wW(T)),C.b((()=>_.next({type:n.Type.CategoriesChanged})))).subscribe(),T.pipe(A.G(),S.U((([e,r])=>function(e,r){return{muted:h.uz(t.Id.ord)(e,r),unmuted:h.uz(t.Id.ord)(r,e)}}(e,r))),S.U(function(e){return({muted:t,unmuted:r})=>({toMute:M.k.getAlerts(e,t).all.filter((e=>e.mute!==b.bZ.MuteStateType.Muted)),toUnmute:M.k.getAlerts(e,r).all.filter((e=>e.mute!==b.bZ.MuteStateType.Unmuted))})}(d)),C.b((({toMute:e,toUnmute:t})=>{e.length>0&&p.changeMuteState(e,b.bZ.MuteStateType.Muted),t.length>0&&p.changeMuteState(t,b.bZ.MuteStateType.Unmuted)}))).subscribe()),{events:_,mutedCategories:T,muteCategories:e=>{(0,s.pipe)(o.sendFeedback({kind:c.Mw.MUTE,userMuteScope:y,userMuteCategories:e}),g.Vn((e=>{k.warn("Alerts could not be muted on CAPI",e)})))();const r=M.k.getAlerts(d,e);0===r.all.filter((e=>e.mute!==b.bZ.MuteStateType.Muted)).length&&k.warn("No alerts were muted on category mute",{categoryIds:e});const a=function(e,r,n){return o=>{const a=new Map(o);return e.forEach(((e,o)=>{t.isSpecial(o)?a.set(o,{id:o,scope:r,description:t.specialCategoryDescription}):(0,s.pipe)(i.P5(0,e),m.chain((e=>e.muteCategory)),m.fold((()=>n.error("No alerts to mute",o)),(e=>a.set(o,{id:e.id,description:e.description,scope:r}))))})),a}}(r.byCategory,y,k)(T.get());return T.set(a),_.next({type:n.Type.CategoriesChanged}),f.F2(void 0)},unmuteCategories:e=>{(0,s.pipe)(o.sendFeedback({kind:c.Mw.UNMUTE,userMuteScope:y,userMuteCategories:e}),g.Vn((e=>{k.warn("Alerts could not be un-muted on CAPI",e)})))();return 0===M.k.getAlerts(d,e).all.filter((e=>e.mute!==b.bZ.MuteStateType.Unmuted)).length&&k.warn("No alerts were unmuted on category unmute",{categoryIds:e}),T.modify(function(e,t){return r=>{const n=new Map(r);return e.forEach((e=>{r.has(e)?n.delete(e):t.error("Tried to unmute a category which is not muted",e)})),n}}(e,k)),_.next({type:n.Type.CategoriesChanged}),f.F2(void 0)},getMutedCategories:()=>(0,s.pipe)(T.get(),r.filterWithCount((0,a.ff)(t.isSpecial),d)),getMutedSpecialCategories:()=>(0,s.pipe)(T.get(),r.filter(t.isSpecial)),loadCachedMutedCategories:e=>{T.set(e)},dispose:()=>L.dispose()}},function(e){e.create=function(){return{events:k.E,mutedCategories:l.h.create(new Map),getMutedCategories:()=>new Map,getMutedSpecialCategories:()=>new Map,muteCategories:e=>f.F2(void 0),unmuteCategories:e=>f.F2(void 0),loadCachedMutedCategories:y.Q1,dispose:y.Q1}}}(o=e.Mock||(e.Mock={}))}(n=e.CategoriesModel||(e.CategoriesModel={}))}(n||(n={}))},85654:(e,t,r)=>{r.d(t,{k:()=>n});var n,i=r(40327),o=r(5114),a=r(40018),s=r(4390);!function(e){e.create=e=>({getAlertMuteCategory:t=>(0,i.pipe)(e.getById(t),o.chain((e=>e.muteCategory)))}),e.getAlerts=function(e,t){const r={byCategory:new Map(t.map((e=>[e,[]]))),all:[]};return(0,i.pipe)(e.get(),s.p.reduce(r,((e,{alert:r})=>(0,i.pipe)(r.muteCategory,o.filter((e=>t.includes(e.id))),o.map((e=>e.id)),o.alt((()=>o.fromNullable(t.find(a.bZ.belongsToSpecialCategory(r))))),o.fold((()=>e),(t=>(e.byCategory.get(t).push(r),e.all.push(r),e)))))))}}(n||(n={}))},68579:(e,t,r)=>{r.d(t,{A:()=>n});var n,i=r(27378),o=r(5739),a=r(12187),s=r(8125),l=r(5114),c=r(16027),u=r(89894),d=r(34442),p=r(95983),m=r(77176);!function(e){let t;function r(e){return c.UI.List.make(p.aW.getFoldableWithIndex(),n(e))}function n(t){return c.UI.Knot.make(e.IdProvider,{cell:c.UI.Knot.make(d.H.Cell,{item:c.UI.Composite.make(e.CardStyleProvider,t)})})}!function(e){e.onMount="onMount"}(t=e.ActionsKind||(e.ActionsKind={})),e.cardListContent=r,e.cardList=function(t){return c.UI.Knot.make(e.ScrollableBox,{content:r(t)})},e.ScrollableBox=c.UI.Grid.make((({notify:e,view:r,slots:n})=>i.createElement(o.F.div,Object.assign({},(0,a.Sh)(r("disableUserActions").pipe(m.U((0,s.RN)(g.disableUserActions,void 0))),g.scrollContent),{"data-purpose":"scrollable-box",style:{height:r("height")},mount:r=>e({kind:t.onMount,element:l.fromNullable(r)})()}),n.content))),e.cell=n,e.CardStyleProvider=c.UI.Grid.make((({slots:e})=>i.createElement("div",{className:g.cardWrapper},e.children))),e.IdProvider=c.UI.Grid.make((({slots:e,state:t})=>i.createElement(o.F.div,{"data-id":t},e.cell)))}(n||(n={}));const h={margin:`${u.ux.rem(.5)} 0`,background:"none",userSelect:"none",$nest:{"&:before":{position:"absolute",left:u.ux.rem(-.5),width:u.ux.rem(.5),height:u.ux.percent(100),background:"none",content:"''"}}},g=u.ux.stylesheet({scrollContent:[{position:"relative",boxSizing:"content-box"}],disableUserActions:[{pointerEvents:"none"}],cardWrapper:[h]})},92569:(e,t,r)=>{r.d(t,{A:()=>n});var n,i=r(27378),o=r(5739),a=r(8125),s=r(16027),l=r(44060),c=r(89894),u=r(66896),d=r(62295),p=r(61922),m=r(77176),h=r(57091),g=r(85985);!function(e){e.DefaultCounter=s.UI.Node.make((({state:e})=>i.createElement(o.F.Fragment,null,e.pipe(m.U((({count:e,fontSize:t,lensId:r})=>i.createElement(d.x.OutcomeCounter,{count:e,theme:{counterWrapper:C.get(r),counterContent:S.counterContent},type:"gray",fontSize:t}))))))),e.ZeroCounter=s.UI.Node.make((()=>i.createElement(p.JO.CheckmarkOutcomes,{className:S.zeroCounter}))),e.PlagiarismCounter=s.UI.Node.make((({state:e})=>i.createElement(o.F.Fragment,null,e.pipe(m.U((({count:e,fontSize:t})=>i.createElement(d.x.OutcomeCounter,{count:e,theme:{counterWrapper:S.plagiarismCounterWrapper,counterContent:S.plagiarismCounterContent},suffix:"%",type:"gray",fontSize:t}))))))),e.Component=s.UI.Union.make("kind",{plagiarism:e.PlagiarismCounter,default:e.DefaultCounter,zero:e.ZeroCounter});const t=e=>!u.R.isPlagiarismId(e);e.createLensCounterFlow=(e,r,n)=>s.Z.composeUnion({plagiarism:s.Z.fromSideEffect(a.Q1,r.pipe(m.U((e=>({count:e,fontSize:n}))))),default:s.Z.fromSideEffect(a.Q1,r.pipe(h.a(e.pipe(g.h(t))),m.U((([e,t])=>({count:e,lensId:t,fontSize:n}))))),zero:s.Z.fromSideEffect(a.Q1,null)},(()=>e.pipe(h.a(r),m.U((([e,t])=>({kind:0===t?"zero":e===u.R.SpecialId.Plagiarism?"plagiarism":"default"}))))));const r={fill:c.ux.important(l.Il.CoreNeutral0)},n={fill:c.ux.important(l.Il.CoreNeutral50)},f={fill:c.ux.important(l.Il.CoreRed50)},y={fill:c.ux.important(l.Il.CoreBlue50)},v={fill:c.ux.important(l.Il.CoreGreen50)},b={fill:c.ux.important(l.Il.CorePurple50)},w={fill:c.ux.important(l.Il.CoreNeutral50)},x={fill:c.ux.important(l.Il.CoreCyan50)},I={fill:l.Il.CoreGreen50,minHeight:0,minWidth:c.ux.rem(1)},S=c.ux.stylesheet({counterWrapper:[],counterContent:[r],zeroCounter:[I],allAlertsCounter:[n],priorityAlertsCounter:[n],correctnessCounter:[f],clarityCounter:[y],engagementCounter:[v],deliveryCounter:[b],voxCounter:[w],plagiarismCounterWrapper:[x],plagiarismCounterContent:[r,{}]}),C=new Map([[u.R.SpecialId.AllAlerts,S.allAlertsCounter],[u.R.SpecialId.Priority,S.priorityAlertsCounter],[u.R.SpecialId.Correctness,S.correctnessCounter],[u.R.SpecialId.Clarity,S.clarityCounter],[u.R.SpecialId.Engagement,S.engagementCounter],[u.R.SpecialId.Delivery,S.deliveryCounter],[u.R.SpecialId.Vox,S.voxCounter],[u.R.SpecialId.CorrectnessPriority,S.correctnessCounter],[u.R.SpecialId.ClarityPriority,S.clarityCounter],[u.R.SpecialId.EngagementPriority,S.engagementCounter],[u.R.SpecialId.DeliveryPriority,S.deliveryCounter],[u.R.SpecialId.VoxPriority,S.voxCounter]])}(n||(n={}))},40743:(e,t,r)=>{r.d(t,{C:()=>f});var n=r(27378),i=r(40327),o=r(5739),a=r(5114),s=r(16027),l=r(44060),c=r(89894),u=r(40219),d=r(66896),p=r(64757),m=r(3929),h=r(3656),g=r(77176);const f=s.UI.Node.make((({state:e,notify:t})=>n.createElement(o.F.Fragment,null,e.pipe(g.U((({previews:e,disabled:r,activeLensId:s})=>n.createElement(o.F.div,{className:k.lensNavigation},e.map((e=>n.createElement(p.zx.Flat,{name:e.id,key:e.id,className:k.lensButton,active:(0,i.pipe)(s,a.exists((t=>t===e.id))),disabled:r,title:e.description,titleAlign:"bottomCenter",onClick:t({kind:"lensClicked",lens:e})},n.createElement(m.B,{value:e.progress,wrapperClass:k.progressBarWrapper,progressClass:y(e.id)}),n.createElement(h.XY,{className:k.lensButtonText},e.title)))))))))));function y(e){switch(e){case d.R.SpecialId.Correctness:return k.correctnessProgressBar;case d.R.SpecialId.Clarity:return k.clarityProgressBar;case d.R.SpecialId.Engagement:return k.engagementProgressBar;case d.R.SpecialId.Delivery:return k.deliveryProgressBar;case d.R.SpecialId.Vox:return k.voxProgressBar;default:return}}const v={display:"flex",height:c.ux.percent(100),justifyContent:"space-between",alignItems:"center"},b={display:"flex",flexDirection:"column",marginRight:c.ux.rem(.3125),padding:`${c.ux.rem(.375)} ${c.ux.rem(.25)} 0`,borderRadius:c.ux.rem(u.fx),$nest:{"&:last-child":{marginRight:0},"&:hover:not([data-disabled='true'])":{backgroundColor:l.Il.CoreNeutral10},"&[data-active='true']":{backgroundColor:l.Il.CoreNeutral10,color:l.Il.CoreNeutral90}}},w={textTransform:"uppercase",fontSize:c.ux.px(8)},x={width:c.ux.rem(2),backgroundColor:l.Il.CoreNeutral20},I={backgroundColor:l.Il.CoreRed50},S={backgroundColor:l.Il.CoreBlue50},C={backgroundColor:l.Il.CoreGreen50},E={backgroundColor:l.Il.CorePurple50},A={backgroundColor:l.Il.CoreNeutral50},k=c.ux.stylesheet({lensNavigation:[v],lensButton:[b],lensButtonText:[w],progressBarWrapper:[x],correctnessProgressBar:[I],clarityProgressBar:[S],engagementProgressBar:[C],deliveryProgressBar:[E],voxProgressBar:[A]})},52249:(e,t,r)=>{if(r.d(t,{A:()=>d}),3075==r.j)var n=r(22232);var i=r(16027);if(3075==r.j)var o=r(66896);if(3075==r.j)var a=r(40018);if(3075==r.j)var s=r(85985);if(3075==r.j)var l=r(77176);if(3075==r.j)var c=r(28043);if(3075==r.j)var u=r(15774);function d(e,t,r,d){const p=t.pipe(s.h((e=>e!==o.R.SpecialId.Premium)),l.U((e=>e===o.R.SpecialId.Priority?u.H.LensMode.priority:u.H.LensMode.all)),c.x());return i.Z.fromSideEffect((t=>{if(t.kind===u.H.Action.Kind.select)e.events.next({type:"switchToLens",id:t.selected===u.H.LensMode.priority?o.R.SpecialId.Priority:o.R.SpecialId.AllAlerts,focusFirst:!1,actionSource:a.l$.sidebar});else(0,n.vE)(t.kind)}),p.pipe(l.U((e=>({ord:"priority"===r?u.H.Order.priorityFirst:u.H.Order.allFirst,layoutMode:d,lensMode:e})))))}},15774:(e,t,r)=>{r.d(t,{H:()=>k});var n=r(27378),i=r(5739),o=r(12187),a=r(22232),s=r(45701),l=r(16027),c=r(41572),u=r(64757),d=r(61922),p=r(65223),m=r(77176),h=r(44060),g=r(89894),f=r(40219),y=r(3656);const v=g.ux.style({display:"inline-flex",overflow:"visible",border:`2px solid ${h.Il.CoreNeutral10}`,borderRadius:g.ux.rem(f.fx),backgroundColor:h.Il.CoreNeutral10}),b=g.ux.joinClasses([g.ux.style({padding:`0 ${g.ux.rem(.5)} 0 ${g.ux.rem(.5)}`,display:"inline-flex",justifyContent:"space-around",textAlign:"center",$nest:{"&:first-child":{marginRight:g.ux.px(2)}}}),y.oB.base]),w=g.ux.style({fontSize:g.ux.rem(h.xv.SmallSize)}),x=g.ux.style({width:g.ux.rem(2.5)}),I=g.ux.style({width:g.ux.rem(9.5)}),S=g.ux.joinClasses([g.ux.style({width:g.ux.rem(2.25)}),w]),C=g.ux.joinClasses([g.ux.style({width:g.ux.rem(8.75)}),w]),E=g.ux.joinClasses([g.ux.style({borderRadius:g.ux.rem(f.fx),backgroundColor:h.Il.CoreNeutral0,boxShadow:h.uc.Z100,fontWeight:600,$nest:{"&[data-disabled='true']":{backgroundColor:h.Il.CoreNeutral0}}}),b]),A=g.ux.style({display:"inline-flex",width:g.ux.rem(1.25),minWidth:0,minHeight:0,fill:h.Il.CoreNeutral50,stroke:h.Il.CoreNeutral50,$nest:{"&[data-disabled='true']":{fill:h.Il.CoreNeutral50,stroke:h.Il.CoreNeutral50}}});var k;!function(e){let t,r,h;!function(e){e.priority="priority",e.all="all"}(t=e.LensMode||(e.LensMode={})),function(e){let t;!function(e){e.select="select"}(t=e.Kind||(e.Kind={}))}(r=e.Action||(e.Action={})),function(t){t.priorityFirst=s.fromCompare((t=>t===e.LensMode.priority?-1:1)),t.allFirst=s.fromCompare((t=>t===e.LensMode.all?-1:1))}(h=e.Order||(e.Order={})),e.Component=l.UI.Node.make((({state:e,notify:a})=>n.createElement(i.F.div,{key:"feedModeSelector",className:v},e.pipe(m.U((({lensMode:e,layoutMode:i,ord:s})=>[t.all,t.priority].sort(s.compare).map((t=>n.createElement(u.zx,Object.assign({name:`${t}-lens`,key:`${t}-lens`,disabled:e===t,onClick:()=>a({kind:r.Kind.select,selected:t})()},(0,o.Sh)(e===t?E:b,f(t,i))),n.createElement(g,{selected:t}))))))))));const g=({selected:e})=>{const r=n.useContext(c.m.Context).feedModeSelector;switch(e){case t.all:return n.createElement(n.Fragment,null,r.all);case t.priority:return n.createElement(n.Fragment,null,r.priority,n.createElement(p.u,{align:"bottomCenter",title:r.priorityDescription},n.createElement(d.JO.Info,{width:10,className:A})));default:(0,a.vE)(e)}},f=(e,r)=>{switch(e){case t.all:return"compact"===r?S:x;case t.priority:return"compact"===r?C:I;default:(0,a.vE)(e)}}}(k||(k={}))},84317:(e,t,r)=>{r.d(t,{HP:()=>s});var n=r(16027);if(3075==r.j)var i=r(92569);if(3075==r.j)var o=r(66310);if(3075==r.j)var a=r(52249);function s(e,t,r,s,l,c){return n.Z.composeKnot({info:i.A.createLensCounterFlow(t,t.pipe(o.w((e=>l.getLens(e).view("count")))),c),switcher:(0,a.A)(e,t,r,s)})}},89186:(e,t,r)=>{r.d(t,{B:()=>b});var n=r(27378),i=r(5739),o=r(16027),a=r(92569),s=r(64757),l=r(61922),c=r(77176),u=r(15774),d=r(89894),p=r(3656);const m=d.ux.style({display:"inline-flex",verticalAlign:"middle",marginRight:d.ux.rem(.75),alignItems:"center"}),h=d.ux.joinClasses([d.ux.style({fontWeight:"bold"}),p.oB.base]),g=d.ux.style({minHeight:d.ux.rem(1.5)}),f=d.ux.style({$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:"transparent"}}}),y=d.ux.style({display:"flex",justifyContent:"space-between",alignItems:"center"}),v=d.ux.style({marginTop:d.ux.rem(.35)});var b;!function(e){let t,r;e.Grid=o.UI.Grid.make((({slots:e})=>n.createElement(n.Fragment,null,n.createElement("span",{className:m},e.info),e.switcher))),e.GridWithBulkAccept=o.UI.Grid.make((({slots:e})=>n.createElement("div",{className:y},n.createElement("span",{className:v},e.headerContent),e.bulkAccept))),function(e){let t;!function(e){let t;!function(e){e.switchBack="switchBack"}(t=e.Kind||(e.Kind={}))}(t=e.Action||(e.Action={})),e.Component=o.UI.Node.make((({state:e,notify:r})=>n.createElement(i.F.Fragment,null,e.pipe(c.U((({lensTitle:e})=>n.createElement(n.Fragment,null,n.createElement("span",{className:h},e),n.createElement(s.zx.Flat,{name:"switch-back",title:"Back to all suggestions",className:f,onClick:()=>r({kind:t.Kind.switchBack})()},n.createElement(l.JO.Close,{className:g})))))))))}(t=e.LensFilter||(e.LensFilter={})),function(e){e.Component=o.UI.Grid.make((({slots:e})=>n.createElement(n.Fragment,null,n.createElement("span",{className:m},e.counter),e.filter)))}(r||(r={})),e.DefaultHeader=o.UI.Knot.make(e.Grid,{info:a.A.Component,switcher:u.H.Component}),e.LensInfoComponent=o.UI.Knot.make(r.Component,{counter:a.A.Component,filter:t.Component}),e.WithFilterHeader=o.UI.Knot.make(e.Grid,{info:e.LensInfoComponent,switcher:u.H.Component}),e.Component=o.UI.Union.make("kind",{withFilter:e.WithFilterHeader,withoutFilter:e.DefaultHeader})}(b||(b={}))},92644:(e,t,r)=>{if(r.d(t,{i:()=>m}),3075==r.j)var n=r(22232);var i=r(16027);if(3075==r.j)var o=r(66896);if(3075==r.j)var a=r(40018);if(3075==r.j)var s=r(24713);if(3075==r.j)var l=r(28043);if(3075==r.j)var c=r(85985);if(3075==r.j)var u=r(77176);if(3075==r.j)var d=r(57091);if(3075==r.j)var p=r(87667);function m(e,t,r){const m=e.getLens(o.R.SpecialId.AllAlerts).pipe(s.j("count"),l.x()),h=e.getLens(o.R.SpecialId.Priority).pipe(s.j("count"),l.x()),g=r.pipe(c.h((e=>e!==o.R.SpecialId.Premium)),u.U((e=>e===o.R.SpecialId.Priority?"priority":"all")),l.x());return i.Z.fromSideEffect((e=>{switch(e){case p.n.Actions.switchToAll:t.events.next({type:"switchToLens",id:o.R.SpecialId.AllAlerts,focusFirst:!1,actionSource:a.l$.sidebar});break;case p.n.Actions.switchToPriority:t.events.next({type:"switchToLens",id:o.R.SpecialId.Priority,focusFirst:!1,actionSource:a.l$.sidebar});break;case p.n.Actions.openSetGoals:t.events.next({type:"setGoals"});break;default:(0,n.vE)(e)}}),g.pipe(d.a(m,h,((e,t,r)=>({allAlertsCount:t,priorityAlertsCount:r,selectedLens:e})))))}},87667:(e,t,r)=>{r.d(t,{n:()=>n});var n,i=r(27378),o=r(38983),a=r(5739),s=r(16027),l=r(44060),c=r(89894),u=r(40219),d=r(41572),p=r(64757),m=r(18813),h=r(61922),g=r(77176),f=r(2844);!function(e){let t;!function(e){e.switchToPriority="switchToPriority",e.switchToAll="switchToAll",e.openSetGoals="openSetGoals"}(t=e.Actions||(e.Actions={}));e.Switch=s.UI.Node.make((({state:e,notify:r})=>{const n=i.useContext(d.m.Context).priorityLens,s=o.h.create(!1);return i.createElement(m.L,{name:"priorityLensSwitch",appearanceBehavior:"mouseClick",showDelay:0,closeDelay:100,vAlign:"bottom",theme:{dropdownContainer:T.dropdownContainer,dropdownList:T.dropdownContent},onVisibilityChange:e=>s.set(e),activeDescendantId:e.pipe(g.U((e=>e.selectedLens))),label:i.createElement(a.F.Fragment,null,f.aj([e,s]).pipe(g.U((([{selectedLens:e,priorityAlertsCount:t,allAlertsCount:r},o])=>{const a="priority"===e,s=a?t:r;return i.createElement("div",{className:o?T.labelOpened:T.labelClosed},a?n.prioritySuggestion:n.allSuggestion,s>0&&i.createElement("span",{className:T.alertCount}," ","· ",s," "),i.createElement(h.JO.Arrow,{direction:o?h.n4.up:h.n4.down,className:T.labelArrow}))}))))},i.createElement(a.F.Fragment,null,e.pipe(g.U((({selectedLens:e,priorityAlertsCount:o,allAlertsCount:a})=>{const s="priority"===e;return i.createElement(i.Fragment,null,i.createElement(p.zx.Flat,{id:"priority",name:"priorityAlerts",className:s?T.boldLensButton:T.lensButton,onClick:r(t.switchToPriority)},i.createElement(h.JO.Star,{width:12}),n.prioritySuggestion,s?i.createElement(h.JO.Yes,{className:T.checkMarkIcon}):null),s&&o===a?i.createElement("div",{className:T.disabledLensButton},i.createElement(h.JO.Formatting.BulletList,{width:21}),n.disabledAllSuggestion):i.createElement(p.zx.Flat,{id:"all",name:"allAlerts",className:s?T.lensButton:T.boldLensButton,onClick:r(t.switchToAll)},i.createElement(h.JO.Formatting.BulletList,{width:21}),n.allSuggestion,s?null:i.createElement(h.JO.Yes,{className:T.checkMarkIcon})),i.createElement("div",{className:T.separator}),i.createElement("div",{className:T.description},i.createElement(h.JO.Info,{className:T.descriptionIcon}),i.createElement("div",null,n.description)))})))))}))}(n||(n={}));const y={display:"flex",width:c.ux.rem(16)},v={zIndex:u.FY,marginTop:0,fontSize:c.ux.rem(.875),lineHeight:c.ux.rem(1.3125)},b={display:"flex",boxSizing:"border-box",padding:`${c.ux.rem(.1875)} ${c.ux.rem(.25)} ${c.ux.rem(.1875)} ${c.ux.rem(.25)}`,height:c.ux.rem(1.5),borderRadius:c.ux.rem(u.fx),color:l.Il.CoreNeutral90,textTransform:"uppercase",letterSpacing:c.ux.rem(.025),fontSize:c.ux.rem(.625),lineHeight:c.ux.rem(1.125),cursor:"pointer",userSelect:"none",$nest:{"&:hover":{backgroundColor:l.Il.CoreNeutral20}}},w={backgroundColor:l.Il.CoreNeutral10},x={color:l.Il.CoreNeutral50,whiteSpace:"pre"},I={minWidth:c.ux.rem(1),minHeight:c.ux.rem(1),marginLeft:c.ux.rem(.5625)},S={padding:`0 ${c.ux.rem(.5)}`,color:l.Il.CoreNeutral90,$nest:{"& i:first-child":{margin:0}}},C={display:"flex",padding:`0 ${c.ux.rem(.5)}`,height:c.ux.rem(2),color:l.Il.CoreNeutral50,alignItems:"center",cursor:"not-allowed"},E={margin:`${c.ux.rem(.5)} ${c.ux.rem(1)}`,width:`calc(100% - ${c.ux.rem(2)})`,height:c.ux.px(1),backgroundColor:l.Il.CoreNeutral20},A={display:"flex",padding:`0 ${c.ux.rem(.5)} ${c.ux.rem(.5)} ${c.ux.rem(.5)}`,fontSize:c.ux.rem(.75),lineHeight:c.ux.rem(1.125),alignItems:"center"},k={marginBottom:"auto",minHeight:c.ux.rem(1.25)},M={color:l.Il.CoreBlue60,cursor:"pointer"},T=c.ux.stylesheet({dropdownContainer:[y],dropdownContent:[v],labelClosed:[b],labelOpened:[b,w],alertCount:[x],labelArrow:[I],lensButton:[S],disabledLensButton:[C],boldLensButton:[S,{fontWeight:"bold"}],checkMarkIcon:[{marginLeft:"auto"}],separator:[E],description:[A],descriptionIcon:[k],descriptionLink:[M]})},98782:(e,t,r)=>{r.d(t,{k:()=>y});var n,i=r(57050),o=r(40327),a=r(38983),s=r(73353),l=r(83078),c=r(22232),u=r(5114),d=r(16027),p=r(81531),m=r(22621),h=r(20817);!function(e){e.unwrap=function(e){return h.Ri.create(u.getOrElse((()=>e)),u.some)}}(n||(n={}));var g,f=r(98403);function y(e,t,r,n,h,f,y,v){const b=(0,o.pipe)(e.defaultContext.get(),u.fold((()=>(p.C8.Logging.getLogger("createSetGoalsFlow").warn("Default context not yet set, using fallback",h),h)),i.yR)),w=g.create(e.context.get(),b,f,v),x=a.h.combine(w.showSetGoalsLoader,w.localContext,((e,t)=>({blocks:w.blocks,context:t,showOnLoad:e,features:f,source:n})));return d.Z.fromSideEffect((n=>{switch(n.kind){case m.R.ActionsKind.open:t.goalsPopupShow(n.source);break;case m.R.ActionsKind.upgrade:t.getPremiumButtonClick(),y();break;case m.R.ActionsKind.close:r.onClose();const i=(()=>l.FX("academic")(n.context.domain)&&f.isStudentsOFE)()&&u.isNone(n.context.outcomeContext)?Object.assign(Object.assign({},n.context),{outcomeContext:u.some(s.R$.OutcomeContext.defaultAcademic)}):n.context;e.updateContext(i)&&t.goalsFormSuccess(i,b);break;case m.R.ActionsKind.reset:w.localContext.set(s.R$.unset);break;case m.R.ActionsKind.showOnLoadChanged:w.showSetGoalsLoader.set(n.value);break;default:(0,c.vE)(n)}}),x)}!function(e){e.create=function(e,t,r,i){const o=n.unwrap(t.style),l=n.unwrap(t.audience),c=n.unwrap(s.R$.OutcomeContext.defaultAcademic),d=n.unwrap(t.domain),p=a.h.create(e),m=p.lens("style").lens(o),h=p.lens("domain").lens(d),g=p.lens("outcomeContext").lens(c).lens("type"),y=p.lens("outcomeContext").lens(c).lens("citation"),v=r.isStudentsOFE?h.view((e=>"academic"!==e)):a.h.create(!0),b=f.U_(v),w={audience:{items:s.R$.audiences,current:p.lens("audience").lens(l),default:u.some(t.audience),isVisible:v},formality:{items:s.R$.formalityLevels,current:m,default:u.some(t.style),isVisible:v,shouldDisable:e=>h.view((t=>!s.R$.isStyleValidWithDomain(t,e)))},domain:{items:s.R$.domains,current:h,default:u.some(t.domain),isVisible:a.h.create(!0),shouldDisable:e=>m.view((t=>r.isFree?"general"!==e:!s.R$.isStyleValidWithDomain(e,t)))},intent:{items:s.R$.goals.filter((e=>"sell"!==e)),isVisible:v,current:p.lens("goals")},type:{items:s.R$.academicTypes,default:u.some("essay"),isVisible:b,current:g},format:{items:s.R$.citation,default:u.some("apa"),isVisible:b,current:y}};return{localContext:p,blocks:w,showSetGoalsLoader:a.h.create(!r.demoMode&&i)}}}(g||(g={}))},22621:(e,t,r)=>{r.d(t,{R:()=>pe});var n=r(27378),i=r(16027),o=r(14213),a=r(40327),s=r(5739),l=r(38983),c=r(12187),u=r(8125),d=r(5114),p=r(33678),m=r(41572),h=r(64757),g=r(14330),f=r(3656),y=r(44060),v=r(89894),b=r(24588),w=r(40219),x=r(61922);const I=({upgradeAction:e,size:t,title:r,className:i})=>{const o=n.useContext(m.m.Context).goPremium,a=Boolean(r)?r:o;return n.createElement(h.zx,Object.assign({name:"upgrade"},(0,c.Sh)(i,"big"===t?U.baseBig:"link"===t?U.link:U.baseSmall),{onClick:e}),"link"===t?n.createElement(x.JO.PaidLink,{width:14,className:U.linkIcon}):n.createElement(x.JO.Paid,{className:"big"===t?U.bigIcon:U.icon}),a)},S={background:y.Il.CoreGreen60,borderRadius:v.ux.rem(w.fx),boxShadow:`0 2px 5px ${v.ux.color(b.UE).fade(.35).toRGBA().toString()}`,color:y.Il.CoreNeutral0,textTransform:"uppercase",letterSpacing:v.ux.rem(w.rX),fontWeight:"bold",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:v.ux.color(y.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:v.ux.color(y.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},C={padding:`0 ${v.ux.rem(3)} 0 ${v.ux.rem(2)}`,fontSize:v.ux.rem(.8125),lineHeight:v.ux.rem(3)},E={padding:`0 ${v.ux.rem(2)} 0 ${v.ux.rem(.5)}`,fontSize:v.ux.rem(.6875),lineHeight:v.ux.rem(2)},A={background:y.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:v.ux.color(y.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:v.ux.color(y.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},k={padding:`0 ${v.ux.rem(3)} 0 ${v.ux.rem(2)}`,fontSize:v.ux.rem(.8125),lineHeight:v.ux.rem(3)},M={padding:`0 ${v.ux.rem(2)} 0 ${v.ux.rem(.5)}`,fontSize:v.ux.rem(.6875),lineHeight:v.ux.rem(2)},T={fill:y.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{fill:y.Il.CoreNeutral0}}},_={marginRight:v.ux.rem(.2)},L={color:y.Il.CoreGreen60,fontSize:v.ux.rem(.75),transition:"transform .2s ease-out",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{transform:"scale(1.05)"},"&:not([data-disabled='true']):active":{transition:"none",transform:"scale(1)"}}},N={color:y.Il.CoreGreen60},O={fill:y.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:y.Il.CoreGreen60}}},D={fill:y.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:y.Il.CoreGreen60}}},U=v.ux.stylesheet({base:[S],baseBig:[S,C],baseSmall:[S,E],baseUpHookRedesign:[S,A],baseBigUpHookRedesign:[C,A,k],baseSmallUpHookRedesign:[E,A,M],icon:[T],bigIcon:[T,_],link:[L],linkUpHookRedesign:[L,N],linkIconUpHookRedesign:[O],linkIcon:[D]});var R=r(98403),P=r(90845),F=r(77176),j=r(2844),z=r(2834),B=r(57050),G=r(1509);const W=.8125,H={display:"flex",flexDirection:"column",maxHeight:"90vh",width:v.ux.rem(41.5),backgroundColor:y.Il.CoreNeutral0,textAlign:"left"},$={padding:`${v.ux.rem(1.125)} ${v.ux.rem(2)} ${v.ux.rem(1)}`,paddingBottom:v.ux.rem(1)},V={paddingBottom:0,backgroundColor:y.Il.CoreNeutral0,flexShrink:0,$nest:{"&:after":{position:"absolute",bottom:0,display:"block",width:`calc(100% - ${v.ux.rem(4)})`,height:v.ux.px(1),background:y.Il.CoreNeutral20,content:"''"}}},Q={display:"block",margin:`${v.ux.rem(W)} 0`,color:y.Il.CoreNeutral90,fontWeight:y.xv.SmallLightWeight,lineHeight:v.ux.rem(1.5)},Y={minHeight:v.ux.rem(4)},Z={display:"flex",$nest:{"&:not(:last-child)":{marginBottom:v.ux.rem(1.25),borderBottom:`1px solid ${y.Il.CoreNeutral20}`}}},q={marginBottom:v.ux.rem(-.5),maxWidth:v.ux.rem(27),justifyContent:"initial",flexWrap:"wrap",$nest:{"& > .setGoalsToneButton":{margin:`0 0 ${v.ux.rem(.5)}`,marginLeft:v.ux.important(0),$nest:{"&:not(:last-child)":{marginRight:v.ux.rem(.5)}}}}},J={width:v.ux.rem(7),textTransform:"capitalize",lineHeight:v.ux.rem(2)},K={marginTop:v.ux.rem(W)},X={margin:`0 0 ${v.ux.rem(1.5)} ${v.ux.rem(7)}`},ee={margin:`0 0 ${v.ux.rem(1.5)} ${v.ux.rem(7)}`},te={position:"absolute",top:v.ux.rem(2.5)},re={display:"flex",width:v.ux.percent(100),justifyContent:"space-between"},ne={color:y.Il.CoreNeutral90,fontWeight:300,fontSize:v.ux.rem(.8125)},ie=v.ux.stylesheet({wrapper:[H],modalBody:[$],modalHeader:[V],itemDescription:[Q],modalFooter:[Y],row:[Z],toneButtons:[q],rowHeader:[J],extraContent:[K],title:[X],description:[ee],image:[te],footerWrapper:[re],checkboxText:[ne]}),oe=({name:e,items:t,sticky:r,theme:i={},extraContent:o,children:a,isVisible:l})=>n.createElement(s.F.Fragment,null,l.view((s=>s?n.createElement("div",{className:ie.row},n.createElement("div",null,n.createElement(G.Z.H4,{className:ie.rowHeader},e),o),n.createElement("div",null,n.createElement(h.zx.Group,{sticky:r,className:i.buttonsGroup},t.map((t=>n.createElement(h.zx.White,Object.assign({className:i.button,name:`context-${e}-${t.key}`},t))))),n.createElement(G.Z.Small,{className:ie.itemDescription},a))):null))),ae=({items:e,current:t,isVisible:r,shouldDisable:n,itemTitle:i=B.yR})=>({sticky:!0,isVisible:r,items:e.map((e=>({key:e,active:t.view((t=>t===e)),onClick:()=>t.set(e),disabled:n&&n(e),children:i(e)})))}),se=({blocks:e,features:t,showOnLoad:r,close:i,upgrade:a,reset:s,showOnLoadChanged:l})=>{const c=n.useContext(p.a.Context),u=R.Dx(t),d=R.Dx(e),m=R.Dx(r),h=R.Dx(i);return n.createElement(o.u_,{className:ie.wrapper},n.createElement(o.u_.Header,{className:ie.modalHeader},n.createElement(ce,null)),n.createElement(o.u_.Body,{name:"goalsBody",className:ie.modalBody},n.createElement(le,{features:u,upgradeAction:a,blocks:d})),n.createElement(o.u_.Footer,{className:ie.modalFooter},n.createElement(ue,{supportsSetGoalsLoader:u.pipe(F.U((e=>!e.demoMode&&c.has(p.a.Flag.supportsSetGoalsLoader)))),onDone:h,reset:s,showOnLoad:m,showOnLoadChanged:l})))},le=({blocks:e,features:t,upgradeAction:r})=>{const i=n.useContext(m.m.Context).goals;return n.createElement(s.F.Fragment,null,j.aj(e,t).pipe(F.U((([{audience:e,formality:t,domain:o,intent:l,type:c,format:u},p])=>{const m=n.createElement(oe,Object.assign({name:"domain"},ae(Object.assign(Object.assign({},o),{itemTitle:e=>"mail"===e?"email":e})),{extraContent:n.createElement(s.F.div,{className:ie.extraContent},p.isFree?n.createElement(I,{size:"link",upgradeAction:r}):null)}),o.current.view((e=>p.isFree?i.sections.domain.free:Boolean(e)?i.sections.domain[e]:""))),h=n.createElement(oe,Object.assign({name:"intent"},(({items:e,isVisible:t,current:r},n)=>({isVisible:t,items:e.map((e=>({key:e,active:r.view((t=>(0,a.pipe)(t,d.exists((t=>t.has(e)))))),onClick:()=>r.modify((t=>{const r=(0,a.pipe)(t,d.fold((()=>new Set),(e=>new Set(e))));return r.has(e)?r.delete(e):r.add(e),d.some(r)})),children:n(e)})))}))(l,(e=>i.sections.intent.options[e]))),i.sections.intent.experimental),g=n.createElement(oe,Object.assign({name:"audience"},ae(e)),e.current.view((t=>Boolean(t)&&i.sections.audience[t]((0,a.pipe)(e.default,d.exists((e=>e===t))))))),f=n.createElement(oe,Object.assign({name:"formality"},ae(t)),t.current.view((e=>Boolean(e)?i.sections.formality[e]:""))),y=n.createElement(oe,Object.assign({name:"type"},ae(c)),c.current.view((e=>Boolean(e)?i.sections.type.options[e]:""))),v=n.createElement(oe,Object.assign({name:"format"},ae(Object.assign(Object.assign({},u),{itemTitle:i.sections.format.formatTitle}))),u.current.view((e=>Boolean(e)?i.sections.format.options[e]:"")));return p.isStudentsOFE?n.createElement(n.Fragment,null,m,h,g,f,y,v):n.createElement(n.Fragment,null,g,f,m,h)}))))},ce=()=>{const e=n.useContext(m.m.Context).goals,t=n.useContext(o.u_.TitleIdContext);return n.createElement(n.Fragment,null,n.createElement(f.H1,{id:t,className:ie.title},e.title),n.createElement(de,null),n.createElement(f.XY,{className:ie.description},e.header))},ue=({supportsSetGoalsLoader:e,showOnLoad:t,showOnLoadChanged:r,reset:i,onDone:o})=>{const a=n.useContext(m.m.Context),d=l.h.create(!1);return P.P.useSubscriptionTo(t.pipe(z.b(R.wW(d)))),P.P.useSubscriptionTo(d.pipe(z.b(r))),n.createElement(s.F.div,Object.assign({},(0,c.Sh)(e.pipe(F.U((0,u.RN)(ie.footerWrapper,null))))),e.pipe(F.U((0,u.RN)(n.createElement(g.Ys,{checked:d,name:"set-goals"},n.createElement(f.x4,{className:ie.checkboxText},a.goals.footer.showModalOnStart)),null))),n.createElement(h.zx.Group,null,n.createElement(h.zx.Ghost,{name:"reset",onClick:i},a.goals.footer.reset),o.pipe(F.U((e=>n.createElement(h.zx.Primary,{name:"closeSetContext",onClick:e},a.done))))))},de=()=>n.createElement("svg",{"aria-hidden":!0,className:ie.image,width:"69",height:"80",viewBox:"0 0 69 80"},n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M28.935 70C12.955 70 0 57.045 0 41.065 0 25.085 12.955 12.13 28.935 12.13c15.98 0 28.936 12.954 28.936 28.935C57.87 57.045 44.917 70 28.936 70zm0-12.242c9.22 0 16.694-7.474 16.694-16.693 0-9.22-7.475-16.694-16.695-16.694s-16.693 7.475-16.693 16.695 7.474 16.693 16.693 16.693z",fill:"#4C7AF1"}),n.createElement("path",{d:"M28.935 57.758c-9.22 0-16.693-7.474-16.693-16.693 0-9.22 7.474-16.694 16.693-16.694 9.22 0 16.694 7.475 16.694 16.695s-7.475 16.693-16.695 16.693zm0-11.13a5.564 5.564 0 1 0 0-11.128 5.565 5.565 0 0 0 .001 11.129z",fill:"#BCDBFB"}),n.createElement("circle",{fill:"#FFF",cx:"28.935",cy:"41.065",r:"5.565"}),n.createElement("path",{stroke:"#4C7AF1",strokeLinecap:"round",strokeWidth:"1.5",d:"M15.024 68.016L9.46 78.5m32.274-10.484L47.298 78.5"}),n.createElement("path",{d:"M61.96 13.367a.65.65 0 0 1 .645.656.65.65 0 0 1-.646.655h-6.075L29.35 41.7a.636.636 0 0 1-.913 0 .663.663 0 0 1 0-.927L54.972 13.75V7.59a.65.65 0 0 1 .645-.656.65.65 0 0 1 .646.656v5.777h5.696zm3.17-3.215a.65.65 0 0 1 .646.655.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V4.372a.65.65 0 0 1 .646-.655.65.65 0 0 1 .644.655v5.78h5.696zm3.17-3.218a.65.65 0 0 1 .647.656.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V1.155A.65.65 0 0 1 61.96.5a.65.65 0 0 1 .645.655v5.78H68.3z",fill:"#4C7AF1"}),n.createElement("path",{d:"M49.267 20.486l-8.586 8.757",stroke:"#FFF",strokeWidth:"1.3"})));var pe,me=r(50628);!function(e){let t;e.Modal=i.UI.Node.make((({state:e,view:r,notify:i})=>{P.P.useSubscriptionTo(r("source").pipe(me.P(),z.b((e=>i({kind:t.open,source:e})()))));const a=e.pipe(F.U((e=>i({kind:t.close,source:e.source,context:e.context,showOnLoad:e.showOnLoad}))));return n.createElement(o.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:a},n.createElement(se,{blocks:r("blocks"),features:r("features"),close:a,upgrade:i({kind:t.upgrade}),reset:i({kind:t.reset}),showOnLoad:r("showOnLoad"),showOnLoadChanged:e=>i({kind:t.showOnLoadChanged,value:e})()}))})),function(e){e.open="open",e.close="close",e.upgrade="upgrade",e.reset="reset",e.showOnLoadChanged="showOnLoadChanged"}(t=e.ActionsKind||(e.ActionsKind={}))}(pe||(pe={}))},9690:(e,t,r)=>{r.d(t,{q:()=>Me});var n,i=r(27378),o=r(5739),a=r(22232),s=r(16027),l=r(41572),c=r(25970),u=r(64757),d=r(14213),p=function(){return i.createElement("svg",{"aria-hidden":!0,width:"128",height:"177"},i.createElement("defs",null,i.createElement("rect",{id:"a",y:"14",width:"128",height:"128",rx:"64"})),i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("ellipse",{fill:"#F1F2FA",cx:"64",cy:"173",rx:"48",ry:"4"}),i.createElement("path",{d:"M27 0h62a5 5 0 0 1 5 5v91a5 5 0 0 1-5 5H24a5 5 0 0 1-5-5V8a8 8 0 0 1 8-8z",fill:"#F1F2FA"}),i.createElement("mask",{id:"b",fill:"#fff"},i.createElement("use",{xlinkHref:"#a"})),i.createElement("use",{fill:"#A2BCFF",xlinkHref:"#a"}),i.createElement("path",{d:"M116.708 48.783a4.144 4.144 0 0 1 5.672-1.465 4.138 4.138 0 0 1 1.466 5.667l-17.955 30.462a4.141 4.141 0 0 1-3.57 2.039 4.145 4.145 0 0 1-2.879-1.164l-12.527-12.1a4.138 4.138 0 0 1-.099-5.855 4.144 4.144 0 0 1 5.858-.099l8.747 8.45 15.287-25.935zm-63.446 45.53h58.877a4.141 4.141 0 0 1 4.142 4.139 4.141 4.141 0 0 1-4.142 4.14H53.262a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zM8.793 17.33h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm0 17.526h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm4.99 68.985a4.74 4.74 0 0 1-4.686 4.794 4.74 4.74 0 0 1-.111-9.477 4.74 4.74 0 0 1 4.798 4.683zm16.757 16.106a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14c0 9.416-7.665 17.076-17.087 17.076S4.65 129.363 4.65 119.947a4.141 4.141 0 0 1 4.143-4.14 4.141 4.141 0 0 1 4.143 4.14c0 4.85 3.948 8.796 8.802 8.796 4.853 0 8.802-3.946 8.802-8.796zM8.793 76.46c-1.06 0-2.12-.405-2.93-1.213a4.138 4.138 0 0 1 0-5.855l4.274-4.27-4.273-4.27a4.138 4.138 0 0 1 0-5.855 4.145 4.145 0 0 1 5.859 0l4.273 4.27 4.273-4.27a4.144 4.144 0 0 1 5.858 0 4.138 4.138 0 0 1 0 5.855l-4.273 4.27 4.274 4.27a4.138 4.138 0 0 1-2.93 7.068c-1.06 0-2.12-.405-2.929-1.213l-4.273-4.27-4.273 4.27a4.133 4.133 0 0 1-2.93 1.213zm87.342 44.285l13.678 9.075a4.138 4.138 0 0 1 1.16 5.739 4.144 4.144 0 0 1-5.743 1.159l-11.387-7.555-11.386 7.555a4.143 4.143 0 0 1-4.378.128l-12.844-7.478-11.078 7.35c-.705.468-1.5.691-2.288.691a4.14 4.14 0 0 1-2.295-7.589l13.227-8.776a4.144 4.144 0 0 1 4.377-.128l12.844 7.478 11.53-7.65a4.145 4.145 0 0 1 4.583 0zM31.23 86.814a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14v19.402a4.141 4.141 0 0 1-4.143 4.14 4.141 4.141 0 0 1-4.142-4.14V86.814z",fill:"#BDCFFF",mask:"url(#b)"}),i.createElement("path",{d:"M36 12h65a5 5 0 0 1 5 5v88a8 8 0 0 1-8 8H36a5 5 0 0 1-5-5V17a5 5 0 0 1 5-5z",fill:"#7CA1FF",mask:"url(#b)"}),i.createElement("rect",{fill:"#FFF",x:"25",y:"6",width:"75",height:"101",rx:"5"}),i.createElement("path",{d:"M38 21h49a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1zm0 13h32a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1z",fill:"#F1F2FA"})))},m=r(8965),h=r(3656),g=r(77176),f=r(12187),y=r(76024);!function(e){function t(e,t){var r=t/60,n=y.nH(e/r);return n.s=n.h>0&&n.m>10?0:Math.floor(n.s),n}e.calculateReadingTime=function(e){return t(e,250)},e.calculateSpeakingTime=function(e){return t(e,130)},e.generateStats=function(t,r){var n={words:t,chars:r,sentences:Math.floor(t/5),readingTime:{},speakingTime:{},uniqueWords:40*Math.random(),uniqueWordsIndex:100*Math.random(),rareWords:20*Math.random(),rareWordsIndex:100*Math.random(),wordLength:5.4,wordLengthIndex:100*Math.random(),sentenceLength:16.7,sentenceLengthIndex:100*Math.random(),readabilityScore:73,readabilityDescription:"Your text is likely to be understood by a reader who has at least 7th grade education (age 12)"};return n.readingTime=e.calculateReadingTime(n.words),n.speakingTime=e.calculateSpeakingTime(n.words),n}}(n||(n={}));var v=r(18208),b=r(5114),w=r(44060),x=r(89894),I=r(24588),S=r(40219),C=r(61922),E=r(40327),A=r(38983),k=r(2844),M=r(66310),T=r(93508),_=r(16118),L=r(76974),N=r(13444);const O=e=>{const{score:t,documentIsEmpty:r,sidebarOpen:n=A.h.create(!0),successIcon:a,progressIcon:s,zeroIcon:l=null}=e,c=t.pipe(g.U(b.map((e=>e.rank)))),u=k.aj(t,r,((e,t)=>(0,E.pipe)(e,b.fold((()=>!1),(({rank:e})=>100===e&&!t))))),d=n.pipe(M.w((e=>e?c.pipe(T.O(b.none),_.G(),M.w((([e,t])=>(0,E.pipe)(t,b.fold((()=>L.of(l)),(t=>u.pipe(T.O(!1),_.G(),M.w((([r,n])=>n?L.of(a):(0,E.pipe)(e,b.filter((()=>!r)),b.fold((()=>L.of(s(t)).pipe(N.g(1),T.O(s(0)))),(()=>L.of(s(t)))))))))))))):L.of(null))),T.O(null));return i.createElement(o.F.Fragment,null,d)};var D=r(98403);function U({value:e,className:t,leftCustomClass:r,rightCustomClass:n}){const a=A.h.create(!1);requestAnimationFrame((()=>requestAnimationFrame((()=>a.set(!0)))));const s=k.aj(D.Dx(e),a,((e,t)=>t?`${Math.max(5,Math.abs(e-50))}%`:0)),l=(e,t,r)=>D.Dx(e).pipe(g.U((e=>e<50?t:r)));return i.createElement(o.F.div,Object.assign({},(0,f.Sh)((e=>D.Dx(e).pipe(g.U((e=>e<50?z.leftSideWrapper:z.rightSideWrapper))))(e),t)),i.createElement(o.F.div,Object.assign({},(0,f.Sh)(l(e,z.leftSideProgress,z.rightSideProgress),Boolean(r)&&Boolean(n)&&l(e,r,n)),{style:{width:s}})))}!function(e){e.Label=({value:e,className:t})=>{const r=i.useContext(l.m.Context).performance,n=e>66?r.aboveAverage:e>50?r.average:r.belowAverage;return i.createElement(h.x4,{className:t},n)}}(U||(U={}));const R={position:"relative",zIndex:1,display:"flex",width:x.ux.percent(100),height:x.ux.rem(.25),borderRadius:x.ux.rem(S.fx)},P={height:x.ux.percent(100),backgroundColor:I.FW,transition:"width .8s ease-in-out 0s"},F={marginRight:x.ux.percent(50),borderTopLeftRadius:x.ux.rem(.25),borderBottomLeftRadius:x.ux.rem(.25)},j={marginLeft:x.ux.percent(50),borderTopRightRadius:x.ux.rem(.25),borderBottomRightRadius:x.ux.rem(.25)},z=x.ux.stylesheet({wrapper:[R],leftSideWrapper:[R,{justifyContent:"flex-end"}],rightSideWrapper:[R,{justifyContent:"flex-start"}],progress:[P],leftSideProgress:[P,F],rightSideProgress:[P,j]});var B=r(76457);const G={display:"flex",flexDirection:"column",maxHeight:"90vh",width:x.ux.rem(32),height:x.ux.rem(41),background:w.Il.CoreNeutral0},W={padding:`${x.ux.rem(2.75)} ${x.ux.rem(1)} 0 ${x.ux.rem(2)}`,minHeight:x.ux.rem(5.1),height:x.ux.rem(5.1),backgroundColor:w.Il.CoreNeutral0},H={marginRight:x.ux.rem(1),paddingBottom:x.ux.rem(.3),borderBottom:`1px solid ${I.xO}`},$={padding:`0 ${x.ux.rem(1)} ${x.ux.rem(1)} ${x.ux.rem(2)}`},V={padding:`0 ${x.ux.rem(1.9)}`,minHeight:x.ux.rem(4),height:x.ux.rem(4)},Q={position:"absolute",top:x.ux.rem(-5.15),right:0,bottom:0,left:0,margin:"auto"},Y={display:"flex",flexDirection:"column",marginTop:x.ux.rem(7.15),marginBottom:x.ux.rem(2),paddingRight:x.ux.rem(1),alignItems:"center"},Z={wordSpacing:x.ux.rem(.05),fontSize:x.ux.rem(.875),lineHeight:x.ux.rem(1.5)},q={padding:`${x.ux.rem(1.3)} ${x.ux.rem(2.6)}`,textAlign:"center"},J=x.ux.prefixedStylesheet("statistics",{wrapper:[G],modalHeader:[W],modalHeaderUnderline:[H],modalReady:[{transition:"opacity .2s"}],modalEmpty:[{opacity:0}],modalBody:[$],modalFooter:[V],loader:[Q],zeroStateContainer:[Y],performanceText:[Z],zeroStateText:[Z,q]});var K;!function(e){e.number="number",e.time="time",e.percentage="percentage"}(K||(K={}));const X=e=>{switch(e){case K.number:case K.percentage:return Ae.numberRowData;case K.time:return Ae.timeRowData;default:return(0,a.vE)(e)}},ee=({type:e,value:t,info:r,children:n,dataName:o})=>i.createElement("div",{className:Ae.row,"data-name":o},i.createElement("div",{className:X(e)},i.createElement("div",{className:Ae.metricTitle},n),i.createElement("div",{className:Ae.metric},((e,t)=>{switch(e){case K.number:return(Math.round(10*t)/10).toLocaleString();case K.time:return y.g2(t);case K.percentage:return Math.round(t)+"%";default:return(0,a.vE)(e)}})(e,t))),Boolean(r)?i.createElement(u.RZ,{title:r}):null),te=({state:e})=>{const t=i.useContext(l.m.Context).performance,{stats:r,score:a,documentIsEmpty:s}=e;return i.createElement(i.Fragment,null,i.createElement("section",{className:Ae.titleSection},i.createElement("div",{className:Ae.titleColumns},i.createElement(o.F.div,Object.assign({},(0,f.Sh)(J.performanceText,Ae.headerDescription)),100===a.rank?t.score100:t.scoreUnder100(a.rank)),i.createElement(O,{score:L.of(b.some(a)),documentIsEmpty:L.of(s),successIcon:i.createElement(C.JO.CheckmarkAnimated,{key:"modal-checkmark",width:50,className:Ae.checkmark}),progressIcon:e=>i.createElement(B.P,{key:"modal-performance-progress",colorType:B.P.ColorType.royalBlue,fontSize:B.P.FontSize.small,percentage:e,theme:ke})}))),i.createElement("section",{className:Ae.wordCountSection},i.createElement(h.H2,{className:Ae.sectionHeaderUnderline},t.wordCount),i.createElement("div",{className:Ae.wordCountColumns},i.createElement("div",{className:Ae.firstColumn},i.createElement(ee,{type:K.number,value:Math.max(r.chars-1,0)},t.characters),i.createElement(ee,{type:K.number,value:r.words},t.words),i.createElement(ee,{type:K.number,value:r.sentences},v._6(r.sentences,t.sentence,t.sentences))),i.createElement("div",{className:Ae.secondColumn},i.createElement(ee,{type:K.time,value:n.calculateReadingTime(r.words)},t.readingTime),i.createElement(ee,{type:K.time,value:n.calculateSpeakingTime(r.words)},t.speakingTime)))),i.createElement("section",{className:Ae.readabilitySection},i.createElement("div",{className:Ae.sectionHeaderWrapper},i.createElement(h.H2,null,t.readability),i.createElement(h.CL,null,t.sectionTitleDescription)),i.createElement("div",{className:Ae.readabilityColumns},i.createElement("div",{className:Ae.firstColumn},i.createElement(ee,{type:K.number,value:r.wordLength},t.wordLengthTitle),i.createElement(ee,{type:K.number,value:r.sentenceLength},t.sentenceLengthTitle),i.createElement(ee,{type:K.number,value:r.readabilityScore,info:t.readabilityDescription,dataName:"readability"},t.readabilityScore)),i.createElement("div",{className:Ae.secondColumn},i.createElement("div",{className:Ae.row},i.createElement(U,{value:r.wordLengthIndex,className:Ae.progressBar,leftCustomClass:Ae.leftProgress,rightCustomClass:Ae.rightProgress}),i.createElement(U.Label,{value:r.wordLengthIndex,className:Ae.progressLabel})),i.createElement("div",{className:Ae.row},i.createElement(U,{value:r.sentenceLengthIndex,className:Ae.progressBar,leftCustomClass:Ae.leftProgress,rightCustomClass:Ae.rightProgress}),i.createElement(U.Label,{value:r.sentenceLengthIndex,className:Ae.progressLabel})),i.createElement("div",{className:Ae.verticalPillar}))),i.createElement(h.CL,{className:Ae.readabilityDescr},r.readabilityDescription)),i.createElement("section",null,i.createElement("div",{className:Ae.sectionHeaderWrapper},i.createElement(h.H2,null,t.vocabulary),i.createElement(h.CL,null,t.sectionTitleDescription)),i.createElement("div",{className:Ae.vocabularyColumns},i.createElement("div",{className:Ae.firstColumn},i.createElement(ee,{type:K.percentage,value:r.uniqueWords,info:t.uniqueWords},t.uniqueWordsTitle),i.createElement(ee,{type:K.percentage,value:r.rareWords,info:t.rareWords},t.rareWordsTitle)),i.createElement("div",{className:Ae.secondColumn},i.createElement("div",{className:Ae.row},i.createElement(U,{value:r.uniqueWords,className:Ae.progressBar,leftCustomClass:Ae.leftProgress,rightCustomClass:Ae.rightProgress}),i.createElement(U.Label,{value:r.uniqueWords,className:Ae.progressLabel})),i.createElement("div",{className:Ae.row},i.createElement(U,{value:r.rareWords,className:Ae.progressBar,leftCustomClass:Ae.leftProgress,rightCustomClass:Ae.rightProgress}),i.createElement(U.Label,{value:r.rareWords,className:Ae.progressLabel})),i.createElement("div",{className:Ae.verticalPillar})))))},re={marginBottom:x.ux.rem(2.4)},ne={display:"flex",marginTop:x.ux.rem(.9),marginRight:x.ux.rem(1),justifyContent:"space-between"},ie={marginBottom:x.ux.rem(1.5)},oe={display:"flex",marginTop:x.ux.rem(.8)},ae={marginBottom:x.ux.rem(2.4)},se={display:"flex",marginTop:x.ux.rem(.8)},le={display:"flex",marginTop:x.ux.rem(.8)},ce={flexBasis:x.ux.percent(50)},ue={position:"relative",paddingLeft:x.ux.rem(.5),flexBasis:x.ux.percent(50)},de={display:"flex",height:x.ux.rem(2),alignItems:"center"},pe={display:"flex",justifyContent:"space-between"},me={width:x.ux.rem(10),fontFeatureSettings:`${S.Q9}, ${S.g_}`},he={width:x.ux.rem(13)},ge={marginRight:x.ux.rem(1),paddingBottom:x.ux.rem(.5),borderBottom:`1px solid ${I.xO}`},fe={width:x.ux.percent(80),whiteSpace:"pre-line"},ye={display:"inline-block",color:w.Il.CoreBlue50,textAlign:"right",fontWeight:"bold",fontSize:x.ux.rem(.875),lineHeight:x.ux.rem(2)},ve={display:"inline-block",color:w.Il.CoreNeutral90,fontSize:x.ux.rem(.875),lineHeight:x.ux.rem(2)},be={width:x.ux.rem(3.2),height:x.ux.rem(3.2),fontWeight:"bold"},we={width:x.ux.rem(6),backgroundColor:I.xO},xe={marginLeft:x.ux.rem(1.125)},Ie={backgroundImage:I.BZ},Se={backgroundImage:I.Xd},Ce={display:"block",paddingTop:x.ux.rem(.5)},Ee={position:"absolute",top:x.ux.rem(.5),left:x.ux.rem(3.5),width:x.ux.rem(.0625),height:x.ux.rem(3),backgroundColor:I.jj},Ae=x.ux.stylesheet({titleSection:[re],titleColumns:[ne],wordCountSection:[ie],wordCountColumns:[oe],readabilitySection:[ae],readabilityColumns:[se],vocabularyColumns:[le],firstColumn:[ce],secondColumn:[ue],row:[de],rowData:[pe],numberRowData:[pe,me],timeRowData:[pe,he],sectionHeaderUnderline:[ge],sectionHeaderWrapper:[ge,{display:"flex",alignItems:"baseline",justifyContent:"space-between"}],headerDescription:[fe],metric:[ye],metricTitle:[ve],checkmark:[{alignItems:"center"}],circleProgressBar:[be],progressBar:[we],progressLabel:[xe],leftProgress:[Ie],rightProgress:[Se],readabilityDescr:[Ce],verticalPillar:[Ee]}),ke={radialProgressBar:Ae.circleProgressBar};var Me;!function(e){let t;e.ModalView=s.UI.Grid.make((({slots:r,state:n,notify:o})=>{const a=o({kind:t.close});return i.createElement(d.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:a},i.createElement(e.ModalContent,{state:n,downloadButton:r.downloadButton,onClose:a}))})),function(e){e.close="close"}(t=e.ActionsKind||(e.ActionsKind={})),e.ModalContent=({state:t,downloadButton:r,onClose:n})=>i.createElement(d.u_,{className:J.wrapper},i.createElement(d.u_.Header,{className:J.modalHeader},i.createElement(e.Header,{state:t})),i.createElement(d.u_.Body,{name:"performanceBody",className:J.modalBody,wrapperClassName:t.pipe(g.U((e=>e.type===c.g.State.Type.EMPTY?J.modalEmpty:J.modalReady)))},i.createElement(e.Body,{state:t})),i.createElement(d.u_.Footer,{className:J.modalFooter},i.createElement(f,{downloadButton:r,onClose:n})));const r=()=>{const e=i.useContext(l.m.Context);return i.createElement("div",{className:J.zeroStateContainer},i.createElement(p,null),i.createElement("div",{className:J.zeroStateText},e.performance.notEnoughTextToCalculateStats))};e.Header=({state:e})=>{const t=i.useContext(l.m.Context),r=i.useContext(d.u_.TitleIdContext);return i.createElement(o.F.Fragment,null,e.pipe(g.U((e=>i.createElement(h.H2,{key:"statisticsHeader",id:r,className:e.type===c.g.State.Type.READY?J.modalHeaderUnderline:""},t.performance.title)))))};const n=()=>i.createElement(m.$,{size:64,className:J.loader,variation:"blue"});e.Body=({state:e})=>i.createElement(o.F.Fragment,null,e.pipe(g.U((e=>{switch(e.type){case c.g.State.Type.EMPTY:return null;case c.g.State.Type.LOADING:case c.g.State.Type.ERROR:return i.createElement(n,{key:"statisticsLoading"});case c.g.State.Type.SHORT_CONTENT:return i.createElement(r,{key:"statisticsEmpty"});case c.g.State.Type.READY:return i.createElement(te,{key:"statisticsContent",state:e});default:return(0,a.vE)(e)}}))));const f=({downloadButton:e,onClose:t})=>i.createElement(i.Fragment,null,e,i.createElement(u.zx.Primary,{name:"close-stats",onClick:t},"Close"))}(Me||(Me={}))},89379:(e,t,r)=>{r.d(t,{JT:()=>g,hM:()=>f,wK:()=>h});var n=r(40327),i=r(5114),o=r(8125),a=r(22232),s=r(93756),l=r(16027),c=r(27125),u=r(77176);function d(e){return{title:e.title,firstLine:i.fromNullable(e.firstLine)}}const p=(e,t)=>{const r=t.successLens;switch(e){case c.g.SuccessType.zero:return r.emptyText;case c.g.SuccessType.small:return r.smallText;case c.g.SuccessType.large:return r.largeText;case c.g.SuccessType.applied:return{title:r.fixedText.titles[(0,o.TN)(9)]};case c.g.SuccessType.premiumOnboardingStart:return r.premiumOnboardingStartText;case c.g.SuccessType.premiumOnboardingComplete:return r.premiumOnboardingCompleteText;default:return(0,a.vE)(e)}};function m(e){switch(e){case c.g.SuccessType.applied:case c.g.SuccessType.large:return"growComplete";case c.g.SuccessType.premiumOnboardingStart:return"premiumOnboardingStart";case c.g.SuccessType.premiumOnboardingComplete:return"premiumOnboardingComplete";default:return"growStart"}}function h(e,t){return()=>e.pipe(u.U((e=>{const r=p(e,t);return{kind:m(e),caption:i.some(d(r))}})))}function g(e,t){return()=>e.pipe(u.U((e=>{const r=p(e,t);return{kind:m(e),caption:i.some(d(r))}})))}function f(e){return l.Z.animatingFlow(e,(e=>(0,n.pipe)(e,i.fold((()=>i.some(s.F2("fadein"))),(()=>i.some(s.Hk("fadeout","fadein")))))))}},28378:(e,t,r)=>{r.d(t,{q:()=>R});var n=r(27378),i=r(40327),o=r(5739),a=r(83078),s=r(16027),l=r(44060),c=r(89894),u=r(3656),d=r(77176),p=r(34685);const m=s.UI.Node.make((()=>n.createElement("svg",{"aria-hidden":!0,width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0)"},n.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#D7F7F0"}),n.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",fill:"#D1CEF4"}),n.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",fill:"#D1CEF4"}),n.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094-1.495 11.206 1.495-11.206z",fill:"#D1CEF4"}),n.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094zm0 0l-1.495 11.206",stroke:"#0E101A",strokeMiterlimit:"10"})),n.createElement("path",{d:"M54.822 50.297c0 1.948-1.496 3.59-3.49 3.59-1.995 0-3.49-1.54-3.49-3.59 0-2.052 1.495-5.231 3.49-5.231 1.994 0 3.49 3.282 3.49 5.23z",fill:"#F6DF6C",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M58.411 32.86s-2.194-4.307 1.596-7.897c3.09-2.974 8.276-4.41 10.07-4.923.3-.102.6.205.6.513-.1 1.436-.5 5.026-1.995 7.795-1.695 3.18-6.183 6.359-10.27 4.513zM54.123 37.066s3.49-8.41-9.273-13.334c-.3-.102-.698.206-.599.513.2 1.026.5 3.077.699 5.026.398 4.82 1.396 10.462 9.173 7.795z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M51.431 45.066c.598-4.41 2.393-9.334 7.28-12.513",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0"},n.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#fff"})))))),h=s.UI.Node.make((()=>n.createElement("svg",{"aria-hidden":!0,width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("rect",{x:"28",y:"26.25",width:"56",height:"73.5",rx:"28",fill:"#DBEBFF"}),n.createElement("path",{d:"M78.5 103.284S73.702 64.99 25.9 42.79",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M73.797 88.742s-4.895-9.307 4.512-21.619c0 0 6.91 7.465-4.512 21.619z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M73.701 88.839S69.958 78.95 54.696 77.98c0 0 .96 10.082 19.005 10.858zM63.239 71.195s-6.335-6.496-1.728-19.001c0 .096 7.583 4.362 1.728 19z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M63.143 71.292s-5.567-7.174-18.43-4.072c0 0 3.36 8.143 18.43 4.072zM50.089 57.526s-5.952-4.363-3.84-15.027c0 0 6.623 2.52 3.84 15.026z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M49.993 57.623s-5.376-5.042-15.358-.873c0 0 3.743 6.108 15.358.873z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M42.314 52.097c-4.8-3.297-10.27-6.399-16.414-9.21",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M36.65 48.413s-4.607-2.327-4.319-9.986c0-.097 4.895.97 4.32 9.986z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M36.65 48.51S32.331 45.6 25.9 49.673c0-.097 3.264 3.78 10.75-1.163z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M42.778 85.615c0-2.917-2.194-5.216-4.978-5.216 2.785 0 4.978-2.298 4.978-5.216 0 2.918 2.194 5.216 4.979 5.216-2.785 0-4.979 2.299-4.979 5.216z",fill:"#D1CEF4",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M56.597 42.094c0-2.652-1.994-4.742-4.525-4.742 2.531 0 4.525-2.09 4.525-4.741 0 2.652 1.995 4.742 4.526 4.742-2.531 0-4.526 2.09-4.526 4.741z",fill:"#FCF5D0",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M80.06 61.062c0-3.13-2.354-5.596-5.341-5.596 2.987 0 5.34-2.465 5.34-5.595 0 3.13 2.354 5.595 5.341 5.595-2.987 0-5.34 2.466-5.34 5.596z",fill:"#F8C6DA",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M77 43.212c5.412 0 9.8-4.43 9.8-9.895 0-5.464-4.388-9.894-9.8-9.894-5.412 0-9.8 4.43-9.8 9.894 0 5.465 4.388 9.895 9.8 9.895z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M83.037 29.695c-.35-.353-1.05-.353-1.487 0l-6.125 6.184-2.625-2.65c-.35-.353-1.05-.353-1.487 0-.175.177-.263.442-.263.707 0 .265.088.53.263.706l3.412 3.446c.175.176.438.265.7.265.263 0 .525-.089.7-.265l6.825-6.89c.438-.443.438-1.061.087-1.503z",fill:"#fff"})))),g=s.UI.Node.make((()=>n.createElement("video",{className:y.premiumOnboardingStartVideo,autoPlay:!0,loop:!0,muted:!0,poster:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjY0IiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDI2NCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xMTIuODA5IDgxLjcwNDVDMTEyLjgwOSA4OS4xMDY3IDEyOS40NDEgOTcuOTcxMiAxMjkuNDQxIDk3Ljk3MTJMMTI0LjE0MSAxMDkuMzk0IiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTEzLjA4MyA4Mi44OTI1QzExMy45OTcgODIuNjE4MyAxMTQuNDU0IDgyLjA3IDExNC42MzYgODEuNjEzMUMxMTQuOTExIDgxLjA2NDggMTE0LjgxOSA4MC40MjUxIDExNC40NTQgNzkuOTY4MUwxMTAuOTgxIDc1Ljk0NzFMMTEwLjM0MSA4MS4yNDc1QzExMC4yNSA4MS43OTU4IDExMC41MjQgODIuNDM1NSAxMTEuMDcyIDgyLjcwOTdDMTExLjUyOSA4Mi45ODM5IDExMi4xNjkgODMuMTY2NiAxMTMuMDgzIDgyLjg5MjVaIiBmaWxsPSIjMTVDMzlBIiBzdHJva2U9IiMxQzI1M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMTguNjU4IDcyLjIwMDRDMTE3LjEwNCA3NS43NjQ1IDExNC44MTkgNzguNTk3NCAxMTIuMDc4IDc5LjQxOTlDMTA1LjU4OSA4MS40MzA0IDk0Ljg5NzMgNzIuNjU3MyA5Mi42MTI2IDY0Ljk4MDlDOTAuNDE5NCA1Ny42NzAxIDk0LjI1NzYgNTAuMDg1IDEwMS4yMDMgNDcuMzQzNUMxMDEuNTY4IDQ3LjE2MDcgMTAxLjkzNCA0Ny4wNjkzIDEwMi4zIDQ2Ljk3NzlDMTA5Ljg4NSA0NC42OTMzIDExOC4wMTggNDguOTg4NCAxMjAuMzAzIDU2LjU3MzRDMTIxLjU4MiA2MS4wNTEzIDEyMC43NTkgNjcuMjY1NiAxMTguNjU4IDcyLjIwMDRaIiBmaWxsPSIjMTVDMzlBIiBzdHJva2U9IiMxQzI1M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIG9wYWNpdHk9IjAuNSIgZD0iTTEwMS41NjggNzEuMDEyM0MxMDMuODUzIDY5LjgyNDMgMTAwLjE5OCA2MS40MTY4IDk2Ljk5OSA2My4wNjE3QzkzLjE2MDggNjUuMDcyMiA5OC4wOTU2IDcyLjg0IDEwMS41NjggNzEuMDEyM1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIG9wYWNpdHk9IjAuMjUiIGQ9Ik0xMjAuMjExIDU2LjY2NDdDMTIxLjU4MiA2MS4wNTEzIDEyMC43NTkgNjcuMzU2OSAxMTguNjU3IDcyLjIwMDNDMTEwLjYxNSA2My45NzU2IDEwMS4xMTEgNTIuMjc4MiAxMDEuMTExIDQ3Ljg5MTdDMTAxLjExMSA0Ny43MDg5IDEwMS4xMTEgNDcuNTI2MiAxMDEuMjAzIDQ3LjM0MzRDMTAxLjU2OCA0Ny4xNjA2IDEwMS45MzQgNDcuMDY5MiAxMDIuMjk5IDQ2Ljk3NzhDMTA5Ljg4NCA0NC42OTMyIDExNy45MjYgNDguOTg4MyAxMjAuMjExIDU2LjY2NDdaIiBmaWxsPSIjMUYyNDNDIiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTUxLjAwOCA3Mi42NTczQzE0NS43MDggODQuNTM3NSAxMjkuNDQxIDk3Ljk3MTIgMTI5LjQ0MSA5Ny45NzEyTDEzNC41NTkgMTA3LjExIiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTUwLjkxNyA3My45MzY3QzE1MC4wMDMgNzMuNjYyNSAxNDkuNTQ2IDczLjExNDIgMTQ5LjM2MyA3Mi42NTczQzE0OS4wODkgNzIuMTA4OSAxNDkuMTggNzEuNDY5MiAxNDkuNTQ2IDcxLjAxMjNMMTUzLjAxOSA2Ni45OTEzTDE1My42NTggNzIuMjkxN0MxNTMuNzUgNzIuODQgMTUzLjQ3NiA3My40Nzk3IDE1Mi45MjcgNzMuNzUzOUMxNTIuNDcgNzQuMDI4IDE1MS44MzEgNzQuMTE5NCAxNTAuOTE3IDczLjkzNjdaIiBmaWxsPSIjODc4MEU0IiBzdHJva2U9IiMxQzI1M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xNzEuMzg3IDU2LjAyNTFDMTY5LjEwMyA2My42MTAxIDE1OC41MDIgNzIuNDc0NiAxNTEuOTIyIDcwLjQ2NDFDMTQ1LjQzNCA2OC40NTM2IDE0MS40MTMgNTUuMjk0IDE0My42OTcgNDcuNzA5QzE0NS45ODIgNDAuMTI0IDE1NC4wMjQgMzUuNzM3NCAxNjEuNyAzOC4xMTM1QzE2OS4zNzcgNDAuMzA2NyAxNzMuNjcyIDQ4LjM0ODcgMTcxLjM4NyA1Ni4wMjUxWiIgZmlsbD0iIzg3ODBFNCIgc3Ryb2tlPSIjMUMyNTNDIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8cGF0aCBvcGFjaXR5PSIwLjQiIGQ9Ik0xNjcuOTE1IDUyLjkxOEMxNjMuODk0IDU0LjE5NzQgMTYxLjA2MSA0NC42MDE5IDE2NS4zNTYgNDQuMjM2M0MxNjkuMjg1IDQzLjg3MDggMTcwLjU2NSA1Mi4wOTU1IDE2Ny45MTUgNTIuOTE4WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggb3BhY2l0eT0iMC4yNSIgZD0iTTE2Mi43OTcgMzguOTM1OUMxNjIuNzk3IDQzLjMyMjUgMTUzLjM4NCA1NC45Mjg1IDE0NS4zNDIgNjMuMTUzMkMxNDMuMjQgNTguMzA5NyAxNDIuNTA5IDUyLjA5NTUgMTQzLjc4OSA0Ny43MDlDMTQ2LjA3MyA0MC4xMjQgMTU0LjExNSAzNS43Mzc0IDE2MS43OTIgMzguMTEzNUMxNjIuMDY2IDM4LjIwNDkgMTYyLjQzMSAzOC4yOTYyIDE2Mi43MDUgMzguMzg3NkMxNjIuNzA1IDM4LjU3MDQgMTYyLjc5NyAzOC43NTMyIDE2Mi43OTcgMzguOTM1OVoiIGZpbGw9IiMxRjI0M0MiIHN0cm9rZT0iIzFGMjQzQyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+CjxwYXRoIGQ9Ik0xMjkuNDQxIDY2LjgwODdWMTEyLjEzNiIgc3Ryb2tlPSIjMUYyNDNDIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz4KPHBhdGggZD0iTTEyOS40NDEgNzQuNTc2NUMxMjguNDM2IDc0LjU3NjUgMTI3Ljc5NiA3NC4yMTEgMTI3LjQzMSA3My43NTQxQzEyNi45NzQgNzMuMjk3MSAxMjYuODgyIDcyLjU2NjEgMTI3LjE1NiA3Mi4wMTc3TDEyOS41MzIgNjYuNjI2TDEzMS45MDggNzIuMDE3N0MxMzIuMTgzIDcyLjU2NjEgMTMyLjA5MSA3My4yOTcxIDEzMS42MzQgNzMuNzU0MUMxMzEuMDg2IDc0LjIxMSAxMzAuNDQ2IDc0LjU3NjUgMTI5LjQ0MSA3NC41NzY1WiIgZmlsbD0iI0ZGQzk0MCIgc3Ryb2tlPSIjMUYyNDNDIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz4KPHBhdGggZD0iTTE0My41MTQgMjQuNDA1N0MxNDEuNDEzIDIzLjU4MzIgMTE3LjU2MSAyMy41ODMyIDExNS40NTkgMjQuNDA1N0MxMTMuMzU3IDI1LjIyODEgMTAyLjU3NCAzNS4zNzIgMTAyLjU3NCAzOS4zMDE2QzEwMi41NzQgNDUuOTcyNyAxMjUuNzg2IDcwLjY0NjkgMTI5LjUzMiA3MC42NDY5QzEzMy4yNzkgNzAuNjQ2OSAxNTYuNDkxIDQ1Ljk3MjcgMTU2LjQ5MSAzOS4zMDE2QzE1Ni40IDM1LjQ2MzQgMTQ1LjYxNiAyNS4yMjgxIDE0My41MTQgMjQuNDA1N1oiIGZpbGw9IiNGRkM5NDAiIHN0cm9rZT0iIzFGMjQzQyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+CjxwYXRoIG9wYWNpdHk9IjAuOCIgZD0iTTE0MS41MDQgMjYuMzI0OEMxMzkuMjE5IDI2LjIzMzQgMTM5LjIxOSAyOC44ODM2IDE0MC41OSAzMS4wNzY5QzE0Mi45NjYgMzUuMDA2NSAxNDYuMjU2IDM2LjY1MTQgMTQ3LjYyNyAzNi4xMDMxQzE1MS42NDggMzQuNjQwOSAxNDYuMzQ3IDI2LjQxNjIgMTQxLjUwNCAyNi4zMjQ4WiIgZmlsbD0id2hpdGUiIGZpbGwtb3BhY2l0eT0iMC44Ii8+CjxwYXRoIGQ9Ik0xNTYuNCAzOS4yMTAyTDE0MC44NjQgNDEuNjc3NkgxMTguMDE4TDEwMi40ODIgMzkuMjEwMiIgc3Ryb2tlPSIjMUYyNDNDIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz4KPHBhdGggZD0iTTEzNS4wMTUgMjQuMDQwMkMxMzcuNTc0IDI4Ljc5MjIgMTQwLjg2NCAzOS45NDEzIDE0MC44NjQgNDEuNjc3NkMxNDAuODY0IDQzLjQxNCAxMzUuODM4IDU5LjA0MDkgMTI5LjQ0MSA3MC42NDY5IiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTIzLjg2NiAyNC4wNDAyQzEyMS4zMDggMjguNzkyMiAxMTguMDE4IDM5Ljk0MTMgMTE4LjAxOCA0MS42Nzc2QzExOC4wMTggNDMuNDE0IDEyMy4wNDQgNTkuMDQwOSAxMjkuNDQxIDcwLjY0NjkiIHN0cm9rZT0iIzFGMjQzQyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+CjxwYXRoIG9wYWNpdHk9IjAuOCIgZD0iTTExNy41NjEgNTUuNzUxMUMxMTYuMTkgNTYuMDI1MyAxMTAuNjE1IDUwLjM1OTQgMTA4LjMzMSA0Ni4zMzg0QzEwNy4yMzQgNDQuNDE5MyAxMDguMjM5IDQzLjMyMjcgMTA5LjMzNiA0My4wNDg1QzExMi41MzQgNDIuMjI2IDExMy45MDUgNDQuMzI3OSAxMTYuMDA3IDQ3Ljg5MkMxMTcuOTI2IDUxLjA5MDUgMTE5LjIwNiA1NS4zODU2IDExNy41NjEgNTUuNzUxMVoiIGZpbGw9IndoaXRlIiBmaWxsLW9wYWNpdHk9IjAuOCIvPgo8cGF0aCBkPSJNMTQxLjg2OSA5OS44OTA0QzE0My44OCA5MC4zODYzIDEyOS40NDEgOTcuNzg4NSAxMjkuNDQxIDk3Ljc4ODVDMTI5LjQ0MSA5Ny43ODg1IDE0MC4wNDIgMTA5LjAyOSAxNDEuODY5IDk5Ljg5MDRaIiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTE3LjAxMyA5OS44OTA0QzExNS4wMDIgOTAuMzg2MyAxMjkuNDQxIDk3Ljc4ODUgMTI5LjQ0MSA5Ny43ODg1QzEyOS40NDEgOTcuNzg4NSAxMTguODQgMTA5LjAyOSAxMTcuMDEzIDk5Ljg5MDRaIiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8L3N2Zz4K"},n.createElement("source",{src:`${p.yr}premiumOnboardingStart.mp4`})))),f=s.UI.Node.make((()=>n.createElement("svg",{"aria-hidden":!0,width:"130",height:"82",viewBox:"0 0 130 82",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{opacity:"0.25",d:"M82.084 40.757L72.7367 30.3437C72.1869 29.6495 71.4996 29.3718 70.6748 29.3718H46.8943C46.0695 29.3718 45.3822 29.6495 44.8324 30.3437L35.4851 40.757C34.5229 41.8677 34.5229 43.5338 35.4851 44.6446L57.3412 68.9421C57.7536 69.3586 58.3034 69.6363 58.8533 69.6363C59.4031 69.6363 59.953 69.3586 60.3653 68.9421L82.084 44.6446C83.1837 43.5338 83.1837 41.8677 82.084 40.757Z",fill:"#494393"}),n.createElement("path",{d:"M66.1044 65.0148L87.9605 40.7173C88.6478 39.8843 88.6478 38.6347 87.9605 37.8016L78.4758 27.3884C78.0634 26.9719 77.5136 26.6942 76.8263 26.6942H53.1832C52.6333 26.6942 51.946 26.9719 51.5336 27.3884L42.1864 37.8016C41.4991 38.6347 41.4991 39.8843 42.1864 40.7173L64.0425 65.0148C64.5923 65.7091 65.5546 65.7091 66.1044 65.0148Z",fill:"#FFDF80",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M88.5103 39.3289H41.6365",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M60.4684 26.6942L55.7947 38.4958C55.6573 39.0512 55.6573 39.6066 55.7947 40.0231L65.142 65.5702",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M69.6783 26.6942L74.3519 38.4958C74.4894 39.0512 74.4894 39.6066 74.3519 40.0231L65.0046 65.5702",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("rect",{x:"77.5491",y:"1",width:"8",height:"8",rx:"2",transform:"rotate(14.9627 77.5491 1)",fill:"#F8C6DA",stroke:"#0E101A"}),n.createElement("rect",{x:"13",y:"53.5762",width:"8",height:"8",rx:"2",transform:"rotate(-36.5938 13 53.5762)",fill:"#B8B4EF",stroke:"#0E101A"}),n.createElement("circle",{cx:"96",cy:"73",r:"4",fill:"#87E8D1",stroke:"#0E101A"}),n.createElement("path",{d:"M37 66V72",stroke:"#0E101A"}),n.createElement("path",{d:"M37 76V82",stroke:"#0E101A"}),n.createElement("path",{d:"M45 74L39 74",stroke:"#0E101A"}),n.createElement("path",{d:"M35 74L29 74",stroke:"#0E101A"}),n.createElement("path",{d:"M37.5 10V14.125",stroke:"#0E101A"}),n.createElement("path",{d:"M37.5 16.875V21",stroke:"#0E101A"}),n.createElement("path",{d:"M43 15.5L38.875 15.5",stroke:"#0E101A"}),n.createElement("path",{d:"M36.125 15.5L32 15.5",stroke:"#0E101A"}),n.createElement("path",{d:"M103 21V27",stroke:"#0E101A"}),n.createElement("path",{d:"M103 31V37",stroke:"#0E101A"}),n.createElement("path",{d:"M111 29L105 29",stroke:"#0E101A"}),n.createElement("path",{d:"M101 29L95 29",stroke:"#0E101A"})))),y=c.ux.stylesheet({premiumOnboardingStartVideo:[{width:264,height:120}]}),v=s.UI.Node.make((({view:e})=>n.createElement("div",{"data-name":"success-lens-text",className:D.newSuccessText},n.createElement(u.H4,{key:"title"},e("title")),n.createElement("div",{className:D.newSuccessDescription},n.createElement(o.F.div,{className:D.newSuccessDescriptionText},(0,i.pipe)(e("firstLine"),d.U(a.QP))))))),b=s.UI.Union.asOption(v),w=s.UI.Grid.make((({slots:e})=>n.createElement(o.F.div,{className:D.newSuccessContainer},e.image,e.caption))),x=s.UI.Knot.make(w,{image:m,caption:b}),I=s.UI.Knot.make(w,{image:h,caption:b}),S=s.UI.Knot.make(s.UI.Grid.make((({slots:e})=>n.createElement(o.F.div,{className:D.premiumOnboardingStartSuccessContainer},e.animation,e.caption))),{animation:g,caption:b}),C=s.UI.Knot.make(w,{image:f,caption:b}),E=s.UI.Union.make("kind",{growStart:x,growComplete:I,premiumOnboardingStart:S,premiumOnboardingComplete:C}),A=c.ux.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),k=c.ux.keyframes({"0%":{opacity:1},"100%":{opacity:0}}),M={animation:`${A} 300ms linear forwards`},T={position:"absolute",top:0,width:c.ux.percent(100),animation:`${k} 200ms linear forwards`},_={textAlign:"center",background:l.Il.CoreNeutral0,padding:c.ux.rem(.5)},L={width:c.ux.percent(100),marginTop:c.ux.rem(.5)},N={marginTop:c.ux.rem(.25)},O={fontSize:c.ux.rem(l.xv.NewSuccessDescriptionSize),color:l.Il.CoreNeutral50,letterSpacing:l.xv.NewSuccessDescriptionLetterSpacing,lineHeight:c.ux.rem(l.xv.NewSuccessDescriptionLineHeight),fontWeight:l.xv.NewSuccessDescriptionWeight},D=c.ux.stylesheet({success_fadein:[M],success_fadeout:[T],premiumOnboardingStartSuccessContainer:[_],newSuccessContainer:[{textAlign:"center"}],newSuccessText:[L],newSuccessDescription:[N],newSuccessDescriptionText:[O]}),U=s.UI.Transition.make({fadein:D.success_fadein},{fadeout:D.success_fadeout}),R=s.UI.Animated.make(U,E)},38819:(e,t,r)=>{r.d(t,{r:()=>f});var n=r(27378),i=r(40327),o=r(5114),a=r(16027),s=r(89894),l=r(61903),c=r(41572),u=r(61922),d=r(3656);const p=a.UI.Grid.make((({slots:e})=>n.createElement("div",{className:w.grid},n.createElement("div",{className:w.iconWrapper},e.icon),n.createElement("div",{className:w.titleWrapper},e.title),n.createElement("div",{className:w.bottomWrapper},e.bottom)))),m=a.UI.Node.make((()=>{const e=n.useContext(c.m.Context).successLens.paidView;return n.createElement(d.H4,null,e.title)})),h=a.UI.Node.make((()=>n.createElement(u.JO.GreenOk,{width:32}))),g=a.UI.Knot.make(p,{icon:h,title:m,bottom:a.UI.Union.make("kind",{[l.n.State.hidden]:a.UI.Node.empty,[l.n.State.expanded]:l.n.TogglableExpandedPanel})}),f=(0,i.pipe)(a.UI.squash(g),a.UI.contramapState((e=>(0,i.pipe)(e,o.fold((()=>({bottom:{kind:l.n.State.hidden}})),(e=>({bottom:{kind:l.n.State.expanded,showCloseButton:!1,alertsState:e}}))))))),y={marginTop:s.ux.rem(3.5)},v={marginTop:s.ux.rem(1.375)},b={marginTop:s.ux.rem(2.675)},w=s.ux.stylesheet({grid:[{display:"flex",flexDirection:"column",alignItems:"center"}],iconWrapper:[y],titleWrapper:[v],bottomWrapper:[b]})},70023:(e,t,r)=>{r.d(t,{d:()=>d});var n=r(57050),i=r(5114),o=r(22232),a=r(77176),s=r(60797),l=r(93508),c=r(66310),u=r(61903);function d(e){return(0,n.ls)(a.U((e=>{switch(e.key){case u.n.State.expanded:switch(e.action.kind){case"collapse":return i.some(u.n.State.minimized);case"upgrade":case"onUpgradeButtonMount":return i.none;default:return(0,o.vE)(e.action)}case u.n.State.minimized:return"onClick"===e.action.action?i.some(u.n.State.expanded):(0,o.vE)(e.action.action);default:return(0,o.vE)(e)}})),s.oA,l.O(u.n.State.minimized),c.w((t=>e.pipe(a.U(i.fold((()=>({kind:u.n.State.hidden})),(e=>{switch(t){case u.n.State.minimized:return{kind:u.n.State.minimized,alertsCount:e.count};case u.n.State.expanded:return{kind:u.n.State.expanded,showCloseButton:!0,alertsState:{count:e.count,alerts:e.alerts()}};case u.n.State.hidden:return{kind:u.n.State.hidden};default:return(0,o.vE)(t)}})))))))}},61903:(e,t,r)=>{r.d(t,{n:()=>$});var n=r(16027),i=r(27378),o=r(40327),a=r(5739),s=r(22232),l=r(5114),c=r(41572),u=r(64757),d=r(62295),p=r(61922),m=r(3656),h=r(77176),g=r(44060),f=r(89894),y=r(40219);const v={position:"relative",borderRadius:f.ux.rem(y.fx),boxShadow:"0 1px 7px 0 rgba(129, 137, 169, .2)",userSelect:"none",backgroundColor:g.Il.CoreNeutral0},b={padding:`${f.ux.rem(1)} ${f.ux.rem(2)}`},w={position:"absolute",top:f.ux.rem(.75),left:f.ux.rem(.5)},x={display:"flex",boxSizing:"border-box",padding:f.ux.rem(.5),height:f.ux.rem(2.5),cursor:"pointer",justifyContent:"flex-start",alignItems:"center"},I={marginLeft:f.ux.rem(.8),fontSize:f.ux.rem(.85),lineHeight:f.ux.rem(1)},S={display:"flex",width:f.ux.percent(100),alignItems:"center",justifyContent:"space-between"},C={position:"absolute",top:f.ux.rem(.2),right:f.ux.rem(.3),cursor:"pointer"},E={paddingRight:f.ux.rem(1),textAlign:"left",fontSize:f.ux.rem(.75),lineHeight:f.ux.rem(1.15)},A={marginTop:f.ux.rem(.6),fontSize:f.ux.rem(.875),flexShrink:0},k={display:"flex",marginBottom:f.ux.rem(.6),justifyContent:"flex-end",flexShrink:0},M={marginRight:"auto",lineHeight:f.ux.rem(1.3125)},T={marginTop:f.ux.rem(.21),minWidth:f.ux.rem(1.5),flexShrink:0},_={marginTop:f.ux.rem(1)},L={display:"flex",justifyContent:"center",alignItems:"center",height:f.ux.rem(2),backgroundColor:g.Il.CoreGreen60,borderRadius:f.ux.rem(.25),fontSize:f.ux.rem(.875),fontWeight:700,color:g.Il.CoreNeutral0,lineHeight:f.ux.rem(2),$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:f.ux.color(g.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:f.ux.color(g.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},N=f.ux.stylesheet({wrapper:[v],maximizedWrapper:[b],minimizedWrapper:[x],maximizedWrapperIcon:[w],shadowWrapper:[{position:"relative",zIndex:1}],minimizedText:[I],minimizedContent:[S],maximizedCloseButtonContainer:[C],maximizedHeader:[E],alertCategoryContainer:[A],alertCategory:[k],categoryHumanContainer:[M],alertCounterContainer:[T],premiumButtonContainer:[_],premiumButton:[L]});var O=r(12187);const D=(e,t)=>n.UI.Grid.make((({slots:r})=>i.createElement(a.F.div,Object.assign({},(0,O.Sh)(N.wrapper,e)),i.createElement(p.JO.UpgradeHookPanel.TitleDiamond,{className:t}),r.body))),U=n.UI.Node.make((({notify:e})=>i.createElement(a.F.div,{className:N.maximizedCloseButtonContainer},i.createElement(m.zx,{name:"close",onClick:e("onClick")},i.createElement(p.JO.Arrow,{width:11,direction:p.n4.up})))));var R;!function(e){let t,r;!function(e){e.onUpgrade="onUpgrade",e.onUpgradeButtonMount="onUpgradeButtonMount"}(t=e.ActionsKind||(e.ActionsKind={})),function(e){e.isOnUpgrade=function(e){return"onUpgrade"===e.kind},e.isOnUpgradeButtonMount=function(e){return"onUpgradeButtonMount"===e.kind}}(r=e.Actions||(e.Actions={}))}(R||(R={}));const P=n.UI.Node.make((({state:e,notify:t})=>{const r=i.useContext(c.m.Context);return i.createElement(i.Fragment,null,i.createElement("div",{className:N.maximizedHeader},i.createElement(a.F.Fragment,null,e.pipe(h.U((({count:e})=>e>0?e>1?i.createElement(i.Fragment,{key:"plural"},r.sidebar.content.premiumIssues.foundTitlePlural.description1," ",e," ",r.sidebar.content.premiumIssues.foundTitlePlural.description2):i.createElement(i.Fragment,{key:"singular"},r.sidebar.content.premiumIssues.foundTitleSingular.description1," ",e," ",r.sidebar.content.premiumIssues.foundTitleSingular.description2):null))))),i.createElement(a.F.div,{className:N.alertCategoryContainer},e.pipe(h.U((({alerts:e})=>e.map((e=>i.createElement("div",{key:e.category,className:N.alertCategory},i.createElement("div",{className:N.categoryHumanContainer},e.categoryHuman),i.createElement("div",{className:N.alertCounterContainer},i.createElement(d.x.Counter,{count:e.count,type:"yellowPremium"}))))))))),i.createElement("div",{className:N.premiumButtonContainer},i.createElement("div",{ref:e=>{t({type:"upgradeHookAction",kind:R.ActionsKind.onUpgradeButtonMount,element:l.fromNullable(e)})()}},i.createElement(u.zx,{name:"upgrade",className:N.premiumButton,onClick:t({type:"upgradeHookAction",kind:R.ActionsKind.onUpgrade})},i.createElement(p.JO.UpgradeHookPanel.ButtonDiamond,null),r.goPremium))))})),F=n.UI.Composite.make(D(N.maximizedWrapper,N.maximizedWrapperIcon),n.UI.Group.make({closeButton:n.UI.Union.make("kind",{hidden:n.UI.Node.empty,visible:U}),content:P})),j=(0,o.pipe)(n.UI.squash(F),n.UI.mapAction((e=>{switch(e.key){case"content":switch(e.action.kind){case R.ActionsKind.onUpgrade:return{kind:"upgrade"};case R.ActionsKind.onUpgradeButtonMount:return{kind:"onUpgradeButtonMount",element:e.action.element};default:return(0,s.vE)(e.action)}case"closeButton":return"onClick"===e.action.action?{kind:"collapse"}:(0,s.vE)(e.action.action);default:return(0,s.vE)(e)}})),n.UI.contramapState((e=>({closeButton:{kind:e.showCloseButton?"visible":"hidden"},content:e.alertsState}))));var z=r(28706);const B=n.UI.Node.make((({state:e})=>{const t=i.useContext(c.m.Context);return i.createElement(a.F.div,{className:N.minimizedContent},i.createElement("div",{className:N.minimizedText},t.premiumSuggestions),e.pipe(h.U((({alertsCount:e})=>e>0&&i.createElement(d.x.Counter,{type:"yellowPremium",key:"advancedCounter-counter",count:e})))))})),G=n.UI.Grid.make((({slots:e,notify:t})=>i.createElement("div",Object.assign({role:"button",className:N.shadowWrapper},z.rl(t("onClick"))),e.body))),W=n.UI.Knot.make(G,{body:n.UI.Composite.make(D(N.minimizedWrapper),B)}),H=(0,o.pipe)(n.UI.squash(W),n.UI.contramapState((e=>({body:e}))));var $;!function(e){let t;!function(e){e.hidden="hidden",e.minimized="minimized",e.expanded="expanded"}(t=e.State||(e.State={})),e.TogglableExpandedPanel=n.UI.Union.make("kind",{[t.hidden]:n.UI.Node.empty,[t.expanded]:j}),e.TogglablePanel=n.UI.Union.make("kind",{[t.hidden]:n.UI.Node.empty,[t.minimized]:H,[t.expanded]:j})}($||($={}))},5920:(e,t,r)=>{r.d(t,{l:()=>n});var n,i=r(40327),o=r(5114);!function(e){e.update=function(e,t,r){return e.update(t,r)},e.filter=function(e,t){return e.filter(t)},e.get=function(e,t,r){return(0,i.pipe)(e.get(t),o.filter((e=>r(e.value))))},e.find=function(e,t){return e.find(t)}}(n||(n={}))},21619:(e,t,r)=>{r.d(t,{mN:()=>C});var n,i,o=r(71249),a=r(57050),s=r(40327),l=r(38983),c=r(5114),u=r(45701),d=r(89943),p=r(8125),m=r(55415),h=r(83078),g=r(66896),f=r(77176),y=r(32952),v=r(67434),b=r(28043),w=r(41398),x=r(19751),I=r(17594),S=r(35416);!function(e){const t=e=>t=>(0,s.pipe)(t,c.map((0,a.ls)(o.DZ((t=>e.getAlertByMark(t))),o.DY(u.contramap((({alert:{lensType:e,lensPriority:t}})=>({type:e,priority:t})))(g.R.ord)))));e.fromMarksEvents=(e,r)=>({activeHighlights:(0,s.pipe)(r.activeMarks,f.U(t(e))),hoveredHighlights:(0,s.pipe)(r.hoveredMarks,f.U(t(e)))})}(n||(n={})),function(e){e.Mock=class{constructor(){this.alertHovered=new y.xQ,this.alertClicked=new y.xQ,this.highlightedAlert=l.h.create(c.none)}}}(i||(i={}));class C{constructor(e,t,r,i,o,a){this._ded=e,this._state=t,this._markAlertMapper=r,this._alertsReader=i,this._getActiveItemWithAlert=o,this._resolveClickedAlert=a,this._impl=new E(n.fromMarksEvents(this._markAlertMapper,this._ded),this._state,this._alertsReader,this._getActiveItemWithAlert,this._resolveClickedAlert),this.alertHovered=this._impl.alertHovered,this.alertClicked=this._impl.alertClicked}}class E{constructor(e,t,r,n,i){this._highlightEvents=e,this._state=t,this._alertsReader=r,this._getActiveItemWithAlert=n,this._resolveClickedAlert=i,this._focusedItem=this._state.view(S.nL.getActiveItem(this._getActiveItemWithAlert)),this._focusedLens=this._state.view("currentLens"),this.alertHovered=this._highlightEvents.hoveredHighlights.pipe(f.U(c.map(o.UI((({alert:e})=>e)))),v.R(((e,t)=>(0,s.pipe)(t,c.chain((t=>(0,s.pipe)(e,c.filter((e=>-1!==t.indexOf(e))),c.fold((()=>c.fromNullable(t[0])),c.some)))))),c.none),f.U(c.filter((e=>this._alertsReader.isInteractable(e.id)&&!I.$.isPlagiarism(e)))),b.x()),this.alertClicked=this._highlightEvents.activeHighlights.pipe(w.M(this._focusedItem,this._focusedLens),v.R(((e,[t,r,n])=>{const i=t=>(0,s.pipe)(e,c.exists((e=>e.alert.id===t.alert.id))),o=e=>(0,s.pipe)(r,c.exists((t=>t.activeAlert.id===e.alert.id))),a=e=>n.meta.filter(e.alert);return(0,s.pipe)(t,c.chain((e=>{var t;return(0,s.pipe)(e,null!==(t=this._resolveClickedAlert)&&void 0!==t?t:d.N6([(0,p.W9)(i,o),o,(0,p.W9)(i,a),a,i]),c.fold((()=>c.fromNullable(e[0])),c.some),c.map((e=>m.Vx(e,{highlightIndex:e.alert.hasNestedHighlights?0:e.highlightIndex}))))})))}),h.cS()),x.shareReplay({refCount:!0,bufferSize:1}))}}},54216:(e,t,r)=>{r.d(t,{t:()=>g});var n=r(57050),i=r(40327),o=r(28043),a=r(77176),s=r(8125),l=r(83078),c=r(40018),u=r(66896),d=r(35416),p=r(25975);const m=(0,s.W9)(c.bZ.isRegistered,(0,n.ff)(c.bZ.isMuted)),h=e=>t=>(0,s.W9)(m,e(t));var g;!function(e){e.create=function(e,t){const r=h((t=>e[t]));return{lensFilters:new Map(Object.entries(e)),alertVisibleInText:(e,r)=>(0,s.W9)(h((e=>t[e]))(e),(e=>t=>e||c.bZ.isPriority(t))(r)),alertVisibleInSidebar:r,getLensesFilter:t=>e[t],alertCanBeDisplayed:m,alertIsBulkAcceptable:e=>(0,s.W9)(r(e),c.bZ.isBulkAcceptable)}};const t=e=>t=>e===t.lensId,r=e=>(0,s.W9)(t(u.R.OutcomeId.fromPriorityOutcomeId(e)),c.bZ.isPriority);e.getAlertVisibleInTextFilter=function(e,t){return t.pipe(o.x(((e,t)=>!(e.currentLens.id!==t.currentLens.id||d.nL.isWithPriorityList(e)&&d.nL.isWithPriorityList(t)&&p.v.WithPriority.isNonPriorityListOpened(e.currentLens)!==p.v.WithPriority.isNonPriorityListOpened(t.currentLens)))),a.U((t=>({filter:(0,s.Kg)(e.alertVisibleInText(t.currentLens.id,p.v.WithPriority.nonPriorityAlertsVisible(t)),c.bZ.isBulkApplied),lensId:t.currentLens.id}))))},e.defaultLensFilters={[u.R.SpecialId.Clarity]:t(u.R.SpecialId.Clarity),[u.R.SpecialId.Correctness]:t(u.R.SpecialId.Correctness),[u.R.SpecialId.Delivery]:t(u.R.SpecialId.Delivery),[u.R.SpecialId.Engagement]:t(u.R.SpecialId.Engagement),[u.R.SpecialId.Vox]:t(u.R.SpecialId.Vox),[u.R.SpecialId.FreePremiumAlerts]:e=>(0,i.pipe)(e.extraProperties.freePremium,l.FX("unlocked")),[u.R.SpecialId.ClarityPriority]:r(u.R.SpecialId.ClarityPriority),[u.R.SpecialId.CorrectnessPriority]:r(u.R.SpecialId.CorrectnessPriority),[u.R.SpecialId.DeliveryPriority]:r(u.R.SpecialId.DeliveryPriority),[u.R.SpecialId.EngagementPriority]:r(u.R.SpecialId.EngagementPriority),[u.R.SpecialId.VoxPriority]:r(u.R.SpecialId.VoxPriority),[u.R.SpecialId.Plagiarism]:t(u.R.SpecialId.Plagiarism),[u.R.SpecialId.DraftAI]:n.jv,[u.R.SpecialId.Premium]:t(u.R.SpecialId.Premium),[u.R.SpecialId.AllAlerts]:c.bZ.belongsToAllAlerts,[u.R.SpecialId.Closed]:n.jv,[u.R.SpecialId.Priority]:c.bZ.belongsToPriorityLens,[u.R.SpecialId.PredictionTakeaways]:c.bZ.belongsToPredictionTakeaways,[u.R.SpecialId.PredictionEmogenie]:c.bZ.belongsToPredictionEmogenie,[u.R.SpecialId.RealTimeProofit]:t(u.R.SpecialId.RealTimeProofit)},e.defaultTextFilters=Object.assign(Object.assign({},e.defaultLensFilters),{[u.R.SpecialId.Closed]:c.bZ.isInline,[u.R.SpecialId.Premium]:e.defaultLensFilters[u.R.SpecialId.Premium]}),e.priorityTextFilters=e=>({[u.R.SpecialId.Premium]:(0,s.W9)(e[u.R.SpecialId.Premium],c.bZ.isPriority)})}(g||(g={}))},59368:(e,t,r)=>{r.d(t,{Bd:()=>o,Oe:()=>n,rG:()=>i});var n,i,o,a=r(73975),s=r(40018);!function(e){e.eq=(0,a.Uz)((e=>e.alert))(s.h$.ordId),e.isPending=e=>null!==e.state.scheduled&&(e.state.scheduled.visualState!==e.state.current.visualState||e.state.scheduled.updateRanges||e.state.scheduled.forceUpdate),e.isOneOf=(...e)=>t=>e.some((e=>e===t.state.current.visualState)),e.notAnyOf=(...e)=>t=>e.every((e=>e!==t.state.current.visualState)),e.canBeChanged=t=>r=>Boolean(t)&&o.applied===r.state.current.visualState?t===o.disposed:s.bZ.State.isBulkApplied(r.alert.state)||e.notAnyOf(o.applied,o.disposed)(r),e.isOrWillBe=e=>t=>null===t.state.scheduled?t.state.current.visualState===e:t.state.scheduled.visualState===e,e.willBe=e=>t=>null!==t.state.scheduled&&t.state.scheduled.visualState===e}(n||(n={})),function(e){e.updateRanges=function(e,t){return Object.assign(Object.assign({},e),{updateRanges:t})},e.forceUpdate=function(e,t){return Object.assign(Object.assign({},e),{forceUpdate:t})},e.updateVisualState=function(e,t){return Object.assign(Object.assign({},e),{visualState:t})},e.from=function(e){return{visualState:e,updateRanges:!1,forceUpdate:!1}}}(i||(i={})),function(e){e.initial="initial",e.highlighted="highlighted",e.visible="visible",e.faded="faded",e.hidden="hidden",e.success="success",e.applied="applied",e.disposed="disposed"}(o||(o={})),function(e){e.isApplied=function(t){return t===e.applied}}(o||(o={}))},16746:(e,t,r)=>{r.d(t,{v:()=>I});var n=r(71249),i=r(57050),o=r(40327),a=r(49524),s=r(25656),l=r(24645),c=r(51996),u=r(95195),d=r(5114),p=r(22232),m=r(83078),h=r(89943),g=r(68983),f=r(8125),y=r(81531),v=r(40018),b=r(17594),w=r(36156),x=r(59368);class I{constructor(e,t,r,n,s,l,c,p){this._alert=e,this._alertsService=t,this._alertRangeService=r,this._changeMarksInDEd=n,this._create=s,this._update=l,this._remove=c,this._onTransitionEnd=p,this._currentState=x.rG.from(x.Bd.initial),this._scheduledState=x.rG.from(x.Bd.visible),this.id=this._alert("id").id,this._marksMap=new Map,this._alertRef=this._alertsService.takeReference(this._alert("_alertRef"),"mark"),this._shouldInitMark=!0,this._tryToUpdateRangesInAlert=e=>{if(!e.to.updateRanges||!(0,o.pipe)(this._alertRangeService.hasNewRangesForUpdate(this.id),u.g_(i.jv,a.y)))return d.none;const t=(0,o.pipe)(this._alertRangeService.applyPendingRangesUpdate(this.id),u.Vn((e=>S("markAlert").error("cannot apply pending ranges",e))),d.fromEither,d.chain(a.y),d.filter((({addedHighlightedRanges:e,removedHighlightedRanges:t})=>e.length>0||t.length>0)));return(0,o.pipe)(t,d.map((e=>({commit:()=>e.removedHighlightedRanges[1](),ranges:{added:e.addedHighlightedRanges,removed:e.removedHighlightedRanges[0]}}))))},this._dispose=()=>{this._marksMap.clear(),u.wE.map(this._alertRef,(e=>e.dispose()))},this._disposeIfEmpty=()=>{0===this._marksMap.size&&this._dispose()},u.wE.mapLeft(this._alertRef,(e=>S("markAlert").warn("can not take alertRef",e)))}get state(){return{current:this._currentState,scheduled:this._scheduledState}}get alert(){return this._alert()}scheduleApply(e){return this._throwWhenNotAllowedState(e),this._throwWhenInFinaleState(e),(0,p.kG)(e!==x.Bd.initial,`Cannot schedule change ${this.id} from ${this._currentState.visualState} to initial state`),this._currentState.visualState!==x.Bd.initial||e!==x.Bd.disposed&&!x.Bd.isApplied(e)?this._scheduledState&&this._scheduledState.forceUpdate?this._scheduledState=x.rG.updateVisualState(this._scheduledState,e):this._currentState.visualState!==e||this._currentState.updateRanges?this._scheduledState=x.rG.updateVisualState(this._currentState,e):this._scheduledState=null:(this._scheduledState=null,this._currentState=x.rG.from(x.Bd.disposed),this._dispose()),this}scheduleUpdate(){this._throwWhenInFinaleState(),this._scheduledState=x.rG.updateRanges(this._scheduledState||this._currentState,!0)}scheduleForceUpdate(){this._throwWhenInFinaleState(),this._scheduledState=x.rG.forceUpdate(this._scheduledState||this._currentState,!0)}apply(){if(!x.Oe.isPending(this))return;this._throwWhenInFinaleState();const e=this._getTransition();(0,o.pipe)(this.change(),d.filter((e=>e.rawMark.length>0)),d.map((t=>{this._handleBasicEvent(t.rawMark),t.commit(),this._onTransitionEnd(e,this)})))}applyWith(e){const t=[this,...e];this._handleMultipleHighlights(t,(e=>e.change()))}markByIndex(e){try{return this._throwWhenInFinaleState(),this._shouldInitMark&&(this._shouldInitMark=!1,this.apply()),this._markbyIndex(e)}catch(e){return d.none}}get mark(){return this.markByIndex(0)}_iterateOverMarkAlerts(e,t){e.forEach((({change:e,ma:r})=>{e.rawMark.forEach((e=>{"create"===e.action?r._setMarkAndCheckFinaleState(e.id,(0,o.pipe)(t.created.get(e.id)||u.t$(new Error("Cannot get unknown mark")),d.fromEither)):"remove"===e.action&&r._removeMark(e.id)})),e.commit(),r._disposeIfEmpty()}))}_handleMultipleHighlights(e,t){const r=e.map((e=>[e,t(e)])).filter((([e,t])=>(0,o.pipe)(t,d.filter((t=>0!==t.rawMark.length||(S("markAlert").warn("rawAction must have rawMark array",{rawAction:t.action,state:Object.assign(Object.assign({},e.toJSON()),{alert:void 0})}),!1))),d.isSome))).map((([e,t])=>({ma:e,change:m.MH(t)})));if(0===r.length)return;const n=h.VS(r.map((e=>e.change.rawMark))),i=this._changeMarksInDEd(n);this._iterateOverMarkAlerts(r,i)}get _mark(){return this._markbyIndex(0)}_markbyIndex(e){return this._marksMap.size>e?0===e?this._marksMap.values().next().value:Array.from(this._marksMap.values())[e]:d.none}_setMarkAndCheckFinaleState(e,t){this._throwWhenInFinaleState(),this._setMark(e,t)}_setMark(e,t){this._shouldInitMark=!1,this._marksMap.set(e,t)}_removeMark(e){this._marksMap.delete(e)}change(){(0,p.kG)(x.Oe.isPending(this),"Next state should be scheduled to change it",(()=>JSON.stringify({currentState:this._currentState,aid:this.id})));const e=this._commitTransition();return e.from.visualState!==e.to.visualState||e.to.forceUpdate||e.to.updateRanges?d.some(this._getRawActionForApply(e)):d.none}_handleBasicEvent(e){const t=this._changeMarksInDEd(e);e.forEach((e=>{if(e.action===l.v.Change.ActionType.remove)this._removeMark(e.id);else{const r=(0,o.pipe)(d.fromNullable(this._marksMap.get(e.id)),d.chain(a.y),d.alt((()=>(0,o.pipe)((e.action===l.v.Change.ActionType.create?t.created.get(e.id):t.updated.get(e.id))||u.t$(new Error("Cannot get unknown mark")),d.fromEither))));this._setMark(e.id,r)}})),this._disposeIfEmpty()}_getTransition(){return(0,p.kG)(x.Oe.isPending(this),"Next state should be scheduled to change it",(()=>JSON.stringify({currentState:this._currentState,aid:this.id}))),{from:this._currentState,to:this._scheduledState}}_commitTransition(){const e=this._getTransition();return this._currentState=Object.assign(Object.assign({},e.to),{updateRanges:!1,forceUpdate:!1}),this._scheduledState=null,e}_getRawActionForApply(e){if(e.from.visualState===x.Bd.initial)return(0,o.pipe)(this._tryToUpdateRangesInAlert(e),d.map((e=>e.commit()))),{action:"create",commit:s.Z,rawMark:this._getHighlightRanges((t=>this._create((()=>t),e)(t.meta.id)))};switch(e.to.visualState){case x.Bd.disposed:const t=x.Bd.isApplied(e.from.visualState)||v.bZ.State.isRemoved(this.alert.state)&&b.$.isApplicableAlert(this.alert)&&this._getAppliedRanges(i.Q1).length>0?this._getAppliedRanges(((e,t)=>({id:t().meta.id,range:t}))):this._getHighlightRanges((e=>({id:e.meta.id,range:()=>e}))),r=(0,o.pipe)(this._tryToUpdateRangesInAlert(e),d.map((({commit:e})=>e)),d.getOrElse((()=>i.Q1)));return{action:"remove",commit:r,rawMark:t.map((e=>this._remove(e.range)(e.id)))};case x.Bd.applied:const n=this._getHighlightRanges((e=>this._remove((()=>e))(e.meta.id)));return{action:"replace",commit:(0,o.pipe)(this._tryToUpdateRangesInAlert(e),d.map((({commit:e})=>e)),d.getOrElse((()=>i.Q1))),rawMark:[...n,...this._getAppliedRanges(((t,r)=>this._create(r,e)(r().meta.id)))]};default:const l=()=>v.bZ.State.isBulkApplied(this._alert("_getRawActionForApply").state)?this._getAppliedRanges(((e,t)=>t())):this._getHighlightRanges(a.y);return(0,o.pipe)(this._tryToUpdateRangesInAlert(e),d.map((({commit:t,ranges:r})=>this._getReplaceAction(e,l(),r.removed,t))),d.getOrElse((()=>({action:"update",commit:s.Z,rawMark:l().map((t=>this._update((()=>t),e)(t.meta.id)))}))))}}_getReplaceAction(e,t,r,n){return{action:"replace",commit:n,rawMark:[...r.map((e=>this._remove((()=>e))(e.meta.id))),...t.map((t=>this._create((()=>t),e)(t.meta.id)))]}}_getAppliedRanges(e){return(0,o.pipe)(this._alertRangeService.getAppliedRanges(this.id),u.g_((e=>(S("markAlert").error("cannot get applied ranges",{error:e.message,alert:b.$.snapshot(this._alert("_getAppliedRanges"))}),[])),n.Su(e)))}_getHighlightRanges(e){return(0,o.pipe)(this._alertRangeService.getHighlightRanges(this.id),u.g_((t=>(S("markAlert").warn("cannot get highlight ranges via range service",{error:t,alert:this._alert("_getHighlightRanges")}),(0,o.pipe)(this._alert("_getHighlightRanges_Fallback").getHighlightRanges(),n.UI(e)))),n.UI(e)))}_throwWhenNotAllowedState(e){const t=this._alert("_throwWhenNotAllowedState");(0,p.kG)(!!b.$.isApplicableAlert(t)||(!Boolean(e)||v.bZ.State.isBulkApplied(t.state)||!x.Bd.isApplied(e)),`Applied state isn't allowed for ${this.id}`)}_throwWhenInFinaleState(e){(0,p.kG)(Boolean(e)&&x.Oe.isOneOf(x.Bd.applied)(this)?e===x.Bd.disposed||v.bZ.State.isBulkApplied(this._alert("_throwWhenInFinaleState").state):x.Oe.notAnyOf(x.Bd.disposed)(this),`'${this._currentState.visualState}' MarkAlert '${this.id}' cannot be changed${Boolean(e)?` to '${e}' `:""}`)}toJSON(){return{current:this._currentState,scheduled:this._scheduledState,mark:{id:(0,o.pipe)(this._mark,d.map((e=>e.id)),d.toUndefined),range:(0,o.pipe)(this._mark,d.map((e=>e.range)),d.toUndefined)},alert:this._alert("toJSON")}}equals(e){return x.Oe.eq.equals(this,e)}hashCode(){return(0,w.AC)(this.id)}}!function(e){e.compareTo=e=>{const t=(0,g.W)(c.SV.distanceFrom)(e);return(e,r)=>(0,f.qu)(Math.min(...e.alert.getHighlightRanges().map(t)),Math.min(...r.alert.getHighlightRanges().map(t)))}}(I||(I={}));const S=(0,f.HP)(y.C8.Logging.getLogger)},25980:(e,t,r)=>{r.d(t,{v:()=>n});var n,i=r(57050),o=r(59443),a=r(5114),s=r(95195),l=r(22232),c=r(81531),u=r(60797),d=r(77176),p=r(66310),m=r(28043),h=r(17343),g=r(98403),f=r(91224),y=r(40151),v=r(38194),b=r(76974),w=r(24209),x=r(74238),I=r(4890);!function(e){let t;!function(e){e[e.ANIMATE_ALL=0]="ANIMATE_ALL",e[e.ANIMATE_MARK=1]="ANIMATE_MARK",e[e.NO_ANIMATION=2]="NO_ANIMATION"}(t=e.Animation||(e.Animation={}));const r=c.C8.Logging.root.getLogger("AlignmentViewModel");function n(e,t){return(0,i.zG)(e,s.g_((({kind:e,reason:t})=>{switch(e){case"error":r.error("Cannot align card to mark",{reason:t});break;case"notFound":r.info("Item does not exist, alignment is canceled",{reason:t});break;default:(0,l.vE)(e)}return y.E}),(e=>b.of({mark:t,card:e}))))}e.alignMarkToItem=function(e,s){return({animation:l,suggestedPosition:c})=>({id:b,renderOptions:{features:w},activeHighlightIndex:S,activeAlert:C})=>(0,i.zG)(e.getMarkAlertPosition({alert:C,highlightIndex:S}),u.oA,d.U((e=>({mark:e,cardPosition:s.getCardSuggestedPositionInViewport(b,w.has(I.j.Features.showLabel),a.none,"cardContentTop")}))),p.w((({cardPosition:e,mark:t})=>n(e,t))),p.w((({card:e,mark:t})=>s.setCardPosition(b,w.has(I.j.Features.showLabel),!1,x.r.FromWindowTop.ISO.modify(x.L.concatC(-e.contentOffset))(t)).pipe(m.x(),h.h((0,i.zG)(c,a.filter((t=>s.willFitViewport(b,x.r.FromWindowTop.ISO.modify(x.L.concatC(-e.contentOffset))(t)))),a.getOrElse((()=>x.r.FromWindowTop.ISO.modify(x.L.concatC(e.contentOffset))(e.top)))))))),p.w((r=>e.moveAlertHighlightInViewport({alert:C,highlightIndex:S},r,l===t.ANIMATE_ALL?o.uq.fake:o.uq.none))),h.h(g.PU),f.K((e=>(r.error("Cannot align mark to card",e),y.E))),v.B())},e.alignItemToMark=function(t,s){return({animation:l,fitCardIntoViewport:c})=>({id:u,renderOptions:{features:m},activeAlert:S,activeHighlightIndex:C})=>(0,i.zG)(t.getMarkAlertPosition({alert:S,highlightIndex:C}),p.w(a.fold((()=>y.E),(e=>b.of(e)))),d.U((e=>({mark:e,cardPosition:s.getCardSuggestedPositionInViewport(u,m.has(I.j.Features.showLabel),a.some(e),"cardContentTop")}))),p.w((({cardPosition:e,mark:t})=>n(e,t))),p.w((({card:r,mark:n})=>w.T(s.setCardPosition(u,m.has(I.j.Features.showLabel),l===e.Animation.ANIMATE_ALL,x.r.FromWindowTop.ISO.modify(x.L.concatC(-r.contentOffset))(n)),g.Ft(t.moveAlertHighlightInViewport({alert:S,highlightIndex:C},x.r.FromWindowTop.ISO.modify(x.L.concatC(r.contentOffset))(r.top),l===e.Animation.ANIMATE_ALL?o.uq.initial:o.uq.none))(c)))),h.h(g.PU),f.K((e=>(r.error("Cannot align card to mark",e),y.E))),v.B())}}(n||(n={}))},58562:(e,t,r)=>{r.d(t,{eZ:()=>H,UC:()=>$});var n=r(57050),i=r(40327),o=r(49524),a=r(12447),s=r(22232),l=r(95574),c=r(83078),u=r(8125),d=r(55415),p=r(5114),m=r(95195),h=r(40018),g=r(66896),f=r(60797),y=r(98403),v=r(85089),b=r(76974),w=r(77176),x=r(17343),I=r(93508),S=r(28043),C=r(40151),E=r(66310),A=r(598),k=r(83401),M=r(41398),T=r(55721),_=r(95093),L=r(24209),N=r(16118),O=r(85985),D=r(25980),U=r(15646),R=r(91402),P=r(35416),F=r(74238),j=r(14990),z=r(99116);var B,G,W;!function(e){e.CARD_CONTENT_OFFSET_REM=3.4,e.WITH_LABEL_CARD_CONTENT_OFFSET_REM=e.CARD_CONTENT_OFFSET_REM+1,e.contentOffsetGetter=(t=e.CARD_CONTENT_OFFSET_REM,r=e.WITH_LABEL_CARD_CONTENT_OFFSET_REM)=>(e,n)=>Math.round((e?r:t)*n)}(B||(B={})),function(e){e.cardPositionGetter=(e,t)=>(r,o)=>{const a=new j.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,i.pipe)(e.view(P.nL.getLens).get(),m.Yo((()=>({kind:"error",reason:"Current lens is not WithItemsLensState"}))),m.tS((({items:e,id:t})=>(0,i.pipe)(e.get(r),m.Yo((()=>({kind:"notFound",reason:`The item with id: ${r} does not exist in lens ${t}`}))),m.UI((({value:e})=>(0,i.pipe)(o,p.fold((()=>(0,n.ls)(F.L.AbsTop.ISO.wrap,a.converters.absTopToViewportTop,a.converters.viewportToWindow)(e.positionState.absTop)),n.yR))))))))},e.cardPositionInViewportGetter=(e,t)=>(r,o)=>{const a=new j.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,i.pipe)(e.view(P.nL.getLens).get(),m.Yo((()=>({kind:"error",reason:"Current lens is not WithItemsLensState"}))),m.tS((({items:e,id:t})=>(0,i.pipe)(e.get(r),m.Yo((()=>({kind:"notFound",reason:`The item with id: ${r} does not exist in lens ${t}`}))),m.tS((({value:t})=>{return(0,i.pipe)(o,p.map(a.converters.windowToViewport),p.alt((()=>p.some((0,n.ls)(F.L.AbsTop.ISO.wrap,a.converters.absTopToViewportTop)(t.positionState.absTop)))),p.map((s=t,l=((e,t)=>(0,i.pipe)(t.get(e),p.map((({index:e})=>({before:(0,i.pipe)(t.getAt(e-1),p.map((e=>e.positionState.height)),p.getOrElse((()=>0))),after:(0,i.pipe)(t.getAt(e+1),p.map((e=>e.positionState.height)),p.getOrElse((()=>0)))}))),p.getOrElse((()=>({before:0,after:0})))))(r,e),c=a.viewport,e=>{const t=(0,z.v_)({cardTop:e,cardHeight:s.positionState.height,viewportHeight:c.height,padding:l});return F.L.FromViewportTop.ISO.modify(F.L.concatC(-t))(e)})),p.map(a.converters.viewportToWindow),m.Yo((()=>({kind:"error",reason:"Cannot get card position in viewport"}))));var s,l,c}))))))}}(G||(G={})),function(e){const t=(e,t,r,n)=>{const o=n.viewport.get(),a=n.scrollTop.get(),c=F.L.converters(a,F.r.FromWindowTop.ISO.unwrap(o.top),n.paddingTop.get());return l.vM((()=>(0,i.pipe)(P.nL.getLens(r),p.chain((t=>t.items.get(e))),p.map((e=>F.L.AbsTop.ISO.wrap(e.value.positionState.absTop))),p.map((e=>c.absTopToViewportTop(e))),p.fold((()=>{throw new s.ej("Cannot get offset for unknown card")}),(e=>{const r=c.windowToViewport(t);return F.L.FromViewportTop.ISO.unwrap(e)-F.L.FromViewportTop.ISO.unwrap(r)})))))};e.moveCardToPositionSyncGetter=(e,r)=>n=>(0,i.pipe)(t(n.id,n.position,e.get(),r),m.tS((e=>r.moveCardsBy(e,"moveCardToPositionAnimated")))),e.moveCardToPositionAnimatedGetter=(e,r)=>n=>(0,i.pipe)(t(n.id,n.position,e.get(),r),m.g_((e=>R._(e)),(e=>r.moveCardsByAnimated(e,"moveCardToPositionAnimated"))))}(W||(W={}));var H,$,V,Q,Y=r(71841);class Z extends s.sH{}!function(e){e.cardSuggestedPositionGetter=(e,t)=>(r,n,o,a)=>{const s="cardTop"===a?0:t(n);return(0,i.pipe)(e(r,(0,i.pipe)(o,p.map(F.r.FromWindowTop.ISO.modify(F.L.concatC(-s))))),m.UI((e=>({top:e,contentOffset:s}))))},e.getSuperScrollMapper=(t,r,n)=>{const o=W.moveCardToPositionAnimatedGetter(t,r),a=W.moveCardToPositionSyncGetter(t,r),s=B.contentOffsetGetter();return{setCardPosition:(e,t,r,i)=>{const c={top:i,contentOffset:s(t,n.get())};return(r?o({id:e,position:i}):b.of(a({id:e,position:i})).pipe(w.U(l.MH))).pipe(x.h(c),I.O(c),S.x())},getCardSuggestedPosition:e.cardSuggestedPositionGetter(G.cardPositionGetter(t,r),(e=>s(e,n.get()))),getCardSuggestedPositionInViewport:e.cardSuggestedPositionGetter(G.cardPositionInViewportGetter(t,r),(e=>s(e,n.get()))),willFitViewport:(e,n)=>(0,i.pipe)(t.get(),(t=>!!P.nL.hasItems(t)&&((e,t)=>(r,n)=>{const o=new j.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,i.pipe)(e.currentLens.items,(e=>(0,i.pipe)(e.get(r),p.map((({value:e})=>0===(0,z.v_)({cardTop:o.converters.windowToViewport(n),cardHeight:e.positionState.height,viewportHeight:o.viewport.height,padding:{before:0,after:0}}))))),c.MH)})(t,r)(e,n))),isAboveViewportTop:(u=r,e=>F.r.FromWindowTop.ISO.modify(F.L.concatC(u.scrollTop.get()+u.paddingTop.get()))(e)<u.viewport.get().top)};var u}}(H||(H={})),function(e){e.getMapper=(e,t,r)=>({moveAlertHighlightInViewport:(t,r,n)=>e.ensureAlertHighlightInViewport(t,F.r.FromWindowTop.ISO.unwrap(r),n),getMarkAlertPosition:n=>(0,i.pipe)(e.getMarkByAlert(n),m.Yo((()=>new Z("getMarkByAlert returned O.none"))),m.tS((o=>(0,i.pipe)(o.getRect(),m.UI(a.n.relativeToViewport),m.UI((e=>e.top)),m.vx((()=>(r.debug("Cached alert is missing, falling back to flush"),(r=>(t.flushChanges(),(0,i.pipe)(e.getMarkByAlert(r),m.Yo((()=>new Error("getMarkByAlert returned O.none"))),m.tS((e=>(0,i.pipe)(e.getRect(),m.UI(a.n.relativeToViewport),m.UI((e=>e.top))))))))(n)))),m.UI(F.r.FromWindowTop.ISO.wrap)))),m.Vn((e=>(e instanceof Z||r.warn("Cannot getMarkAlertPosition",e),e))),p.fromEither,(e=>b.of(e)))})}($||($={}));!function(e){e.Mock=class{constructor(){this.alignCardToMark=()=>C.E,this.alignCardTo=()=>C.E,this.alignMarkTo=()=>C.E,this.alignMarkToCard=()=>C.E}}}(V||(V={})),function(e){let t,r;!function(e){let t;!function(e){e.below="below",e.above="above",e.intersects="intersects"}(t=e.RelativePosition||(e.RelativePosition={})),e.getRelativePosition=(e,r,n)=>r.top+n>e.bottom?t.below:e.top>r.bottom?t.above:t.intersects}(t||(t={})),e.createAlignmentOnTypingEffect=(e,t,r,n,o)=>{const a=e.view(P.nL.mapper((({currentLens:e})=>(0,i.pipe)(p.some(e),p.filter((0,z.Bk)(o)))))).pipe(w.U(p.chain(n),p.filter(o.isValidToAlign)),f.cp((e=>r.pipe(E.w(y.b2.rafScheduler),E.w((()=>t.alignCardToMark(e,D.v.Animation.NO_ANIMATION,!1)))))));return{id:"alignmentOnTyping",when:g.R.isWithAlertsId,what:P.nL.Effect.Applicator.create(a.pipe(A.c(k.C)))}},e.createAlignOnDisjointedAreasEffect=(e,r,a,l)=>{const u=e.view((0,n.ls)(P.nL.getLens,p.filter((e=>p.isNone(P.In.getActiveItem(e))&&e.isCardsHeightValid&&e.items.size>0)))),d=u.pipe(w.U(p.isSome),S.x(),E.w(y.Ft(a.changes.pipe(I.O(y.PU),E.w(y.b2.rafScheduler),w.U((()=>p.some((e=>{const t=e.viewport.getValue();return{top:Math.min(t.text.top,t.wrapper.top),bottom:t.text.bottom}})(a)))),w.U(p.filter((e=>e.top-e.bottom!=0)))))),M.M(u.pipe(w.U(p.map((({items:e})=>e)))),c.vB(((n,o)=>(0,i.pipe)(Y.YA(e,l),p.map((e=>({top:F.r.FromWindowTop.ISO.unwrap(e.top),bottom:F.r.FromWindowTop.ISO.unwrap(e.bottom)}))),p.chain((e=>(0,i.pipe)(((e,r,n)=>{const o=(0,i.pipe)(e.getAt(0),p.map((e=>e.positionState.height)),p.getOrElse((()=>0))),a=t.getRelativePosition(r,n,o);switch(a){case t.RelativePosition.above:return(0,i.pipe)(e.getAt(0),p.map((e=>({card:e,top:r.top}))));case t.RelativePosition.below:return(0,i.pipe)(e.getAt(0),p.map((e=>({card:e,top:r.bottom-e.positionState.height}))));case t.RelativePosition.intersects:return p.none;default:return(0,s.vE)(a)}})(o,n,e),p.map((({card:e,top:t})=>r.alignCardTo(e,F.r.FromWindowTop.ISO.wrap(t),D.v.Animation.NO_ANIMATION)))))),p.getOrElse((()=>C.E)))))),E.w(p.fold((()=>C.E),o.y)));return{id:"alignOnDisjointedAreas",when:g.R.isWithAlertsId,what:P.nL.Effect.Applicator.create(d.pipe(A.c(k.C)))}},e.createAlignOnResizeSideEffect=(e,t,r,n,o,a=y.b2.rafScheduler)=>{const s=e.view(P.nL.mapper((({currentLens:e,alertSource:t})=>p.some({currentLens:e,alertSource:t})))).view(p.filter((({currentLens:e})=>(0,z.Bk)(o)(e)))).view(p.chain((({currentLens:e,alertSource:t})=>(0,i.pipe)(n(e),p.filter(o.isValidToAlign),p.map((r=>({item:r,source:t,lensId:e.id}))))))),l=v.Qr.pipe(T.p(100),_.T(r),M.M(s,((e,t)=>t)),E.w(a),E.w(p.fold((()=>C.E),(({item:e})=>t.alignCardToMark(e,D.v.Animation.NO_ANIMATION,!1)))));return{id:"alignOnResizeSideEffect",when:g.R.isWithAlertsId,what:P.nL.Effect.Applicator.create(l.pipe(A.c(k.C)))}},function(e){e.skip="skip"}(r=e.SkipAlertActionSource||(e.SkipAlertActionSource={})),e.createAlignmentSideEffect=(t,r,n=((e,t)=>t),i,o,a,s,l=y.b2.rafScheduler)=>{const c=e._createAlignmentSource(t,r,n,i,o,a,s,l);return{id:"alignmentSideEffect",when:g.R.isWithAlertsId,what:P.nL.Effect.Applicator.create(c.pipe(A.c(C.E)))}},e._createAlignmentSource=(e,t,a=((e,t)=>t),s,l,m,g,f=y.b2.rafScheduler)=>{const v=(0,u.Kg)(U.lY.isAlertMinicardButtonClick,U.lY.isSwitchToClosestByViewport,U.lY.isAlertCardShow,U.eI.isCardExpand,U.lY.isBulkAcceptItemShow,U.lY.isBulkHighlight),b=L.T(e.pipe(w.U(P.nL.mapper((({currentLens:e,alertSource:t})=>p.some({currentLens:e,alertSource:t})))),I.O(p.none),w.U(p.map((e=>e.currentLens.id))),N.G(),O.h((([e,t])=>(0,i.pipe)(c.vB(((e,t)=>e!==t))(e,t),p.exists(o.y)))),x.h(p.none)),e.pipe(w.U(P.nL.mapper((({currentLens:e,alertSource:t})=>p.some({currentLens:e,alertSource:t})))),O.h(p.exists((({currentLens:e})=>(0,z.Bk)(l)(e)))),w.U(p.chain((({currentLens:e,alertSource:t})=>(0,i.pipe)(s(e),p.filter(l.isValidToAlign),p.map((r=>({item:r,source:t,lensId:e.id}))))))))).pipe(S.x((0,n.ls)(c.vB(((e,t)=>e.lensId===t.lensId&&e.source===t.source&&e.item.activeAlert.id===t.item.activeAlert.id&&e.item.visualState.transition.type===t.item.visualState.transition.type&&e.item.activeHighlightIndex===t.item.activeHighlightIndex)),p.exists(o.y)))),A=(0,u.Kg)(U.lY.isBulkHighlight,U.lY.isAlertMinicardButtonClick),T=t.pipe(O.h(v),w.U(p.some),I.O(p.none),N.G(),O.h((0,n.ls)((0,n.og)(c.vB(((e,t)=>!U.lY.isAlertCardShow(t)||!U.lY.isAlertMinicardButtonClick(e)))),p.getOrElse(n.jv))),w.U((([,e])=>(0,i.pipe)(e,p.filter(A)))),I.O(p.none)).pipe(E.w((e=>b.pipe(O.h(p.exists((e=>e.source===h.l$.sidebar))),w.U(p.chain((t=>p.some(Object.assign(Object.assign({},t),{clickPoint:(0,i.pipe)(e,p.map(d.ei("clickPoint")))}))))))))),_=b.pipe(O.h(p.exists((e=>e.source!==h.l$.sidebar))),w.U((e=>(0,i.pipe)(e,p.chain((e=>p.some(Object.assign(Object.assign({},e),{clickPoint:p.none}))))))));return L.T(T,_).pipe(I.O(p.none),N.G(),w.U((([e,t])=>(0,i.pipe)(t,p.map((r=>({lensId:r.lensId,card:r.item,source:r.source,animate:(0,i.pipe)(e,c.wo((({lensId:e})=>e===r.lensId))),clickPoint:(0,i.pipe)(t,p.chain(d.ei("clickPoint")),p.map((0,n.ls)(d.ei("y"),F.r.FromWindowTop.ISO.wrap)))})))))),E.w(p.fold((()=>C.E),f)),M.M(e),E.w((([{card:e,source:t,animate:n,clickPoint:o,lensId:s},l])=>(0,i.pipe)(a(e,t),(t=>P.nL.hasItems(l)&&l.currentLens.items.has(e.id)&&s===l.currentLens.id&&t!==r.skip?((e,t,r,n)=>{if(r===h.l$.text)return(0,i.pipe)(e,g({animation:t?D.v.Animation.ANIMATE_ALL:D.v.Animation.NO_ANIMATION,fitCardIntoViewport:!0}));if(r===P.h8.forceText)return(0,i.pipe)(e,g({animation:D.v.Animation.NO_ANIMATION,fitCardIntoViewport:!1}));{const o=r===h.l$.sidebar?t?D.v.Animation.ANIMATE_ALL:D.v.Animation.ANIMATE_MARK:D.v.Animation.NO_ANIMATION;return(0,i.pipe)(e,m({animation:o,suggestedPosition:n}))}})(e,n,t,o):k.C)))))}}(Q||(Q={}))},15787:(e,t,r)=>{r.d(t,{sU:()=>ye,dv:()=>fe,Xx:()=>Ee});var n={};r.r(n),r.d(n,{handleGbPrompt:()=>X,sendToIdeasGallery:()=>K,sendToSignIn:()=>J});var i=r(11064),o=r(57050),a=r(40327),s=r(32952),l=r(38983),c=r(84966),u=r(59312);function d(e,t){return{map:function(r,n){return e.map(r,(function(e){return t.map(e,n)}))}}}var p,m=r(5114);function h(e){var t,r,n=(t=e,r=m.Applicative,{map:d(t,r).map,of:function(e){return t.of(r.of(e))},ap:function(e,n){return t.ap(t.map(e,(function(e){return function(t){return r.ap(e,t)}})),n)}}),i=e.of(m.none);return{map:n.map,ap:n.ap,of:n.of,chain:function(t,r){return e.chain(t,(0,m.fold)((function(){return i}),r))},alt:function(t,r){return e.chain(t,(0,m.fold)(r,(function(t){return e.of((0,m.some)(t))})))},fold:function(t,r,n){return e.chain(t,(0,m.fold)(r,n))},getOrElse:function(t,r){return e.chain(t,(0,m.fold)(r,e.of))},fromM:function(t){return e.map(t,m.some)},none:function(){return i}}}!function(e){var t;e.URI="IOOption",e.ioOption=(0,u.pi)({URI:e.URI},h(i.io)),t=(0,a.pipeable)(e.ioOption),e.map=t.map,e.chain=t.chain,e.ap=t.ap,e.alt=t.alt,e.apFirst=t.apFirst,e.apSecond=t.apSecond,e.of=e.ioOption.of,e.fold=function(t,r){return function(n){return e.ioOption.fold(n,t,r)}},e.fromM=e.ioOption.fromM}(p||(p={}));var g=r(22232),f=r(83078),y=r(8125),v=r(31668),b=r(71249),w=r(95195),x=r(73975),I=r(81531),S=r(46680),C=r(33678),E=r(40018),A=r(79227),k=r(66896),M=r(15646),T=r(9922),_=r(95983),L=r(598),N=r(40151),O=r(76974),D=r(66310),U=r(91402),R=r(77176),P=r(28043),F=r(44586),j=r(83401),z=r(77843),B=r(93508),G=r(95093),W=r(85985),H=r(36919),$=r(2834),V=r(67434),Q=r(38194),Y=r(5920),Z=r(25980),q=r(24209);const J=(e,t)=>(0,o.ls)(W.h((e=>e.type===M.lY.Type.toSignIn)),R.U((()=>r=>(e.actions.openUrl(new v.Z(t.funnel.signin).addParams({utm_medium:"internal",utm_source:"upHook",utm_campaign:"editorDenalianonymousUserGenericSignInPrompt"})),r)))),K=(e,t)=>(0,o.ls)(W.h(M.lY.isOpenIdeasGallery),$.b((()=>e.actions.openPopup(new v.Z(t.ideas.galleryURL)))),L.c(N.E)),X=(e,t,r)=>n=>q.T((0,a.pipe)(n,W.h(M.lY.isGbPromptShow),$.b((e=>ee(e,r))),L.c(N.E)),(0,a.pipe)(n,W.h(M.lY.isGbPromptApply),$.b((n=>te(e,t,n,r))),L.c(N.E)),(0,a.pipe)(n,W.h(M.lY.isGbPromptCreateRule),$.b((e=>re(e,r))),L.c(N.E)),(0,a.pipe)(n,W.h(M.lY.isGbPromptDismiss),$.b((e=>ne(e,r))),L.c(N.E))),ee=({patternName:e},t)=>t.onShow(e),te=(e,t,r,n)=>E.BY.isVox(r.gbPrompt)?ie(e,t,r,n):se(e,t,r,n),re=(e,t)=>E.BY.isVox(e.gbPrompt)?ue(e,t):me(),ne=(e,t)=>E.BY.isVox(e.gbPrompt)?he(e,t):ge(e,t),ie=(e,t,r,n)=>"redirect"===r.gbPrompt.promptType?oe(e,t,r,n):ae(),oe=(e,t,{gbPrompt:{styleGuideId:r},source:n,target:i,patternName:o},a)=>{e.actions.openPopup(new v.Z(t.account.styleGuide).addParams({utm_medium:"internal",utm_source:"acHook",utm_campaign:"consistencySGprompt",action:"createRule",source:n,target:i,styleGuideId:r})),a.onAccept(o)},ae=()=>{},se=(e,t,r,n)=>"redirect"===r.gbPrompt.promptType?le(e,t,r,n):ce(r,n),le=(e,t,{gbPrompt:r,patternName:n},i)=>{e.actions.openPopup(new v.Z(t.account.writingStyle).addParams({utm_medium:"internal",utm_source:"acHook",utm_campaign:"consistencySGprompt",categoryTitle:r.categoryTitle})),i.onAccept(n)},ce=({patternName:e},t)=>t.onAccept(e),ue=(e,t)=>"redirect"===e.gbPrompt.promptType?de():pe(e,t),de=()=>{},pe=({patternName:e},t)=>t.onAccept(e),me=()=>{},he=({patternName:e,step:t},r)=>"initial"===t&&r.onDismiss(e),ge=({patternName:e,step:t},r)=>"initial"===t&&r.onDismiss(e);var fe,ye,ve=r(17594),be=r(26027),we=r(20594),xe=r(16892),Ie=r(48521),Se=r(35416),Ce=r(25975);!function(e){const t=(e,t,r,n)=>(0,a.pipe)(n((t=>(t.lensId===e.id||k.R.isMainLens(e.id))&&!E.bZ.isPremium(t)),"middleOfTheViewport"),m.fold((()=>N.E),(n=>(0,a.pipe)(r(e),m.filter((e=>e.activeAlert.id===n.alert.id)),m.fold((()=>O.of(n)),(e=>((e,r)=>(0,a.pipe)(t,m.map((t=>t.alignMarkToCard(e,Z.v.Animation.ANIMATE_ALL,m.none).pipe(L.c(N.E)))),m.getOrElse((()=>O.of(r)))))((0,o.MZ)(e),n)))))));e.changeAlertEffect=(e,r,n,i,o,s,l,c)=>({id:"changeAlertEffect",when:k.R.isWithAlertsId,what:Se.nL.Effect.SwitchAlert.create(r.actionEvents.pipe(D.w((r=>{const u=e.get();if(!Se.nL.hasCards(u))return U._(new g.ej("Cannot update state without cards"));switch(r.type){case M.lY.Type.alertMinicardButtonClick:return(0,a.pipe)(o.getRegistered(r.alertHighlight.alert.id),m.fold((()=>(c.error("somehow we got click on non registered alert",{alert:ve.$.snapshot(r.alertHighlight.alert),alertInRepo:(0,a.pipe)(o.getById(r.alertHighlight.alert.id),m.map(ve.$.fromModel),m.map(ve.$.snapshot)),state:Se.nL.snapshot(we.Mq.snapshot,i)(u)}),N.E)),(()=>O.of(r.alertHighlight))));case M.lY.Type.cardMatchesNavigationButtonClick:const e=r.transitionTo;switch(e.kind){case"anotherAlert":return(0,a.pipe)("right"===r.direction?n.nextAlert(e.card):(0,a.pipe)(n.prevAlert(e.card),f.vx(n.anyRegisteredAlert(e.card))),m.fold((()=>N.E),(e=>O.of({alert:e,highlightIndex:0}))));case"sameAlert":return(0,a.pipe)(o.getRegistered(e.card.activeAlert.id),m.fold((()=>N.E),(()=>O.of({alert:e.card.activeAlert,highlightIndex:e.highlightIndex}))));default:return(0,g.vE)(e)}case M.lY.Type.switchToClosestByViewport:return t(u.currentLens,s,i,l);default:return N.E}})),R.U((e=>({alertHighlight:e,alertSource:E.l$.sidebar,options:{order:"lensOrder"}})))))}),e.createSendActiveAlertFeedbacksEffect=function(e,t,r,n,i){const s=e.pipe(R.U(Se.nL.getActiveAlert(t)),P.x(m.getEq(x.f7(((e,t)=>ve.$.eq.equals(e,t)&&e.patternName===t.patternName))).equals),R.U(m.filter((e=>m.isSome(n.getRegistered(e.id))&&!E.bZ.isInPremiumLens(e)))),D.w(m.fold((()=>N.E),(t=>F.y.create((()=>((0,a.pipe)(r.applyFeedback(t.id,{kind:c.PZ.LOOKED,subtype:A.J.getSubTypeFromLens(e.get().currentLens.id)},E.l$.sidebar),w.g_(i.handler("Failed to send LOOKED feedback").error,y.Q1)),()=>{m.isSome(n.getRegistered(t.id))&&(0,a.pipe)(r.applyFeedback(t.id,{kind:c.PZ.CLOSED,subtype:A.J.getSubTypeFromLens(e.get().currentLens.id)},E.l$.sidebar),w.g_(i.handler("Failed to send CLOSED feedback: ").error,y.Q1))})))))));return{id:"sendActiveAlertFeedbacksEffect",when:o.W8,what:Se.nL.Effect.Applicator.create(s.pipe(L.c(j.C)))}}}(fe||(fe={}));class Ee{constructor(e,t,r,n,i,l,u,d,p,h,v,b,x=new C.A,k={bufferTransitions:!0,showGbPrompt:!1},L=y.Q1){this._ops=e,this._navigationEvents=t,this._cardFactory=r,this._alertsService=n,this._markOnboardingAsSeen=i,this._markMuteQuotedAdviceAsDismissed=l,this._sendToUrlExperiment=d,this._getActiveItemWithAlert=h,this._checksFeedCapabilities=v,this._lensState=b,this._platformEnvironment=x,this._settings=k,this._setDocumentCitationStyle=L,this._log=I.C8.Logging.getLogger("CardsViewModelImpl",S.i.DEBUG),this._subs=new T.w.Keeper,this._flushCompleteTransition=new s.xQ,this._flushPositionAnimation=new s.xQ,this.actionEvents=new s.xQ,this.completePositionAnimation=new s.xQ,this.changePosition=new s.xQ,this._transitionBuffer=z.F(100).pipe(B.O(0),G.T(this._flushCompleteTransition)),this._positionAnimationBuffer=z.F(100).pipe(B.O(0),G.T(this._flushPositionAnimation)),this._startTransitionStateChanges=this.actionEvents.pipe(W.h(M.eI.isStartTransitionTo),R.U((e=>t=>ye.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,e.transition]]),t)))),this._completeTransitionStateChanges=this.actionEvents.pipe(W.h(M.eI.isCompleteTransitionTo),this._settings.bufferTransitions?H.f(this._transitionBuffer):R.U((e=>[e])),W.h(y.Dw),R.U((e=>t=>{const r=t.currentLens,n=this._applyCompleteVSChange(r,e.map((e=>[e.id,e.transitionId])));return this._log.isEnabled(S.i.TRACE)&&this._log.trace("batch transition complete",{events:e,diff:_.aW.diff(r.items,n.items)}),Se.nL.Prism.getLens().set(n,t)}))),this._changePositionEffect=this.changePosition.pipe(R.U((({id:e,height:t})=>r=>{const n=(0,a.pipe)(Y.l.update(r.currentLens.items,e,(e=>this._checksFeedCapabilities.changePosition(xe.s.PositionState.changeHeight(e.positionState,t))(e))),w.g_((()=>r.currentLens.items),o.yR));return ye.itemsLens.set(n,r)}))),this._transitionEndStateChanges=this.completePositionAnimation.pipe(H.f(this._positionAnimationBuffer),W.h(y.Dw),R.U((e=>t=>{const r=t.currentLens.items,n=e.map((e=>[e,!1])).reduce(((e,[t,r])=>(0,a.pipe)(Y.l.update(e,t,(e=>this._checksFeedCapabilities.changePosition(xe.s.PositionState.changeAnimationInProgress(e.positionState,r))(e))),w.g_((()=>e),o.yR))),r);return ye.itemsLens.set(n,t)}))),this._switchToNextChanges=this.actionEvents.pipe(W.h((e=>e.type===M.lY.Type.switchToNext)),R.U((()=>e=>e.patch({currentLens:(0,a.pipe)(Se.nL.hasItems(e)?this._checksFeedCapabilities.findNextAlert(e.currentLens):m.none,m.fold((()=>(0,a.pipe)(Se.nL.getActiveAlert(this._getActiveItemWithAlert)(e),m.fold((()=>{throw new g.ej("Can not switch from non-existing card")}),(t=>this._checksFeedCapabilities.release(t)(e.currentLens))))),(t=>Se.nL.hasItems(e)?this._checksFeedCapabilities.selectItemByAlert(t)(e.currentLens):e.currentLens))),switchOrder:"lensOrder",alertSource:E.l$.sidebar})))),this._dismissMuteQuotedAdvice=this.actionEvents.pipe(W.h(M.lY.isDismissMuteQuotedAdvice),$.b(this._markMuteQuotedAdviceAsDismissed),R.U((()=>e=>{const t=e.currentLens.items.filter((0,o.ls)(this._checksFeedCapabilities.hasActiveAlert,m.map((e=>e.alert)),m.exists(ve.$.isInQuotes))).keys().map((e=>[e,!1])).reduce(((e,[t])=>(0,a.pipe)(Y.l.update(e,t,this._cardFactory.hideMuteQuotedAdvice),w.g_((()=>e),o.yR))),e.currentLens.items);return ye.itemsLens.set(t,e)}))),this._changeUserInput=this.actionEvents.pipe(W.h(M.lY.isChangeUserInput),$.b((({alertId:e,userInput:t})=>{this._alertsService.changeGapValue(e,t)})),R.U((({cardId:e,userInput:t})=>r=>{const n=(0,a.pipe)(r.currentLens.items.update(e,this._checksFeedCapabilities.updateUserInput(Boolean(t)?m.some(t):m.none)),w.g_((()=>r.currentLens.items),o.yR));return ye.itemsLens.set(n,r)}))),this._shortenItDismissEdit=this.actionEvents.pipe(W.h(M.ut.isDismissEdit),R.U((({alertId:e,group:t,itemId:r})=>n=>(0,a.pipe)(this._alertsService.dismissShortenItTransformGroup(e,t),w.UI((e=>({newAlert:e,itemId:r}))),w.Zl((({newAlert:e,itemId:t})=>Y.l.update(n.currentLens.items,t,this._checksFeedCapabilities.updateWithAlerts([e])))),w.g_((e=>(this._log.error("Error updating card/alert with dismissed transform groups.",e),n)),(e=>ye.itemsLens.set(e,n))))))),this._focusChecksFeedItem=this.actionEvents.pipe(W.h(M.lY.isMiniItemClick),R.U((e=>t=>t.patch({currentLens:(0,a.pipe)(t.currentLens.items.find((t=>t.id===e.id)),m.fold((()=>(this._log.error("Can not switch from non-existing item"),t.currentLens)),(()=>(0,o.MZ)((0,a.pipe)(t.currentLens,this._checksFeedCapabilities.selectItemById(e.id)))))),switchOrder:"lensOrder",alertSource:E.l$.sidebar})))),this._collapseChecklistItem=this.actionEvents.pipe(W.h(M.lY.isChecklistItemCollapseButtonClick),R.U((()=>e=>e.patch({currentLens:Se.nL.hasItems(e)?this._checksFeedCapabilities.unselectItem()(e.currentLens):e.currentLens,switchOrder:"lensOrder",alertSource:E.l$.sidebar})))),this._toneAIChangeToneAlternative=this.actionEvents.pipe(W.h(M.lY.isToneAIChangeToneAlternativeAction),R.U((({itemId:e,alertId:t,selectedToneAlternativeIdx:r})=>(0,a.pipe)(this._alertsService.changeToneAIToneAlternative(t,r),w.UI((t=>({newAlert:t,itemId:e})))))),R.U((e=>this._updateToneAICard(e)))),this._synfonyDrilldown=this.actionEvents.pipe(W.h(M.GM.isDrilldown),R.U((({cardId:e,wordIndex:t})=>r=>(0,a.pipe)(Y.l.update(r.currentLens.items,e,(e=>{const r=e;return be.X.changeSynfonySelection((0,a.pipe)(r.synfonySelection,m.getOrElse((()=>[])),(e=>m.some(e.concat([t])))))(r)})),w.g_((()=>r),(e=>Se.nL.Prism.getLens().compose(Ce.v.Prism.items).set(e,r))))))),this._synfonyBack=this.actionEvents.pipe(W.h(M.GM.isBack),R.U((({cardId:e})=>t=>(0,a.pipe)(Y.l.update(t.currentLens.items,e,(e=>{const t=e;return be.X.changeSynfonySelection((0,a.pipe)(t.synfonySelection,m.map((e=>e.slice(0,-1)))))(t)})),w.g_((()=>t),(e=>Se.nL.Prism.getLens().compose(Ce.v.Prism.items).set(e,t))))))),this._sendToUrl=(0,a.pipe)(this._sendToUrlExperiment,m.map((e=>Object.entries(e).filter((([e])=>"handleGbPrompt"!==e||this._settings.showGbPrompt)).map((([e,t])=>[t(this.actionEvents),e]))))),this._sendFeedback=(0,o.ls)(((e,t)=>this._alertsService.applyFeedback(e,Object.assign(Object.assign({},t),{subtype:A.J.getSubTypeFromLens(this._lensState.get().currentLens.id)}),E.l$.sidebar)),w.g_(this._log.handler("error calling alert service to send a feedback").error,y.Q1)),this._showSurveyForm=new s.xQ,this._showSurveyFormEffect=(0,a.pipe)(this._showSurveyForm,R.U((e=>t=>ye.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,"survey"===e.formType?Object.assign({type:"feedback_form",formType:"survey",clockwise:!0,survey:e.survey},e.submitActionType===M.lY.Type.alertApplyFormSubmit?{submitActionType:M.lY.Type.alertApplyFormSubmit,alertApplyActionProps:e.alertApplyActionProps}:{submitActionType:M.lY.Type.alertIgnoreFormSubmit}):{type:"feedback_form",formType:"gbPrompt",clockwise:!0,gbPrompt:e.gbPrompt,alertApplyActionProps:e.alertApplyActionProps}]]),t)))),this._showMutedAlertSuccessEffect=this.actionEvents.pipe(W.h(M.lY.isMuteCategoryAction),R.U((e=>t=>ye.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,{type:"muted",clockwise:!0}]]),t)))),this._undoMutedAlertEffect=this.actionEvents.pipe(W.h(M.lY.isUndoMuteCategoryAction),R.U((e=>t=>ye.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,{type:"focused",clockwise:!0}]]),t)))),this._handleAlertIgnore=(0,o.ls)(Ae((({alertId:e,drilldownSuggestionIds:t})=>()=>this._sendFeedback(e,{kind:c.PZ.IGNORE,drilldownSuggestionIds:t})),(e=>()=>this._showSurveyForm.next(e)),this._settings.showGbPrompt),(e=>this.actionEvents.pipe(W.h(M.lY.isAlertIgnoreAction)).subscribe((t=>e(t)())))),this._handleApplyAlerts=(0,o.ls)(Ae((e=>()=>this._applyAlert(e)),(e=>()=>this._showSurveyForm.next(e)),this._settings.showGbPrompt),(e=>this.actionEvents.pipe(W.h(M.lY.isAlertApplyAction)).subscribe((t=>e(t)())))),this.hovered=this.actionEvents.pipe(W.h(M.lY.isHoverAction),$.b((()=>this._ops.flush())),V.R(((e,t)=>"hover"===t.kind?m.some(t.id):(0,a.pipe)(e,m.filter((e=>e!==t.id)))),m.none),Q.B()),this.flushTransitionTo=()=>this._flushCompleteTransition.next(),this.flushPositionAnimation=()=>this._flushPositionAnimation.next(),this._subs.push(this._handleAlertFeedbacks(),this._applyTakeawayFeedbacks(),this._sendTakeawayFeedbacks(),this._handleIgnoreFormSubmit(),this._handleApplyFormSubmit(),this._handleGbPromptDismiss(),this._handleGbPromptApply(),this._handleAlertIgnore(p),this._handleAlertResolve(),this._handleApplyAlerts(p),this._dismissAlertsBatch(),this._newFeatureSeen(),this._handleDrilldown(),this._handleSnippetsOpenExternalLink(),this._handleEssayDetectionSetAcademicDomainAndCitationStyle()),(0,a.pipe)(u,f.bw((({model:e,openSuggestionsManagement:t})=>this._subs.push(this._handleCommitMuteCategories(e),this._handleSuggestionsManagementClick(t)))))}_applyStartVSChange(e,t){return t.reduce(((e,[t,r])=>(0,a.pipe)(Y.l.update(e,t,(e=>this._checksFeedCapabilities.transitionTo(r)(e))),w.g_((()=>e),o.yR))),e)}_applyCompleteVSChange(e,t){return t.reduce(((e,[t,r])=>(0,a.pipe)(e.items.get(t),m.map((({value:e})=>e)),m.fold((()=>e),(n=>Ie.o.isAnimatable(n)&&"removed"===n.visualState.transition.type?this._checksFeedCapabilities.removeItemById(t)(e):(0,a.pipe)(Y.l.update(e.items,t,(e=>Ie.o.isAnimatable(e)&&e.visualState.transitionId===r?this._checksFeedCapabilities.completeTransition(r)(e):e)),w.g_((()=>e),(t=>Ce.v.Prism.items.set(t,e)))))))),e)}_handleSnippetsOpenExternalLink(){return this.actionEvents.pipe(W.h(M.lY.isSnippetsOpenExternalLink)).subscribe((({externalLink:e})=>this._platformEnvironment.actions.openPopup(new v.Z(e))))}_updateToneAICard(e){return t=>(0,a.pipe)(e,w.Zl((({newAlert:e,itemId:r})=>Y.l.update(t.currentLens.items,r,this._checksFeedCapabilities.updateWithAlerts([e])))),w.g_((e=>(this._log.error("Error updating card with ToneAI alert.",e),t)),(e=>Se.nL.Prism.getLens().compose(Ce.v.Prism.items).set(e,t))))}_handleAlertFeedbacks(){return this.actionEvents.pipe(W.h(M.lY.isAlertFeedbackAction)).subscribe((({alertId:e,feedbackType:t})=>this._sendFeedback(e,{kind:t})))}_applyTakeawayFeedbacks(){return this.actionEvents.pipe(W.h(M.lY.isTakeawayDetectionFeedbackAction)).subscribe((({alertId:e,type:t})=>this._alertsService.changeTakeawayFeedback(e,t===M.lY.Type.takeawayCorrectlyDetected?E.TO.correctlyDetected:t===M.lY.Type.takeawayIncorrectlyDetected?E.TO.incorrectlyDetected:(0,g.vE)(t))))}_sendTakeawayFeedbacks(){return this.actionEvents.pipe(W.h(M.lY.isTakeawayAction)).subscribe((e=>{switch(e.type){case M.lY.Type.takeawayCorrectlyDetected:return e.isLikelyToBeRead?this._sendFeedback(e.alertId,{kind:c.PZ.ACKNOWLEDGED,text:e.takeawayText}):this._sendFeedback(e.alertId,{kind:c.PZ.ACCEPTED,replacementText:e.takeawayText});case M.lY.Type.takeawayIncorrectlyDetected:return this._sendFeedback(e.alertId,{kind:c.PZ.IGNORE});case M.lY.Type.takeawayDismiss:return this._sendFeedback(e.alertId,{kind:c.PZ.IGNORE,pnameQualifier:e.isLikelyToBeRead?c.N_.likelyToBeReadTakeaway:c.N_.unlikelyToBeReadTakeaway});case M.lY.Type.takeawayResolve:return this._sendFeedback(e.alertId,{kind:c.PZ.ACKNOWLEDGED,pnameQualifier:e.isLikelyToBeRead?c.N_.likelyToBeReadTakeaway:c.N_.unlikelyToBeReadTakeaway});default:(0,g.vE)(e)}}))}_handleEssayDetectionSetAcademicDomainAndCitationStyle(){return this.actionEvents.pipe(W.h(M.Wh.isSetAcademicDomainAndCitationStyleAction)).subscribe((({citationStyle:e})=>{this._setDocumentCitationStyle(e)}))}_handleAlertResolve(){return this.actionEvents.pipe(W.h(M.lY.isAlertResolveAction)).subscribe((({alertId:e})=>this._sendFeedback(e,{kind:c.PZ.ACKNOWLEDGED})))}_handleIgnoreFormSubmit(){return this.actionEvents.pipe(W.h(M.lY.isAlertIgnoreFeedbackFormSubmit)).subscribe((({alertId:e,reason:t})=>{this._sendFeedback(e,{kind:c.PZ.IGNORE,reason:t})}))}_handleApplyFormSubmit(){return this.actionEvents.pipe(W.h(M.lY.isAlertApplyFeedbackFormSubmit)).subscribe((e=>{this._applyAlert(Object.assign(Object.assign({},e.alertApplyActionProps),{reason:e.reason})),e.alertApplyActionProps.actionsToDispatchAfterSurvey&&e.alertApplyActionProps.actionsToDispatchAfterSurvey.forEach((e=>this.actionEvents.next(e)))}))}_handleGbPromptDismiss(){return this.actionEvents.pipe(W.h(M.lY.isGbPromptDismiss)).subscribe((e=>this._applyAlert(Object.assign(Object.assign({},e.alertApplyActionProps),{gbPrompt:{feedback:c.Kd.DISMISSED,source:e.source,target:e.target,description:e.description}}))))}_handleGbPromptApply(){return this.actionEvents.pipe(W.h(M.lY.isGbPromptApply)).subscribe((e=>this._applyAlert(Object.assign(Object.assign({},e.alertApplyActionProps),{gbPrompt:{feedback:c.Kd.ACCEPTED,source:e.source,target:e.target,description:e.description}}))))}_handleCommitMuteCategories(e){return this.actionEvents.pipe(W.h(M.lY.isMutedAlertCardDismissedAction)).subscribe((t=>(0,a.pipe)(e.muteCategories([t.categoryId]),w.g_(this._log.handler("error calling categories model to commit muted category").error,y.Q1))))}_handleSuggestionsManagementClick(e){return this.actionEvents.pipe(W.h(M.lY.isMutedAlertSuggestionsManagementClick)).subscribe(e)}_applyAlert(e){return(0,a.pipe)(this._alertsService.apply(e.alertId,{alternativeIndex:e.alternativeIndex,source:E.l$.sidebar,feedbackSubtype:A.J.getSubTypeFromLens(this._lensState.get().currentLens.id),drilldownSuggestionIds:e.drilldownSuggestionIds,reason:e.reason,gbPrompt:e.gbPrompt}),w.g_(this._log.handler("error calling alert service to apply an alert").error,y.Q1))}_handleDrilldown(){return this.actionEvents.pipe(W.h(M.GM.isDrilldown)).subscribe((e=>this._sendFeedback(e.alertId,{kind:c.P2.DRILLDOWN,drilldownSuggestionIds:e.drilldownSuggestionIds,alternativeIndex:e.alternativeId})))}_dismissAlertsBatch(){return this.actionEvents.pipe(W.h(M.FG.isDismissAlertsBatchAction)).subscribe((e=>(0,a.pipe)(this._alertsService.dismissBatch(e.alerts,A.J.getSubTypeFromLens(this._lensState.get().currentLens.id)),w.g_(this._log.handler("error calling alert service to dismiss alerts batch").error,y.Q1))))}_newFeatureSeen(){return this.actionEvents.pipe(W.h(M.lY.isOnboardingClose)).subscribe((e=>(0,a.pipe)(this._markOnboardingAsSeen(e.value))))}getApplicatorEffects(){return(0,a.pipe)([[this._startTransitionStateChanges,"startTransitionStateChanges"],[this._completeTransitionStateChanges,"completeTransitionStateChanges"],[this._changePositionEffect,"changePositionEffect"],[this._transitionEndStateChanges,"transitionEndStateChanges"],[this._switchToNextChanges,"switchToNextChanges"],[this._dismissMuteQuotedAdvice,"dismissMuteQuotedAdvice"],[this._changeUserInput,"changeUserInput"],[this._toneAIChangeToneAlternative,"toneAIChangeToneAlternative"],[this._synfonyDrilldown,"synfonyDrilldown"],[this._synfonyBack,"synfonyBack"],[this._focusChecksFeedItem,"focusChecksFeedItem"],[this._collapseChecklistItem,"collapseChecklistItem"],[this._shortenItDismissEdit,"shortenItDismissEdit"],[this.actionEvents.pipe(W.h(M.lY.isNavigation),$.b(this._navigationEvents),L.c(N.E)),"navigationEvents"],...(0,a.pipe)(this._sendToUrl,m.getOrElse((0,o.a9)([]))),[this._showSurveyFormEffect,"showIgnoreFormEffect"],[this._showMutedAlertSuccessEffect,"showMutedAlertSuccessEffect"],[this._undoMutedAlertEffect,"undoMutedAlertEffect"]],b.UI((([e,t])=>({id:`cardsViewModel.effects.${t}`,when:k.R.isWithAlertsId,what:Se.nL.Effect.Applicator.create(e)}))))}dispose(){this._subs.dispose()}}!function(e){e.itemsLens=Se.nL.Prism.getLens().compose(Ce.v.Prism.items);e.Mock=class{constructor(){this.animate=l.h.create(!0),this.clockwise=l.h.create(!0),this.toggleAnimations=()=>this.animate.modify((e=>!e)),this.completePositionAnimation=new s.xQ,this.actionEvents=new s.xQ,this.flushTransitionTo=y.Q1,this.sideEffect={id:"cardsViewModelMock",when:k.R.isWithAlertsId,what:Se.nL.Effect.Applicator.create(N.E)},this.changePosition=new s.xQ,this.dispose=y.Q1}},e.Experiments=n}(ye||(ye={}));const Ae=(e,t,r)=>n=>o=>(0,a.pipe)(ke(o,r),i.of,p.chain((e=>(0,a.pipe)(n,i.UI((t=>t?m.none:m.some(e)))))),p.fold((()=>e(o)),(e=>t(e)))),ke=(e,t)=>M.lY.isAlertApplyAction(e)?Me(e,t):Te(e),Me=(e,t)=>(0,a.pipe)(e.eligibleForGbPrompt,m.filter((0,o.a9)(t)),m.map((t=>({id:e.id,formType:"gbPrompt",alertApplyActionProps:e,gbPrompt:t}))),f.vx((0,a.pipe)(e.eligibleForSurvey,m.map((t=>({id:e.id,formType:"survey",submitActionType:M.lY.Type.alertApplyFormSubmit,alertApplyActionProps:e,survey:t})))))),Te=e=>(0,a.pipe)(e.eligibleForSurvey,m.map((t=>({id:e.id,formType:"survey",submitActionType:M.lY.Type.alertIgnoreFormSubmit,survey:t}))))},48052:(e,t,r)=>{r.d(t,{$y:()=>Y});var n,i=r(71249),o=r(57050),a=r(40327),s=r(36991),l=r(67394),c=r(5114),u=r(95195),d=r(26328),p=r(40018),m=r(22232),h=r(84966),g=r(95574),f=r(98637);function y(e,{text:t,ops:r}){r.reduce(((t,r,n)=>l.JU.isInsertString(r)?(e.insertString(r.insert,r,n),t):l.JU.isInsertGap(r)?(e.insertGap("",r,n),t):l.JU.isInsert(r)?t:l.JU.isDelete(r)?(e.remove(t.slice(0,r.delete),r,n),t.slice(r.delete)):l.JU.isRetain(r)?(e.retain(t.slice(0,r.retain),r,n),t.slice(r.retain)):(0,m.vE)(r)),t)}function v(e){return 0===e.replace(/ /g,"").length}function b(e,t){(0,a.pipe)(e,i.Z$,c.fold((()=>{v(t.text)||e.push(t)}),(r=>{r.type===t.type?r.text+=t.text:e.push(t)})))}function w(e,t){return(0,a.pipe)(g.vM((()=>(0,a.pipe)(e,d.UI((r=>{const n=[];return y({insertString(t,{type:r}){if(r===l.JU.Type.Main)throw new U("Remove transform contains main insert",e)},insertGap(){throw new U("Remove transform contains gap insert",e)},retain(e,{type:t}){l.JU.isOptionalType(t)||b(n,{type:f.GP.Text,text:e})},remove(e,{type:r}){b(n,{type:r!==l.JU.Type.Main||v(e)&&t?f.GP.Text:f.GP.Delete,text:e})}},r),n})),i.xH))),u.tS((0,o.ls)(u.DT((e=>e.length>0),(()=>new U("Remove transform contains no data",e))),u.UI((e=>({type:n.Type.Remove,remove:e}))))))}function x(e,t){return(0,a.pipe)(g.vM((()=>(0,a.pipe)(e,d.UI((r=>{const n=[];return y({insertString(t,{type:r}){if(r===l.JU.Type.Main)throw new U("Multi-remove transform contains main insert",e)},insertGap(){throw new U("Multi-remove transform contains gap insert",e)},retain(e,{type:t}){l.JU.isOptionalType(t)||b(n,{type:f.GP.Text,text:e})},remove(e,{type:r}){b(n,{type:r!==l.JU.Type.Main||v(e)&&t?f.GP.Text:f.GP.Delete,text:e})}},r),n}))))),u.tS((0,o.ls)(u.DT((e=>e.length>=2&&e.every((e=>e.length>=2))),(()=>new U("Incomplete multi-remove",e))),u.UI((e=>({type:n.Type.RemoveOr,removes:e}))))))}function I(e){return(0,a.pipe)(g.vM((()=>(0,a.pipe)(e,d.UI((t=>{const r=[];return y({insertString(e,{type:t}){b(r,{type:l.JU.isOptionalType(t)?f.GP.Text:f.GP.Insert,text:e})},insertGap(){throw new U("Insert transform contains gap insert",e)},retain(e,{type:t}){(!l.JU.isOptionalType(t)||r.length>0)&&b(r,{type:f.GP.Text,text:e})},remove(t,{type:r}){if(r===l.JU.Type.Main)throw new U("Insert transform contains main delete",e)}},t),r}))))),u.tS((0,o.ls)(d.nI,u.Yo((()=>new U("Incomplete insert",e))),u.UI((e=>({type:n.Type.Insert,inserts:e}))))))}function S(e){const{substitutions:t,longestSubstitution:r,inserts:o}=e.reduce(((e,[t,r])=>{const n=t.map((e=>e.text)).join("");return e.substitutions.push(n),e.inserts.push(r),n.length>e.longestSubstitution.length&&(e.longestSubstitution=n),e}),{substitutions:[],inserts:[],longestSubstitution:""}),s=(0,a.pipe)(t,d.UI((e=>r.split(e).join(""))));return(0,a.pipe)(i.yL(o,s,((e,t)=>(t&&e.push({type:f.GP.Text,text:t}),e))),d.nI,u.Yo((()=>new Error("Substitution processing error"))),u.UI((e=>({type:n.Type.Substitution,remove:[{type:f.GP.Delete,text:r}],inserts:e}))))}function C(e,t){return(0,a.pipe)(E(e),u.tS((r=>(0,a.pipe)(g.vM((()=>{(0,m.kG)(t.length>0,"Drilldown transform - empty drilldown tree");const e=(0,a.pipe)(t,d.UI((function e([t,n]){return(0,m.kG)(void 0!==r.inserts[t],"Drilldown transform - alternative insert not found"),{alternativeId:t,label:r.inserts[t],subLabels:n.map(e)}})));return{inserts:e,remove:r.remove,type:n.Type.Drilldown}})),u.Vn(U.fromError(e))))))}function E(e){return(0,a.pipe)(g.vM((()=>(0,a.pipe)(e,d.UI((t=>{const r=[[],[]];return y({insertString(e){b(r[1],{type:f.GP.Insert,text:"\n"===e?"¶ ":e})},insertGap(){throw new U("Substitution transform contains gap insert",e)},remove(e){b(r[0],{type:f.GP.Delete,text:e})},retain(e,{type:t}){if(!l.JU.isOptionalType(t)||0!==r[0].length){const t={type:f.GP.Text,text:e};r[0].push(t),r[1].push(t)}}},t),(0,m.kG)(r[0].length>0,"Substituted part is empty"),(0,m.kG)(r[1].length>0,"Inserts are empty"),r}))))),u.tS(S),u.Vn(U.fromError(e)))}function A(e){if(!("list"in e))return c.none;switch(e.list){case"bullet":case"dashed":case"ordered":return c.some({kind:e.list,indent:"number"==typeof e.indent&&Number.isInteger(e.indent)?e.indent:0});default:return c.none}}function k(e){return(0,a.pipe)(e,u.DT((e=>1===e.length),(()=>new U("Expected citation transform to have 1 alternative",e))),u.UI(d.YM),u.tS(u.DT((e=>e.isCitation),(()=>new U("Expected citation to have isCitation set to true",e)))),u.tS(D),u.UI((e=>({ops:e,type:n.Type.Citation}))))}function M(e){return(0,a.pipe)(e,u.DT((e=>1===e.length),(()=>new U("Expected full-sentence transform to have 1 alternative",e))),u.UI((0,o.ls)(d.YM,(t=>{let r={blockStart:0,ops:[],kind:f._k.PlainText};return y({insertString(e,t){const n=e.split("\n");if(1===n.length)r.ops.push({type:f.GP.Insert,text:e,shouldBeCollapsed:!1});else{const e=(0,a.pipe)(t.attributes,A,c.fold((()=>o.Q1),(({kind:e,indent:t})=>()=>{r.ops.splice(r.blockStart,1,{type:f.GP.List,kind:e,indent:t}),r={kind:f._k.WithFormatting,ops:r.ops,blockStart:r.blockStart}})));for(let t=0,i=n.length-1;t<=i;t++){const o=n[t];o&&r.ops.push({type:f.GP.Insert,text:o}),t<i&&(e(),r.blockStart=r.ops.length,r.ops.push({type:f.GP.Insert,text:"\n"}))}}},insertGap(){throw new U("Full sentence transform contains gap insert",e)},retain(e,t){r.ops.push({type:f.GP.Text,text:e,shouldBeCollapsed:T(t.type,e)})},remove(e,t){r.ops.push({type:f.GP.Delete,text:e,shouldBeCollapsed:T(t.type,e)})}},t),r}))),u.tS((0,o.ls)(c.fromPredicate((e=>e.ops.length>0)),u.Yo((()=>new U("Got empty full sentence transform",e))),u.UI((({ops:e,kind:t})=>({type:n.Type.FullSentence,ops:e,kind:t}))))))}!function(e){let t;!function(e){e[e.Remove=0]="Remove",e[e.RemoveOr=1]="RemoveOr",e[e.Insert=2]="Insert",e[e.Substitution=3]="Substitution",e[e.Drilldown=4]="Drilldown",e[e.FullSentence=5]="FullSentence",e[e.OneGap=6]="OneGap",e[e.ShortenIt=7]="ShortenIt",e[e.ToneAI=8]="ToneAI",e[e.Citation=9]="Citation"}(t=e.Type||(e.Type={})),function(e){e.parse=function(t,r){const n=t[0];if(n.isFullSentence)return e.FullSentence;if(c.isSome(r.drilldown))return e.Drilldown;if(n.isCitation)return e.Citation;if(n.isShortenIt)return e.ShortenIt;if(n.isToneAI)return e.ToneAI;switch(n.type){case l.r3.Type.Insert:return e.Insert;case l.r3.Type.Remove:return t.length>1?e.RemoveOr:e.Remove;case l.r3.Type.Substitution:return n.ops.find(l.JU.isInsertGap)?e.OneGap:e.Substitution;default:return(0,m.vE)(n.type)}}}(t=e.Type||(e.Type={})),e.create=function(t){return r=>{const n=e.Type.parse(r,t);switch(n){case e.Type.Remove:return w(r,t.ignoreWhitespaceRemoves);case e.Type.RemoveOr:return x(r,t.ignoreWhitespaceRemoves);case e.Type.Insert:return I(r);case e.Type.Substitution:return E(r);case e.Type.Drilldown:return C(r,(0,a.pipe)(t.drilldown,c.getOrElse((()=>h.H5.empty))));case e.Type.FullSentence:return M(r);case e.Type.OneGap:return _(r);case e.Type.ShortenIt:return L(r);case e.Type.ToneAI:return N(r);case e.Type.Citation:return k(r);default:return(0,m.vE)(n)}}}}(n||(n={}));const T=(e,t)=>e===l.JU.Type.Optional&&t.length>3;function _(e){return(0,a.pipe)(g.vM((()=>((0,m.kG)(1===e.length,"One gap transform does not contain exactly one alternative"),(0,a.pipe)(e,d.YM,(e=>{const t=[],r=[];let n=!1;return y({insertString(e,{type:i}){b(n?r:t,{type:l.JU.isOptionalType(i)?f.GP.Text:f.GP.Insert,text:e})},insertGap(){(0,m.kG)(!n,"One gap transform does not contain exactly one gap insert"),n=!0},retain(e,{type:i}){const o=n?r:t;(!l.JU.isOptionalType(i)||o.length>0)&&b(o,{type:f.GP.Text,text:e})},remove:o.Q1},e),(0,m.kG)(n,"One gap transform does not contain exactly one gap insert"),(0,m.kG)(t.length>0||r.length>0,"One gap transform does not contain at least one text insert"),{left:t,right:r}}))))),u.Pd(U.fromError(e),(({left:e,right:t})=>({type:n.Type.OneGap,left:e,right:t}))))}function L(e){return(0,a.pipe)(e,u.DT((e=>1===e.length),(()=>new U("Expected shorten-it transform to have 1 alternative",e))),u.tS(d.fw(u.wE)(O)),u.UI(d.YM),u.UI((e=>({type:n.Type.ShortenIt,ops:e}))))}function N(e){return(0,a.pipe)(g.vM((()=>(0,a.pipe)(e,d.UI((t=>{const r=[];return y({insertString(e){b(r,{type:f.GP.Insert,text:e})},insertGap(){throw new U("ToneAI transform should not include gap insert",e)},retain(e){b(r,{type:f.GP.Text,text:e})},remove(e){b(r,{type:f.GP.Delete,text:e})}},t),r}))))),u.tS((0,o.ls)(d.nI,u.Yo((()=>new U("Incomplete ToneAI transform",e))),u.UI((e=>({type:n.Type.ToneAI,transformParts:e}))))))}function O(e){const t=[];return y({insertString(e,{group:r}){t.push({type:f.GP.Insert,text:e,group:r})},insertGap(){throw new U("ShortenIt transform contains gap insert",[e])},retain(e,{group:r}){t.push({type:f.GP.Text,text:e,group:r})},remove(e,{group:r}){t.push({type:f.GP.Delete,text:e,shouldBeCollapsed:!0,group:r})}},e),(0,a.pipe)(t,u.DT((e=>e.length>0),(()=>new U("Got empty ShortenIt transform",[e]))))}function D(e){const t=[];return y({insertString(e){t.push({type:f.GP.Insert,text:e})},insertGap(){throw new U("Citation transform contains gap insert",[e])},retain(e){t.push({type:f.GP.Text,text:e})},remove(e){t.push({type:f.GP.Delete,text:e})}},e),(0,a.pipe)(t,u.DT((e=>e.length>0),(()=>new U("Got empty Citation transform",[e]))))}class U extends m.sH{constructor(e,t){super(e),this.alternatives=t}static fromError(e){return t=>{const r=new U(t.message,e);return r.stack=t.stack,r}}toString(){return`Hydration error: ${this.message}\n  ops: ${this.alternatives.map((e=>e.ops.map(l.JU.anonymize)))}`}}var R=r(8125),P=r(81531);const F=(e,t)=>{switch(e.kind){case"replacement":return function(e,t){(0,m.kG)((0,R.Dw)(e),"transforms should have at least one element");const[r]=e;return j(r)>-1?f.nV.create(z(r),e.map(B),t,!0):f.zE.create(e,t)}(e.content.map((e=>[{type:f.GP.Insert,text:e}])),t);case"transform":return function(e,t){(0,m.kG)((0,R.Dw)(e),"transforms should have at least one element");const[r]=e;return j(r)>-1?f.nV.create(z(r),e.map(B),t):function(e){return 2===e.length&&W(e)}(e)?f.fi.create(e[0],e[1],t):W(e)?f.zE.create(e,t):f.n6.create(e,t)}(e.content.map(V),t);default:return(0,m.vE)(e.kind)}};function j(e){return e.findIndex((e=>"arrow"===e.type))}function z(e){return e.slice(0,j(e))}function B(e){return e.slice(j(e)+1)}function G(e){return e.every((e=>"delete"!==e.type))}function W(e){return e.every(G)}function H(e,t){return{re:new RegExp(`^(${e})([\\s\\S]*)$`),createResult:t}}const $=[H("(?:\\<span class='gr_grammar_del'\\>([\\S\\s]*?)\\</span\\>)",(e=>({type:f.GP.Delete,text:e[2]}))),H("(?:\\<span class='gr_grammar_ins'\\>([\\S\\s]*?)\\</span\\>)",(e=>({type:f.GP.Insert,text:e[2]}))),H("(→)",(e=>({type:f.GP.Arrow}))),H("([^<>→]+)",(e=>({type:f.GP.Text,text:e[1]})))];function V(e){function t(e){for(const t of $){const r=e.match(t.re);if(null!==r)return[t.createResult(r),r[r.length-1]]}}function r(t){let r=["<span class='gr_grammar_del'>","<span class='gr_grammar_ins'>","→"].map((e=>t.indexOf(e)));if(r.findIndex((e=>0===e))>0)throw new Error(`Couldn't parse transform: ${e}`);if(r=r.filter((e=>e>0)),(0,R.Dw)(r)){const e=Math.min(...r);return[{type:f.GP.Text,text:t.substring(0,e)},t.substring(e)]}return[{type:f.GP.Text,text:t},""]}const n=[];let i,o=e,a=!1,s=0;for(;(0,R.Dw)(o);){const e=t(o);void 0===e&&(a=!0);const[l,c]=e||r(o);i&&i.type===f.GP.Text&&l.type===f.GP.Text?i.text+=l.text:(i&&i.type===f.GP.Delete&&l.type===f.GP.Insert&&(n.push({type:f.GP.Arrow}),s++),n.push(l)),l.type===f.GP.Arrow&&s++,i=n[n.length-1],o=c}return(a||!(0,R.Dw)(n)||s>1)&&P.C8.Logging.getLogger("model.editor.alert_replacement").warn("Bad parsing of transform",{transformHtml:e,transformPartCount:n.length,arrowCount:s}),n}const Q={ignoreWhitespaceRemoves:!0},Y=(0,o.ls)((function(e,t=Q){return r=>(0,a.pipe)(r.alternatives,Z(e,{isFullSentence:p.eT.isFullSentence(r.cardType),isShortenIt:p.eT.isShortenIt(r.cardType),isToneAI:p.eT.isToneAI(r.cardType),isCitation:p.eT.isCitation(r.cardType)}),u.tS(n.create(Object.assign(Object.assign({},t),{drilldown:r.drilldown}))))}),(e=>t=>(0,a.pipe)(t.content,u.g_((e=>u.F2(F(e,t.todo))),(0,o.ls)(e,u.Pd((e=>({kind:"default",error:e})),(e=>function(e,t){switch(e.type){case n.Type.Drilldown:return f.ey.create(e.remove,e.inserts,t);case n.Type.Substitution:return f.nV.create(e.remove,e.inserts,t);case n.Type.Insert:return 2===e.inserts.length?f.fi.create(e.inserts[0],e.inserts[1],t):f.zE.create(e.inserts,t);case n.Type.Remove:return f.n6.create([e.remove],t);case n.Type.RemoveOr:return f.fz.create(e.removes,t);case n.Type.FullSentence:return function(e,t){switch(e.kind){case f._k.WithFormatting:return f.i3.createWithFormatting(e.ops,t);case f._k.PlainText:return f.i3.createPlainText(e.ops,t);default:return(0,m.vE)(e)}}(e,t);case n.Type.Citation:return function(e,t){return{type:f.b$.Type.Citation,tooltipText:t,labels:e.ops}}(e,t);case n.Type.OneGap:return f.G7.create(e,t);case n.Type.ShortenIt:return function(e,t){return{type:f.b$.Type.ShortenIt,tooltipText:t,labels:e.ops}}(e,t);case n.Type.ToneAI:return function(e,t){return{type:f.b$.Type.ToneAI,tooltipText:t,labels:e.transformParts}}(e,t);default:return(0,m.vE)(e)}}(e,t.todo))))))));function Z(e,t){const r=(0,o.ls)(e,(e=>e.delta.reduce(((e,t)=>s.s.isInsertString(t)?e+t.insert:e),"")));return(0,o.ls)(function(e,{isFullSentence:t,isShortenIt:r,isToneAI:n,isCitation:o}){return s=>(0,a.pipe)(s,i.DZ((i=>(0,a.pipe)(i.type,c.map((a=>{if(l.r3.hasOptionalContext(i.ops)){const[s,...c]=i.ops,u=l.JU.length(s);return{text:e(u,i.lengthAffected-u),ops:c,type:a,isFullSentence:t,isShortenIt:r,isToneAI:n,isCitation:o}}return{text:e(0,i.lengthAffected),ops:i.ops,type:a,isFullSentence:t,isShortenIt:r,isToneAI:n,isCitation:o}}))))),d.nI)}(r,t),u.Yo((()=>new Error("Alternative array is empty"))))}},83167:(e,t,r)=>{r.d(t,{Dv:()=>_,Py:()=>U,VC:()=>L,u0:()=>N,vM:()=>D});var n=r(35214),i=r(57050),o=r(40327),a=r(38983),s=r(5114),l=r(22232),c=r(8125),u=r(83078),d=r(95195),p=r(81531),m=r(40018),h=r(66896),g=r(16118),f=r(50628),y=r(77176),v=r(93508),b=r(85985),w=r(66310),x=r(19751),I=r(9922),S=r(24209),C=r(2834),E=r(98403),A=r(41398),k=r(35416),M=r(25975),T=r(73841);const _=(e,t,r,n=(()=>s.none))=>i=>{if(!e(i))return t(i);const{currentLens:a}=i;return a.kind===k._L.abstract?s.none:(0,o.pipe)(s.fromPredicate(k.nL.hasItems)(i),s.chain((e=>r.findNextAlert(e.currentLens))),s.alt((()=>n(i))),s.map(T.l.toLensAlert))},L=(e,t,r,n,i=M.v.WithSuccess.State.isInGlobalSuccess(n),a=(()=>!0))=>l=>{const{currentLens:c}=l;return c.kind===k._L.abstract?s.none:c.kind===k._L.persistent?(0,o.pipe)(s.fromPredicate(k.nL.hasItems)(l),s.chain((e=>n.getActiveAlert(e.currentLens))),s.fold((()=>k.nL.hasItems(l)?n.findNextAlert(l.currentLens):s.none),(t=>e.findNextAlertInTextByLens(t,c.id,M.v.WithPriority.nonPriorityAlertsVisible(l)))),s.alt((()=>a()&&(i(l)||h.R.isOutcomeId(l.currentLens.id)&&e.hasZeroFreeAlerts(r))?e.findPremiumAlert():s.none)),s.map(T.l.toLensAlert)):(0,o.pipe)((i=>{const a=s.fromPredicate(k.nL.hasItems)(i);return(0,o.pipe)(a,s.chain((e=>n.findNextAlert(e.currentLens))),s.map(T.l.toLensAlert),s.alt((()=>(0,o.pipe)(a,s.chain((e=>n.getActiveAlert(e.currentLens))),s.fold((()=>t(m.bZ.isRegisteredApplicableAlert,"cursor")),(t=>e.findNextAlertInText(t,m.bZ.isApplicableAlert))),s.map((({alert:e,highlightIndex:t})=>({alert:e,highlightIndex:t,lensId:r.get()})))))))})(l),s.alt((()=>(0,o.pipe)(e.findPremiumAlert(),s.map(T.l.toLensAlert)))))};function N(e,t){return(r,n)=>t.findClosestAlertHighlight(e(n),r)}const O=e=>e.pipe(g.G(),f.P((([e,t])=>"idle"!==e&&"idle"===t)),y.U((()=>{})));class D{constructor(e,t){this._subs=new I.w.Keeper,this.firstOpeningOfDocumentWithAlerts=a.h.create(!1);const r=O(e),n=(e=>(0,o.pipe)(e,b.h((e=>k.nL.hasCards(e)&&s.isSome(k.In.getActiveItem(e.currentLens)))),y.U((()=>{}))))(t);this._subs.push((0,o.pipe)(t,f.P((e=>k.nL.hasCards(e))),w.w((()=>(0,o.pipe)(S.T(n,r),y.U(i.jv),v.O(!0)))),C.b(E.wW(this.firstOpeningOfDocumentWithAlerts))).subscribe())}dispose(){this._subs.dispose()}}var U;!function(e){const t=(0,c.HP)(p.C8.Logging.getLogger);e.focusFirstCardAfterBigCheck=(e,r,n,i,a)=>{const l=O(r),c=r.pipe(v.O("idle"),g.G(),f.P((([e,t])=>"idle"===t)),b.h((([e])=>"full"===e)),y.U((()=>{})));const u=((e,t)=>{const r=O(e);return t.bigPaste.pipe(w.w((()=>r)),y.U((()=>{})),x.shareReplay({bufferSize:1,refCount:!0}))})(r,i);return(0,o.pipe)(S.T(l,c,u),A.M(e,a,n),b.h((([e,t,r,n])=>n&&!r&&k.nL.hasCards(t)&&s.isNone(k.In.getActiveItem(t.currentLens)))),y.U((()=>k.nL.Effect.FocusBehavior.focusFirst)),C.b((e=>t("AutoFocus.sideEffects.focusFirstCardAfterBigCheck").trace("emit: ",e))))},e.getSideEffect=(e,t)=>{const r=(0,o.pipe)(e,y.U((e=>t=>r=>{switch(t.kind){case k.nL.Effect.FocusBehaviorType.noFocus:return r;case k.nL.Effect.FocusBehaviorType.unFocus:return k.nL.Prism.getLensWithItems().modify(e.unselectItem(),r);case k.nL.Effect.FocusBehaviorType.focusFirst:return(0,o.pipe)(e.findFirstAlert(r.currentLens),s.fold((()=>r),(t=>k.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t),r))));case k.nL.Effect.FocusBehaviorType.focusNext:return(0,o.pipe)(e.findNextAlert(r.currentLens),s.fold((()=>r),(t=>k.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t),r))));case k.nL.Effect.FocusBehaviorType.focusAlert:return k.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t.alertHighlight),r);default:(0,l.vE)(t)}})(t)));return{id:"autoFocusEffect",when:h.R.isWithAlertsId,what:k.nL.Effect.ItemsApplicator.create(r)}},e.whenFirstOpeningDocumentWithAlerts=e=>()=>e.firstOpeningOfDocumentWithAlerts.get(),e.whenShouldVerifyCurrentLens=(e,r)=>n=>{const i="AutoFocus.stateValidator.whenShouldVerifyCurrentLens";return!(!k.nL.hasItems(n)||!r.shouldVerify(n.currentLens))&&((0,o.pipe)(k.nL.getActiveAlert(e)(n),s.filter(m.bZ.isInDuplicatedState),s.fold((()=>t(i).debug("Current alert removed, should verify current lens...")),(e=>t(i).info("Current alert removed as it's a duplicate, should verify current lens...",e.toString())))),!0)},e.whenNoActiveCard=e=>e.currentLens.items.size>0&&s.isNone(k.In.getActiveItem(e.currentLens)),e.behaviorToEffect=e=>r=>n=>(0,o.pipe)(r(n)?e(n):s.none,u.bw((e=>t("AutoFocus.stateValidator").debug(`'behavior triggered: ${e.kind}`)))),e.getDefaultBehavior=(t,r)=>(0,o.pipe)([(0,o.pipe)(e.whenShouldVerifyCurrentLens(t,r),e.behaviorToEffect((()=>s.some(k.nL.Effect.FocusBehavior.focusNext))))],(0,n.fold)((0,n.getFunctionMonoid)(s.getFirstMonoid())())),e.getAlwaysFocusBehavior=(t,r)=>(0,o.pipe)([(0,o.pipe)((0,c.Kg)(e.whenNoActiveCard,e.whenShouldVerifyCurrentLens(t,r)),e.behaviorToEffect((()=>s.some(k.nL.Effect.FocusBehavior.focusNext))))],(0,n.fold)((0,n.getFunctionMonoid)(s.getFirstMonoid())())),e.getFocusFromCacheBehavior=(t,r,a,l,u,d)=>(0,o.pipe)([(0,o.pipe)(e.whenShouldVerifyCurrentLens(l,u),e.behaviorToEffect((()=>s.some(k.nL.Effect.FocusBehavior.focusNext)))),(0,o.pipe)((0,c.W9)((()=>r.get()),(0,c.W9)((0,c.W9)((0,c.W9)(e.whenFirstOpeningDocumentWithAlerts(a),(()=>t)),e.whenNoActiveCard),(0,o.pipe)(d,s.map((e=>(0,i.ff)(e.willShowBulkAccept))),s.getOrElse((()=>i.W8))))),e.behaviorToEffect((()=>s.some(k.nL.Effect.FocusBehavior.focusFirst))))],(0,n.fold)((0,n.getFunctionMonoid)(s.getFirstMonoid())())),e.getFirstApiAlignmentOverride=function(){const e=a.h.create(!0);return(t,r)=>{let n=r;return e.get()&&r===m.l$.api&&(n=m.l$.text),e.set(!1),n}},e.getShouldAutoFocus=(e,t,r)=>n=>e.get()&&(0,o.pipe)(n,k.nL.getActiveAlert(r),s.chain((({id:e})=>t.getById(e))),s.filter((0,c.Kg)((e=>"APPLIED"===e.state.type&&"ByCard"===e.state.method),m.bZ.isDuplicated,m.bZ.isCapiDone)),s.isSome),e.getShouldAutoFocusSDUI=()=>e=>(0,o.pipe)(e,k.nL.getLens,s.chain(s.fromPredicate((e=>e.items.size>0))),s.isSome),e.getStateTransformer=(e,r,n,i,a,c,u)=>({state:p,metadata:m})=>{const h=t("AutoFocus.stateTransformer");if(!k.nL.hasCards(p)||!k.nL.hasItems(p))return h.trace("state has no items, returning original state"),d.t$({state:p,metadata:m});const g=e(p);if(h.trace("effect: ",{state:p,metadata:m,effect:g}),s.isNone(g))return h.trace("no effect selected, returning original state"),d.t$({state:p,metadata:m});if(c(g.value),g.value.kind===k.nL.Effect.FocusBehaviorType.unFocus||g.value.kind===k.nL.Effect.FocusBehaviorType.noFocus)return d.t$({state:k.nL.Prism.getLensWithItems().modify(i.unselectItem(),p),metadata:m});const f=a(p);return h.trace("shouldAutoFocus",{alertSource:p.alertSource,shouldAutoFocus:f}),(0,o.pipe)(g,s.chain((e=>{switch(e.kind){case k.nL.Effect.FocusBehaviorType.noFocus:case k.nL.Effect.FocusBehaviorType.unFocus:return s.none;case k.nL.Effect.FocusBehaviorType.focusFirst:return(0,o.pipe)(i.findFirstAlert(p.currentLens),s.map((e=>Object.assign(Object.assign({},e),{lensId:p.currentLens.id}))));case k.nL.Effect.FocusBehaviorType.focusNext:return r(p);case k.nL.Effect.FocusBehaviorType.focusAlert:return s.some(Object.assign(Object.assign({},e.alertHighlight),{lensId:p.currentLens.id}));default:(0,l.vE)(e)}})),s.map((e=>((0,l.kG)(s.isSome(n.getRegistered(e.alert.id)),"lens alert should be in registered state",(()=>e.alert.toString())),e))),s.fold((()=>(h.trace("no alert selected, returning original state"),p.currentLens.kind===k._L.active?d.F2(d.F2({lensId:u.get(),alertSource:p.alertSource,options:{order:p.switchOrder,toFocus:k.nL.Effect.FocusBehavior.noFocus}})):d.t$({state:p,metadata:m}))),(({alert:e,highlightIndex:t,lensId:r})=>{if(h.trace("selected alert to focus",e),p.currentLens.meta.filter(e)){if(f){h.trace("shouldAutoFocus: true, selecting alert");const r={alert:e,highlightIndex:t},n=k.nL.Prism.getLensWithItems().modify(i.selectItemByAlert(r),p);return d.t$({state:n,metadata:{sourceId:"LSM.updateActiveState"}})}return h.trace("shouldAutoFocus: false"),d.t$({state:p,metadata:m})}return h.trace("alert is not from current lens, recreating lens view"),d.F2(f?d.t$({alertHighlight:{alert:e,highlightIndex:t},alertSource:p.alertSource,options:{lensId:r,order:p.switchOrder,toFocus:k.nL.Effect.FocusBehavior.focusFirst}}):d.F2({lensId:r,alertSource:p.alertSource,options:{order:p.switchOrder,toFocus:k.nL.Effect.FocusBehavior.noFocus}}))})))}}(U||(U={}))},20291:(e,t,r)=>{r.d(t,{R7:()=>b,XU:()=>w});var n=r(40327),i=r(5114),o=r(66896),a=r(15646),s=r(48521),l=r(98403),c=r(77176),u=r(66310),d=r(85985),p=r(2834),m=r(24209),h=r(598),g=r(83401),f=r(35416),y=r(99116);const v={cardsBeyondViewport:5,cardsAroundActive:100},b=(e,t,r,n,u=v,d=l.b2.rafScheduler)=>{const p=e=>!e.positionState.visible&&s.o.isAnimatable(e)&&e.visualState.incomplete?(n.next({type:a.eI.Kind.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId}),r.completeTransition(e.visualState.transitionId)(e)):e,m=e.pipe(c.U(f.nL.mapper((({currentLens:e,alertSource:t})=>i.some({currentLens:e,alertSource:t}))))),h=(0,y.nM)(r)(m,t.viewport,t.scrollTop,t.paddingTop,d).pipe(c.U((({viewport:e,scrollTop:t,paddingTop:r})=>({viewport:e,scrollTop:t,paddingTop:r,completeTransition:p}))),c.U((0,y.GC)({cardsBeyondViewport:u.cardsBeyondViewport,cardsAroundActive:u.cardsAroundActive,changePosition:r})));return{id:"manageCardsVisibility",when:o.R.isWithAlertsId,what:f.nL.Effect.Applicator.create(h)}},w=(e,t,r)=>{const a=(0,n.pipe)(e,c.U(f.nL.mapper((({currentLens:e,alertSource:t})=>i.some({currentLens:e,alertSource:t})))),(0,y.SW)(r),u.w(l.b2.rafScheduler),d.h((e=>0!==e)),p.b((e=>t.moveCardsBy(e,"freezeActiveCardOnCardsListUpdate"))));return{id:"freezeActiveCardOnCardsListUpdate",when:o.R.isWithAlertsId,what:f.nL.Effect.Applicator.create(m.T(m.T(a).pipe(h.c(g.C))))}}},71841:(e,t,r)=>{r.d(t,{YA:()=>h,i$:()=>m});var n=r(57050),i=r(40327),o=r(5114),a=r(98403),s=r(55935),l=r(93508),c=r(19751),u=r(35416),d=r(74238),p=r(14990);const m=e=>a.Hl(e.scrollTop.pipe(s.T(1)),100,!0).pipe(l.O(!1),c.shareReplay({bufferSize:1,refCount:!0})),h=(e,t)=>{const r=new p.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,i.pipe)(e.view(u.nL.getLens).get(),o.chain((({items:e,cardsHeight:t})=>(0,i.pipe)(e.getAt(0),o.map((e=>{const i=(0,n.ls)(d.L.AbsTop.ISO.wrap,r.converters.absTopToViewportTop,r.converters.viewportToWindow)(e.positionState.absTop);return{top:i,bottom:d.r.FromWindowTop.ISO.modify(d.L.concatC(t))(i)}}))))))}},35607:(e,t,r)=>{r.d(t,{o:()=>f});var n=r(40327),i=r(38983),o=r(95195),a=r(8125),s=r(81531),l=r(32952),c=r(44586),u=r(61722),d=r(16118),p=r(77176),m=r(93508),h=r(2834),g=r(74238);class f{constructor(e){this._validateOffset=e,this._log=s.C8.Logging.getLogger("CardsListScrollManager"),this.scrollTop=i.h.create(0),this.paddingTop=i.h.create(0),this.viewport=i.h.create({top:g.r.FromWindowTop.ISO.wrap(0),height:0}),this.scrollOffset=new l.xQ,this.moveCardsBy=(e,t)=>(this._log.debug(`Cards list moved by ${e}, from: ${t}`),this.scrollOffset.next(e),o.F2(void 0)),this.moveCardsByAnimated=(e,t)=>(this._log.debug(`Cards list moved by ${e}, from: ${t}`),c.y.create((t=>(0,n.pipe)(this._validateOffset(e,this),o.g_((e=>(t.thrownError(e),a.Q1)),(()=>{const r=2*this.viewport.get().height,n=Math.abs(e)>r?(e>0?1:-1)*r:e,i=e-n,o=u.f.createAnimationObservable(0,n,200).pipe(d.G(),p.U((([e,t])=>t-e)),m.O(i),h.b((e=>this.scrollOffset.next(e)))).subscribe({error:e=>t.error(e),complete:()=>t.complete()});return()=>o.unsubscribe()}))))))}}},74238:(e,t,r)=>{r.d(t,{L:()=>i,r:()=>n});var n,i,o=r(73975),a=r(50479),s=r(64681);!function(e){let t;!function(e){e.ISO=(0,s.k4)()}(t=e.FromWindowTop||(e.FromWindowTop={}))}(n||(n={})),function(e){let t,r,n;!function(e){e.ISO=(0,s.k4)(),e.equals=(0,s.Eh)(o.lr).equals}(t=e.FromViewportTop||(e.FromViewportTop={})),function(e){e.ISO=(0,s.k4)()}(r=e.AbsTop||(e.AbsTop={})),function(e){e.ISO=(0,s.k4)()}(n=e.CardTop||(e.CardTop={})),e.concatC=e=>t=>e+t;const i=e=>new a.aD(e);e.converters=function(t,r,n){const o=i(e.concatC(n)).get,a=i(e.concatC(-t)).get;return{windowToViewport:i(e.concatC(-r)).get,viewportToWindow:i(e.concatC(r)).get,cardTopToViewport:a,viewportToCardTop:i(e.concatC(t)).get,absTopToViewportTop:e=>a(o(e)),absTopToCardTop:o}}}(i||(i={}))},14990:(e,t,r)=>{r.d(t,{Db:()=>i});var n,i,o,a=r(73975),s=r(74238);!function(e){e.above="above",e.below="below",e.hidden="hidden"}(n||(n={})),function(e){e.Impl=class{constructor(e,t,r){this.scrollTop=e,this.viewport=t,this.converters=s.L.converters(e,s.r.FromWindowTop.ISO.unwrap(t.top),r)}}}(i||(i={})),function(e){const t=(0,a.MW)({top:a.lr,height:a.lr});e.eqDimensionsTuple=(0,a.IP)(t,t)}(o||(o={}))},99116:(e,t,r)=>{r.d(t,{Bk:()=>S,GC:()=>_,SW:()=>k,Sd:()=>M,nM:()=>T,v_:()=>E});var n=r(17771),i=r(58676),o=r(57050),a=r(40327),s=r(83078),l=r(5114),c=r(73975),u=r(89943),d=r(95983),p=r(77176),m=r(16118),h=r(85985),g=r(28043),f=r(66310),y=r(98403),v=r(2844),b=r(16892),w=r(35416),x=r(25975),I=r(74238);const S=e=>t=>t.isCardsHeightValid&&(0,a.pipe)(w.In.getActiveItem(t),s.wo((t=>!e.isScheduledToDispose(t)))),C=e=>t=>t.isCardsHeightValid&&(0,a.pipe)(w.In.getActiveItem(t),s.wo((t=>!e.isScheduledToDispose(t))));function E({cardTop:e,cardHeight:t,viewportHeight:r,padding:n}){const i=I.L.FromViewportTop.ISO.unwrap(e),o=i+t;return t>r?i:i<0?t+n.before<r?i-n.before:i:o>r?t+n.after<r?o-r+n.after:o-r:i<n.before?t+n.after+n.before<r?i-n.before:t+n.after<r?i-n.after:n.before:r-o<n.after&&t+n.after<r?n.after-(r-o):0}const A=(e,t,r,n)=>({from:Math.max(0,d.aW.lowerBound(e,(e=>e.positionState.absTop+e.positionState.height<r))-n),to:Math.min(e.size,d.aW.lowerBound(e,(e=>e.positionState.absTop<r+t.height))+n)}),k=e=>t=>t.pipe(M(e),p.U(l.map((e=>e.currentLens))),m.G(),h.h((([e,t])=>(0,a.pipe)((0,o.bc)(e,t),(0,o.og)(s.vB(((e,t)=>e.id===t.id&&(0,a.pipe)((0,o.bc)(w.In.getActiveItem(e),e.cardIndex,w.In.getActiveItem(t),t.cardIndex),(0,o.og)(n.g(l.option)),l.map((([e,t,r,n])=>e.id===r.id&&t!==n)))))),l.getOrElse((()=>!1))))),p.U((0,o.ls)(i.Pd(l.chain(w.In.getActiveItem),l.chain(w.In.getActiveItem)),(0,o.og)(s.vB(((e,t)=>t.positionState.absTop-e.positionState.absTop))),l.getOrElse((()=>0))))),M=e=>t=>t.pipe(p.U(l.filter((({currentLens:t})=>C(e)(t))))),T=e=>(t,r,n,i,o)=>{const s=(e=>l.getEq(c.f7(((t,r)=>{const n=w.In.getActiveItem(t),i=w.In.getActiveItem(r);return l.getEq(e.visualStateEq).equals(n,i)&&t.items.size===r.items.size&&u.Hx(t.items.keys(),r.items.keys(),((e,t)=>e===t))}))))(e);return t.pipe(p.U(l.map((e=>e.currentLens.id))),g.x(c.w4.equals),p.U(l.isSome),f.w(y.Ft(v.aj(r,n,i,M(e)(t).pipe(p.U(l.map((e=>e.currentLens))),g.x(s.equals),f.w(o))))),h.h((([t,r,n,i])=>(0,a.pipe)(i,l.exists(C(e))))),p.U((([e,t,r])=>({viewport:e,scrollTop:t,paddingTop:r}))))},_=({cardsBeyondViewport:e,cardsAroundActive:t,changePosition:r})=>({viewport:n,scrollTop:i,paddingTop:c,completeTransition:u})=>d=>{const p=d.currentLens,m=((e,t,r,n)=>e.size<2||Math.floor(t.height/Math.min(s.MH(e.getAt(0)).positionState.height,s.MH(e.getAt(1)).positionState.height))>=e.size?{from:0,to:e.size}:A(e,t,r,n))(p.items,n,i-c,e);let h=!1;const g=p.items.map(((e,n,i)=>{const s=(0,o.ls)((c=r,d=e.positionState.watched||(e=>m.from<=e&&m.to>e||(0,a.pipe)(p.cardIndex,l.exists((r=>e>=r-t&&e<=r+t))))(i),e=>e.positionState.visible!==d?c.changePosition(b.s.PositionState.changeVisible(e.positionState,d))(e):e),(e=>t=>!t.positionState.visible&&t.positionState.animationInProgress?e.changePosition(b.s.PositionState.changeAnimationInProgress(t.positionState,!1))(t):t)(r),u)(e);var c,d;return s!==e?(h=!0,s):e}));return h?w.nL.Prism.getLens().compose(x.v.Prism.items).set(g,d):d}},33806:(e,t,r)=>{r.d(t,{E:()=>o,c:()=>i});var n=r(86775);class i{constructor(e,t,r,n,i,o){this._checklistItemFactory=e,this._checklistItems=t,this._alertsReader=r,this._lensPredicate=n,this._inner=i,this._itemEq=o}create(e,t){return this._lensPredicate(t)?n.G.create(this._checklistItemFactory,this._checklistItems.get(),this._alertsReader,e,t,this._itemEq):this._inner.create(e,t)}}const o=(e,t,r,i,o,a)=>s=>i(s)?n.G.getAlertsHandler(e,t,r,a):o(s)},11245:(e,t,r)=>{r.d(t,{U:()=>w});var n=r(17889),i=r(40327),o=r(5114),a=r(22232),s=r(40018),l=r(17594),c=r(26027),u=r(55567),d=r(91549),p=r(20594),m=r(48521),h=r(77610),g=r(69345),f=r(40966),y=r(76974),v=r(70100),b=r(47306);function w(e,t,r,b){const w=p.Mq.getCardSelections(t),I=e=>t=>Object.assign(Object.assign({},t),{positionState:e}),S=e=>t=>Object.assign(Object.assign({},t),{visualState:e}),C=p.Mq.getTransitionTo(S,I),E=(e,t,n)=>i=>{const o=h.C.getAlertByIndex(n,e),a=l.$.isApplicableAlert(o)?p.Mq.getApplicableCardMeta(o,i.visualState,r):u.n.empty(void 0);return Object.assign(Object.assign({},i),{meta:a,alerts:e,activeAlert:o,removedAlertsIds:t,activeAlertIndex:n})},A=e=>t=>Object.assign(Object.assign({},t),{cachedTransform:e,transform:(0,i.pipe)(e,o.map((e=>e.labels)))}),k=t=>p.Mq.getCardHydrator((e=>e.cachedTransform),c.X.canHydrate,A,e)(t),M=p.Mq.getSelectByAlert(E,(e=>t=>Object.assign(Object.assign({},t),{userInput:e})),S,I,(e=>t=>Object.assign(Object.assign({},t),{meta:e})),k,t,r),T=p.Mq.getSelectFirstAlert(M),_=p.Mq.getSelectNextAlert(p.Mq.getCardSelections(t),M),L=p.Mq.getUnselectItem(S,I),N=p.Mq.getRemove(E,C),O=p.Mq.getChangeVisualState(S,k),D=(e,t)=>p.Mq.getCreate(x(e,t),o.none,O,(()=>y.of(o.none)),r),U=(e,t,n,a,s)=>{const l=v.X.create(e,t,n,g.Z.empty,f.t.initial({type:"rendered",clockwise:!0},!1),p.IG.toCardRenderOptions(r,a,y.of(o.none)));return(0,i.pipe)(s,o.fold((()=>l),(e=>v.X.changeVisualState(e)(l))))};return Object.assign({changePositionState:I,changeVisualState:S,completeTransition:e=>t=>S(m.o.VisualState.complete(t.visualState,e))(t),transitionTo:C,selectByAlert:M,selectFirstAlert:T,selectNextAlert:_,unselect:L,removeAlerts:N,updateWith:e=>t=>{(0,a.kG)(e.every((e=>s.bZ.isRegistered(e))),"cannot add non registered alerts");const r=new Set(e.map((e=>e.id))),n=new Set(t.removedAlertsIds);r.forEach((e=>{n.delete(e)}));const o=t.alerts.filter((e=>!r.has(e.id))).concat(e.map(l.$.fromModel)).sort(b.compare);return(0,i.pipe)(t,E(o,n,h.C.getIndexByAlert(t.activeAlert.id,o)),k)},updateMeta:e=>t=>Object.assign(Object.assign({},t),{itemMeta:e}),createDefault:U,createWithAlerts:(e,t,r,n,o,a,s)=>(0,i.pipe)(D(t,d.R.getAlertOutcomeBundle(r[0])),(t=>t(e,r,n,0,o,a,s,b))),createRenderedEmpty:(e,t,r,n)=>U(t,r,n,e,o.some(f.t.initial({type:"rendered",clockwise:!0},!1))),createRenderedWithAlerts:(e,t,n,i,a)=>{const s=m.o.VisualState.initial({type:"rendered",clockwise:!0},!1);return D(n,i)(t,a,0,0,p.Mq.getApplicableCardMeta(a[0],s,r),e,o.some(s),b)},createFocusedEmpty:(e,t,r,n)=>U(t,r,n,e,o.some(f.t.initial({type:"focused",clockwise:!0},!0))),createFocusedWithAlerts:(e,t,a,s,l,c)=>(0,i.pipe)(c,o.fold((()=>(0,i.pipe)(l,n.DY(b),(e=>({alerts:e,activeAlertIdx:0})))),(e=>({alerts:l,activeAlertIdx:e}))),(n=>{const i=m.o.VisualState.initial({type:"focused",clockwise:!0},!0);return D(a,s)(t,n.alerts,n.activeAlertIdx,0,p.Mq.getApplicableCardMeta(n.alerts[n.activeAlertIdx],i,r),e,o.some(i),b)}))},w)}const x=(e,t)=>(r,n)=>{const i=new u.n.Impl(n.meta.percentile,n.meta.explanation,n.meta.checking,n.meta.ranges,n.meta.showMuteQuotedAdvice);return b.J.create(r,e,t,n.alerts,n.activeAlertIndex,n.activeHighlightIndex,n.positionState,n.visualState,i,n.lensId,n.renderOptions,n.muteCategory,n.order,n.initialAlertId,n.removedAlertsIds,n.cachedTransform,n.userInput,n.synfonySelection)}},60682:(e,t,r)=>{r.d(t,{B:()=>n});var n,i=r(57050),o=r(38983),a=r(76974),s=r(32952),l=r(2844),c=r(77176),u=r(28043),d=r(73975),p=r(5114),m=r(8125),h=r(71249),g=r(83078),f=r(81531),y=r(66896),v=r(40018),b=r(6782),w=r(4390),x=r(17594),I=r(55567),S=r(15646),C=r(20594),E=r(35416),A=r(25975),k=r(9922),M=r(5920),T=r(48521),_=r(77610);!function(e){function t(t){return t.id===e.id}let r,n,L;e.id="UpgradeHookId",e.Kind="UpgradeHook",e.eq={equals:(e,t)=>d.yv.equals(e.id,t.id)&&_.C.eq.equals(e,t)},e.isUpgradeHookItem=t,function(e){e.create=(e,t="default")=>{const r=C.Mq.getCreate(((e,r)=>n.createItem(e,r,t)),p.none,n.changeVisualState,(()=>a.of(p.none)),e);return{createAdded:e=>(t,n)=>{const i=T.o.VisualState.initial({type:"added",clockwise:!0},!0);return r(t,n,0,0,I.n.empty(void 0),e,p.some(i))}}}}(r=e.ItemFactory||(e.ItemFactory={})),function(t){t.createItem=(t,r,n)=>Object.assign({kind:e.Kind,id:t,activeAlert:r.alerts[0],equals(t){return e.eq.equals(this,t)},hashCode(){return _.C.hashCode(Object.assign(Object.assign({},this),{userInput:p.none}))},groupedAlerts:e.getGroupedLiteAlerts(r.alertModels),documentType:n},r);const r=T.o.Capabilities.getPojoUpdates(),n=_.C.Capabilities.getPojoUpdates();t.changeVisualState=C.Mq.getChangeVisualState(r.setVisualState,i.yR),t.changePosition=r.setPosition,t.transitionTo=C.Mq.getTransitionTo(t.changeVisualState,t.changePosition),t.animatable={completeTransition:e=>r=>(0,i.zG)(r,t.changeVisualState(T.o.VisualState.complete(r.visualState,e))),transitionTo:t.transitionTo,changeVisualState:t.changeVisualState},t.updateAlerts=n.setAlerts,t.select={selectByAlert:()=>i.yR,select:(e,r)=>n=>(0,i.zG)(n,C.Mq.getSelectItem(t.changeVisualState,t.changePosition)(e,r)),unselect:C.Mq.getUnselectItem(t.changeVisualState,t.changePosition)},t.remove={remove:(e,r)=>n=>e(n)?t.transitionTo({type:"removed",clockwise:r(n)})(n):n}}(n=e.Capabilities||(e.Capabilities={})),function(e){let t;!function(e){e.empty={onShowUpgradeHook:i.Q1,onOpenUpgradeUrl:i.Q1,onDismissUpgradeHook:i.Q1}}(t=e.EventHandlers||(e.EventHandlers={}));e.UpgradeHookItemViewModelImpl=class{constructor(e,t,r,n,i){this._subs=new k.w.Keeper,this.events=new s.xQ,this.upgradeHookDismissed=o.h.create(!1),this._subs.push(this.events.subscribe((r=>{"showedUpgradeHook"===r.type?i.onShowUpgradeHook():(S.lY.isSDUICardAction(r)&&S.lY.ProxySduiCardAction.hasAction(r,"upgradeToPremium")&&(t.openUpgradeUrl(n),i.onOpenUpgradeUrl()),S.lY.isSDUICardAction(r)&&S.lY.ProxySduiCardAction.hasAction(r,"removeCard")&&(this.upgradeHookDismissed.set(!0),i.onDismissUpgradeHook()),e.actionEvents.next(r))}))),this._subs.push(r.subscribe((()=>{this.upgradeHookDismissed.set(!1)})))}dispose(){this._subs.dispose()}}}(L=e.ViewModel||(e.ViewModel={})),e.getPremiumAlerts=(e,t)=>l.aj([t.view("currentLens").view("id").view(y.R.isPriority).view((e=>e?e=>v.bZ.isRegistered(e)&&v.bZ.isPremium(e)&&v.bZ.isPriority(e):e=>v.bZ.isRegistered(e)&&v.bZ.isPremium(e))),e]).pipe(c.U((([e,t])=>w.p.reduce([],((t,{alert:r})=>(Boolean(e(r))&&t.push(r),t)))(t)))),e.getGroupedLiteAlerts=e=>b.Q.group(e.map((e=>e.toLiteAlert()))),e.formatLiteAlerts=(e,t=5)=>{const r=e.slice(0,t),n=e.slice(t).map((e=>e.count)).reduce(m.Sm,0);return n>0?[...r,{group:"",category:"",categoryHuman:"more...",count:n,lensName:"more...",bundleInfo:p.some("more...")}]:r},e.groupPremiumAlerts=e=>Object.values(e.reduce(((e,t)=>{const r=t.lensType;return null!=e[r]?e[r]=Object.assign(Object.assign({},e[r]),{lensNames:h.jj(d.w4)([...e[r].lensNames,t.lensName]),alertsCount:e[r].alertsCount+1}):e[r]={lensNames:[t.lensName],lensType:t.lensType,alertsCount:1},e}),{}));const N=(0,m.HP)(f.C8.Logging.getLogger);e.getSideEffect=(o,a,s,d,m,f=r.create(m),v=y.R.isWithAlertsId)=>{const b=N("UpgradeHook.sideEffect"),w=E.nL.Prism.getLensWithItems().compose(A.v.Prism.getFeedItems()),I=a.pipe(c.U((e=>e.currentLens.id)),u.x());return{id:"upgradeHookEffect",when:v,what:E.nL.Effect.ItemsApplicator.create((0,i.zG)(l.aj([o,I]),c.U((([r])=>o=>{const a=M.l.find(o.currentLens.items,t);if(s.get())return o;if(0===r.length)return p.isSome(a)?(b.trace("no more premium alerts, removing UpgradeHook item from the current lens"),w.set(o.currentLens.items.remove(e.id),o)):o;let l,c=o;return p.isNone(a)?(b.trace("premium alerts found, adding upgrade hook item to lens state",r),l=f.createAdded(o.currentLens.id)(e.id,r),c=w.set(o.currentLens.items.add(l),o)):l=g.MH(a).value,c=(0,i.zG)(n.updateAlerts((0,i.zG)(r,h.UI(x.$.fromModel)),e.getGroupedLiteAlerts(r))(l),(e=>o.currentLens.items.add(e)),(e=>w.set(e,c))),(1===c.currentLens.items.size||y.R.isPremiumId(c.currentLens.id))&&(b.trace("auto focusing upgrade hook item"),c=E.nL.Prism.getLensWithItems().modify(d.selectItemById(e.id),c)),c}))))}}}(n||(n={}))},73841:(e,t,r)=>{r.d(t,{l:()=>L});var n=r(31542),i=r(11064),o=r(40327),a=r(95195),s=r(5114),l=r(8125),c=r(22232),u=r(81531),d=r(46680),p=r(66896),m=r(32952),h=r(77176),g=r(76974),f=r(95300),y=r(24209),v=r(66310),b=r(98403),w=r(69935),x=r(91224),I=r(41398),S=r(2834),C=r(28043),E=r(598),A=r(83401),k=r(17594),M=r(48521),T=r(35416),_=r(89770);class L{constructor(e,t,r,c,E,A,M){this._state=e,this._stateProvider=t,this._alertsReader=r,this._alertsService=c,this._stateSideEffects=E,this._getActiveAlert=A,this._stateTransformer=M,this.focusLens=(e,t,r={toFocus:T.Zz.defaultOptions.focusBehavior})=>{this._log.debug("focusLens "+e),this._switchLensActions.next({lensId:e,alertSource:t,options:r})},this.focusAlert=(e,t,r)=>{this._switchAlertActions.next({alertHighlight:e,alertSource:t,options:{order:r}})},this._log=u.C8.Logging.getLogger("FocusedLensManagerImpl"),this._ts=u.C8.TimeSeries.root.getMetric("lens_state.manager"),this._switchLensActions=new m.xQ,this._switchAlertActions=new m.xQ,this._addMetadata=e=>t=>t.pipe(h.U((t=>({source:t,metadata:e})))),this._focusLensEffect=({lensId:e,alertSource:t,options:{toFocus:r=T.Zz.defaultOptions.focusBehavior,order:n}})=>{if(this._log.debug("_focusLensEffect ",{alertSource:t,lensId:e}),p.R.isClosedId(e))return(0,o.pipe)(g.of(T.nL.Effect.Applicator.Source.override((0,_.T)())),this._addMetadata({sourceId:"LSM.focusLensEffect"}));if(p.R.isDraftAIId(e))return(0,o.pipe)(g.of(T.nL.Effect.Applicator.Source.override((0,_.zc)())),this._addMetadata({sourceId:"LSM.focusLensEffect"}));const i=this._state.get(),a=i.patch({switchOrder:Boolean(n)?n:i.switchOrder,alertSource:t});return(0,o.pipe)(this._stateProvider.getLensEventsByLensId(a,e,{focusBehavior:r}),this._addMetadata({sourceId:"LSM.focusLensEffect"}))},this._focusAlertEffect=({alertHighlight:e,alertSource:t,options:r})=>{this._log.isEnabled(d.i.TRACE)&&this._log.trace(`focusAlert(${e.alert})`);const n=this._state.get(),i=n.patch({switchOrder:Boolean(r.order)?r.order:n.switchOrder,alertSource:t});return(0,o.pipe)(this._stateProvider.getLensEventsByAlert(i,function(e,t,r){if(e===p.R.SpecialId.Priority||e===p.R.SpecialId.PredictionTakeaways||e===p.R.SpecialId.PredictionEmogenie||e===p.R.SpecialId.RealTimeProofit||e===p.R.SpecialId.FreePremiumAlerts)return e;if(void 0!==r)return r;if(e===p.R.SpecialId.Closed||e===p.R.SpecialId.AllAlerts)return p.R.SpecialId.AllAlerts;return t}(n.currentLens.id,e.alert.lensId,r.lensId),e),this._addMetadata({sourceId:"LSM.focusAlertEffect"}))};const L=this._state.get(),N=this._stateTransformer,O=new f.X(L);this._effects=y.T(...this._stateSideEffects.map((({when:e,what:t,id:r})=>this._state.view("currentLens","id").view(e).pipe(v.w(b.Ft((0,o.pipe)(this._effectToApplicator(t),this._addMetadata({sourceId:r}))))))),y.T(this._switchAlertActions.pipe(h.U(this._focusAlertEffect)),this._switchLensActions.pipe(h.U(this._focusLensEffect))).pipe(w.B()));const D=this._ts.getTimer("batched.long_state_change");this._subs=[this._effects.pipe(x.K(((e,t)=>(this._log.error("Got error from effects: ",e),t))),I.M(O,(({source:e,metadata:t},r)=>({state:e(r),metadata:t}))),x.K(((e,t)=>(this._log.error("Got error while applying new state: ",e),t))),S.b((e=>{this._log.isEnabled(d.i.TRACE)&&this._log.trace("lens state before state transformer: ",e)})),h.U(N),x.K(((e,t)=>(this._log.error("Got error while transforming state: ",e),t)))).subscribe((e=>(0,o.pipe)(e,a.g_((({state:e,metadata:t})=>{this._log.isEnabled(d.i.TRACE)&&this._log.trace(`lens state from: ${t.sourceId}`,e),(0,o.pipe)(this._checkState(e),a.g_((t=>this._log.error("incorrect state transition detected",{error:t,state:e})),(()=>O.next(e))))}),a.g_((e=>this._switchAlertActions.next(e)),(e=>this._switchLensActions.next(e))))))),(0,o.pipe)(O,h.U(T.nL.getActiveAlert(this._getActiveAlert)),S.b((e=>this._log.trace("active alert: ",e))),C.x(s.getEq(k.$.eq).equals),v.w(b.aI((e=>(0,o.pipe)(this._alertsService.takeReference(e,"activeCard"),a.Vn((e=>this._log.error("can not take alertRef",e))),a.g_(i.of(l.Q1),(e=>e.dispose))))))).subscribe(),(0,o.pipe)(O,h.U((e=>{const t=performance.now();n.unstable_batchedUpdates((()=>{this._state.set(e)}));const r=performance.now()-t;r>16&&D.recordTime(r)}))).subscribe()],T.nL.hasCards(L)&&(0,o.pipe)(T.nL.getActiveAlertHighlight(this._getActiveAlert)(L),s.filter((e=>this._alertsReader.isRegistered(e.alert.id))),s.fold((()=>this._switchLensActions.next({lensId:L.currentLens.id,alertSource:L.alertSource,options:{order:L.switchOrder,toFocus:T.nL.Effect.FocusBehavior.noFocus}})),(e=>this._switchAlertActions.next({alertHighlight:e,alertSource:L.alertSource,options:{lensId:L.currentLens.id,order:L.switchOrder}}))))}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_effectToApplicator(e){switch(e.type){case T.nL.Effect.Type.Applicator:case T.nL.Effect.Type.ItemsApplicator:return e.source;case T.nL.Effect.Type.SwitchLens:return e.source.pipe(S.b((e=>this._switchLensActions.next(e))),E.c(A.C));case T.nL.Effect.Type.SwitchAlert:return e.source.pipe(S.b((e=>this._switchAlertActions.next(e))),E.c(A.C));default:return(0,c.vE)(e)}}_checkState(e){try{if(T.nL.hasCards(e)){const t=e.currentLens.items.filter((0,l.W9)(M.o.isAnimatable,M.o.isFocused));(0,c.kG)(t.size<=1,"cannot have more than one focused card",(()=>JSON.stringify(t)))}}catch(e){return a.t$(e)}return a.F2(void 0)}}L.toLensAlert=({alert:e,highlightIndex:t})=>({alert:e,highlightIndex:t,lensId:e.lensId})},89770:(e,t,r)=>{r.d(t,{T:()=>N,oq:()=>D,zc:()=>O});var n=r(57050),i=r(40327),o=r(73975),a=r(22232),s=r(92843),l=r(5114),c=r(8125),u=r(83078),d=r(81531),p=r(46680),m=r(51374),h=r(40018),g=r(66896),f=r(4390),y=r(89772),v=r(76974),b=r(85985),w=r(28043),x=r(77176),I=r(24209),S=r(16118),C=r(2834),E=r(66310),A=r(93508),k=r(17594),M=r(35416),T=r(25975),_=r(93265);const L=(0,n.ff)(h.bZ.isMuted),N=()=>M.nL.create({alertSource:h.l$.api,switchOrder:"lensOrder",currentLens:T.v.Closed.create(n.jv,o.f7(n.jv))}),O=()=>M.nL.create({alertSource:h.l$.api,switchOrder:"lensOrder",currentLens:T.v.DraftAI.create()});class D{constructor(e,t,r,n,o,a,s,l,c,u=M.nL.FocusFirstFilter.defaultFilter){this._checkingState=e,this._alertsReader=t,this._lenses=r,this._positionManager=n,this._lensPreviewVM=o,this._lensViewFactory=a,this._alertsHandlerFactory=s,this._capabilities=l,this._alertsFilterService=c,this._focusFirstFilter=u,this._transformAlertsDiffToApplicator=e=>t=>r=>M.nL.hasItems(r)?r.patch({currentLens:e(t,L)(r.currentLens)}):r,this._log=d.C8.Logging.getLogger("FocusedLensManagerImpl"),this._updateMetaSource=e=>t=>r=>e===r.currentLens.id&&M.nL.hasItems(r)?M.nL.Prism.getLensWithItems().modify(this._capabilities.updateMeta(t),r):r,this._lensAlerts=e=>{const t=this._alertsFilterService.alertVisibleInSidebar(e.id);return(0,i.pipe)(this._checkingState.get(),f.p.reduce([],((e,{alert:r})=>t(r)?[...e,r]:e)),(e=>e.sort(h.h$.ord.compare)))}}static _mapByActiveLensId(e,t,r,n){if(g.R.isOutcomeId(e))return n();switch(e){case g.R.SpecialId.Plagiarism:return t();case g.R.SpecialId.Premium:return r();case g.R.SpecialId.AllAlerts:case g.R.SpecialId.Priority:case g.R.SpecialId.PredictionTakeaways:case g.R.SpecialId.PredictionEmogenie:case g.R.SpecialId.RealTimeProofit:case g.R.SpecialId.FreePremiumAlerts:return n();default:return(0,a.vE)(e)}}_conditionedApplicator(e,t){return r=>n=>e(n,r)?t(r)(n):n}static _filterALEvents(e,t){return r=>v.of((0,i.pipe)(r,f.p.Diff.filter((t=>e(t.alert))),(e=>(t.isEnabled(p.i.TRACE)&&t.trace("diff after filter",e),e)))).pipe(b.h((0,n.ff)(s.v.isEmpty)))}emptyState(e=g.R.SpecialId.AllAlerts){return M.nL.create({currentLens:this._createLens({lensId:e,initialLens:this._lensPreviewVM.getLens(e).get(),visibleAlerts:[],alertHighlight:l.none,alertSource:h.l$.api}),alertSource:h.l$.api,switchOrder:"lensOrder"})}getLensEventsByLensId(e,t,r={}){const n=this._getActiveLensMeta(t),o=this._lensAlerts(n),a=this._createState(e,l.none,n,t,o),s=r.focusBehavior?this._getAlertToFocus(r.focusBehavior,a):l.none;e.currentLens.id===t&&M.nL.hasItems(e)&&this._capabilities.getActiveAlertsCount(e.currentLens)!==o.length&&this._log.warn("Lens contains inconsistent number of alerts",n.id);const c=M.nL.hasItems(a)?(0,i.pipe)(s,l.fold((()=>a),(r=>this._createState(e,l.some(r),n,t,o)))):a;return this._generateEventsFromState(c,this._alertsHandlerFactory(t))}getLensEventsByAlert(e,t,r){(0,a.kG)(l.isSome(this._alertsReader.getById(r.alert.id)),"Can't focus non existing alert",r.alert.id);const n=this._getActiveLensMeta(t),i=e.currentLens.meta.id===t&&e.currentLens.meta.filter(r.alert)&&M.nL.hasItems(e)?M.nL.Prism.getLensWithItems().modify(this._capabilities.selectItemByAlert(r),e):this._createState(e,l.some(r),n,t,this._lensAlerts(n));return this._generateEventsFromState(i,this._alertsHandlerFactory(t))}findClosestAlertHighlight(e,t){return(0,i.pipe)(this._positionManager.findClosestToPosition(e,(e=>m.P.is(e)&&m.x.isVisible(e)&&!m.x.isApplied(e)&&(0,i.pipe)(this._alertsReader.getRegistered(e.meta.alertId),l.exists((r=>this._alertsFilterService.alertCanBeDisplayed(r)&&t(r)&&r.getHighlightRanges().some((t=>t.meta.id===e.meta.id))))))),l.chain((e=>(0,i.pipe)(this._alertsReader.getRegistered(e.meta.alertId),l.map((t=>{const r={alert:k.$.fromModel(t),highlightIndex:t.getHighlightRanges().findIndex((t=>t.meta.id===e.meta.id))};return r.highlightIndex<0&&(this._log.error("findClosestAlertRange returned a range which doesn't exist in alert.highlightRanges",{alert:r.alert.toString(),range:JSON.stringify(e),positionManagerRanges:JSON.stringify(this._positionManager.findRanges((e=>m.P.is(e)&&e.meta.alertId===t.id))),hasPendingRanges:t.hasNewRangesForUpdate}),r.highlightIndex=0),r}))))))}findNextAlertInText({alert:e,highlightIndex:t},r){const n=e.getHighlightRanges();return(0,a.kG)(t<n.length,"AHI is out of highlightRanges length",`hr length: ${n.length}, ahi: ${t}`),this.findClosestAlertHighlight(n[t].end,r)}findNextAlertInTextByLens(e,t,r){return this.findNextAlertInText(e,this._alertsFilterService.alertVisibleInText(t,r))}findPremiumAlert(){return this._lensPreviewVM.getLens(g.R.SpecialId.Premium).get().count>0?(0,i.pipe)(this._checkingState.get(),f.p.find((0,n.ls)(h.bZ.fromAlertModel,(0,c.W9)(h.bZ.isRegistered,h.bZ.isPremium))),l.map((e=>({alert:k.$.fromModel(e.alert),highlightIndex:0})))):l.none}hasZeroFreeAlerts(e){return 0===this._lensPreviewVM.getLens(e.get()).get().priorityCount}_getMetaChangesObservable(e){return M.nL.hasItems(e)&&e.currentLens.kind===M._L.persistent?this._lensPreviewVM.getLens(e.currentLens.id).view(this._updateMetaSource(e.currentLens.id)):M.nL.hasItems(e)&&e.currentLens.type===M.Nm.lensview?this._lenses.pipe(w.x(y.w.eq.equals),x.U((0,n.ls)(y.w.lookup(e.currentLens.id),l.map(this._updateMetaSource(e.currentLens.id)),l.getOrElse((()=>M.nL.Effect.Applicator.Source.identity))))):M.nL.Effect.Applicator.Source.empty}_generateEventsFromState(e,t){return I.T(this._checkingState.pipe(S.G(),x.U((([e,t])=>f.p.diff(e,t))),C.b((e=>{this._log.isEnabled(p.i.TRACE)&&this._log.trace("new alerts diff",e)})),E.w(D._filterALEvents(e.currentLens.meta.filter,this._log)),x.U(this._conditionedApplicator(((e,t)=>{const r=this._alertsFilterService.getLensesFilter(e.currentLens.id),o=(0,i.pipe)(t,f.p.Diff.filter((0,n.ff)((({alert:e})=>r(e)))));return s.v.isEmpty(o)}),this._transformAlertsDiffToApplicator(t)))),this._getMetaChangesObservable(e)).pipe(A.O(M.nL.Effect.Applicator.Source.override(e)))}_getActiveLensMeta(e){const t=D._mapByActiveLensId(e,(()=>this._lensPreviewVM.getLens(g.R.SpecialId.Plagiarism).get()),(()=>this._lensPreviewVM.getLens(g.R.SpecialId.Premium).get()),(()=>this._lensPreviewVM.getLens(e).get()));return(0,a.kG)(void 0!==t,`unknown lensId:${e}`),t}_createState({alertSource:e,switchOrder:t},r,n,o,s){(0,a.kG)(u.wo((({alert:e})=>l.isSome(this._alertsReader.getInteractable(e.id))))(r),"we can create state only with alert in registered state",(()=>(0,i.pipe)(r,l.fold((()=>"null"),(e=>e.toString())))));const c=this._createLens({lensId:o,initialLens:n,visibleAlerts:s,alertHighlight:r,alertSource:e});return M.nL.create({currentLens:c,alertSource:e,switchOrder:t})}_createLens(e){const t=this._focusFirstFilter(e);return _.v.createWithInitialAlerts(this._lensViewFactory,this._alertsHandlerFactory,this._alertsFilterService,L,this._capabilities)(e.lensId,e.initialLens,e.visibleAlerts,t)}_getAlertToFocus(e,t){switch(e.kind){case M.nL.Effect.FocusBehaviorType.noFocus:case M.nL.Effect.FocusBehaviorType.unFocus:return l.none;case M.nL.Effect.FocusBehaviorType.focusFirst:return M.nL.hasItems(t)?this._capabilities.findFirstAlert(t.currentLens):l.none;case M.nL.Effect.FocusBehaviorType.focusNext:return M.nL.hasItems(t)?this._capabilities.findNextAlert(t.currentLens):l.none;case M.nL.Effect.FocusBehaviorType.focusAlert:return l.some(e.alertHighlight);default:(0,a.vE)(e)}}}},39920:(e,t,r)=>{r.d(t,{ad:()=>u,gi:()=>d,is:()=>l,kn:()=>c});var n,i=r(22232),o=r(66896),a=r(35416),s=r(25975);!function(e){e.compose=function(e){return t=>a.CX.compose(e.map((e=>e(t))))},e.map=function(e,t){return r=>t(e(r))}}(n||(n={}));const l=(e,t)=>r=>{if(o.R.isOutcomeId(r))return s.v.WithSuccess.getAlertHandler(e,t);switch(r){case o.R.SpecialId.Premium:return s.v.Premium.getAlertsHandler(e,t);case o.R.SpecialId.AllAlerts:case o.R.SpecialId.Priority:case o.R.SpecialId.PredictionTakeaways:case o.R.SpecialId.PredictionEmogenie:case o.R.SpecialId.RealTimeProofit:case o.R.SpecialId.FreePremiumAlerts:return s.v.WithSuccess.getAlertHandler(e,t);default:return(0,i.vE)(r)}},c=(e,t,r,n,i)=>o=>r(o)?s.v.WithBundles.getAlertsHandler(e,t,i):n(o);class u{constructor(e,t,r,n){this._lensPredicate=e,this._inner=t,this._itemEq=r,this._itemOrd=n}create(e,t){return this._lensPredicate(t)?s.v.WithBundles.create(e,t,this._itemEq,this._itemOrd):this._inner.create(e,t)}}class d{constructor(e,t){this._itemEq=e,this._itemOrd=t}create(e,t){const r=()=>s.v.WithSuccess.create(e,t,this._itemEq,this._itemOrd);if(o.R.isOutcomeId(e))return r();switch(e){case o.R.SpecialId.Premium:return s.v.Premium.create(t,this._itemEq,this._itemOrd);case o.R.SpecialId.AllAlerts:case o.R.SpecialId.Priority:case o.R.SpecialId.PredictionTakeaways:case o.R.SpecialId.PredictionEmogenie:case o.R.SpecialId.RealTimeProofit:case o.R.SpecialId.FreePremiumAlerts:return r();default:return(0,i.vE)(e)}}}},88772:(e,t,r)=>{r.d(t,{t:()=>n});var n,i=r(95195),o=r(35416);!function(e){e.nothing=i.t$,e.liftLensState=function(e){return t=>i.t$(Object.assign(Object.assign({},t),{state:e(t.state)}))},e.liftWithItemsState=function(e){return t=>i.t$(Object.assign(Object.assign({},t),{state:o.nL.hasItems(t.state)?o.nL.Prism.getLensWithItems().modify(e,t.state):t.state}))},e.liftLensView=function(e){return t=>i.t$(Object.assign(Object.assign({},t),{state:o.nL.hasCards(t.state)?o.nL.Prism.getLens().modify(e,t.state):t.state}))}}(n||(n={}))},74364:(e,t,r)=>{r.d(t,{EQ:()=>R,ay:()=>D,$A:()=>U});var n,i=r(57050),o=r(40327),a=r(8125),s=r(95574),l=r(22232),c=r(83078),u=r(5114),d=r(95195),p=r(40018),m=r(66896),h=r(98403),g=r(19751),f=r(60797),y=r(32952),v=r(28043),b=r(66310),w=r(40151),x=r(44586),I=r(78674),S=r(77176),C=r(93508),E=r(598),A=r(83401),k=r(76974),M=r(2834),T=r(41398),_=r(55935),L=r(85985),N=r(73975),O=r(71249);!function(e){e.eq=(0,N.MW)({alert:(0,N.Uz)((e=>e.id))(N.w4),highlightIndex:N.w4}),e.getEq=()=>e.eq,e.getHighlightRange=e=>O.P5(e.highlightIndex)(e.alert.getHighlightRanges())}(n||(n={}));var D,U,R,P=r(35416);!function(e){let t;!function(e){e.AppliedAlertAnimationFinished="AppliedAlertAnimationFinished"}(t=e.Type||(e.Type={}))}(D||(D={})),function(e){e.Mock=class{constructor(){this.events=new y.xQ,this.focusAlertHighlight=()=>d.t$(new Error("Method not implemented.")),this.highlightAlertHighlight=()=>d.t$(new Error("Method not implemented.")),this.moveCursorToHighlight=a.Q1}ensureAlertHighlightInViewport(){throw new Error("Method not implemented.")}getMarkByAlert(e){throw new Error("Method not implemented.")}getAlertByMark(e){throw new Error("Method not implemented.")}},e.getHighlightIndex=function(e,t){return(0,o.pipe)(t,d.Vn((()=>new Error("Mark is collapsed"))),d.tS((t=>s.vM((()=>{const r=e.getHighlightRanges(),n=r.length>1?r.findIndex((e=>e.start===t.start&&e.end===t.end)):0;return(0,l.kG)(-1!==n,"Could not find highlight index by Range for provided Alert",(()=>JSON.stringify({alertRanges:r,targetRange:t}))),n})))))}}(U||(U={})),function(e){e.getHighlightSubscribtion=(e,t,r)=>e.pipe(v.x(u.getEq(p.h$.ord).equals),b.w((e=>(0,o.pipe)(e,u.fold((()=>w.E),(e=>x.y.create((()=>(r.debug(`highlight mark: ${e.id}`),(0,o.pipe)(t.highlightAlertHighlight(e),d.g_((t=>(r.error(`Cannot highlight mark: ${e.id}`,t),a.Q1)),(t=>()=>{r.debug(`unhighlight mark: ${e.id}`),t.dispose()})))))))))))),e.getHoverAlertHightlightSource=(e,t,r,n)=>(0,o.pipe)(n,I.b(100),S.U((0,i.ls)(u.chain((n=>{const i=e.get();return P.nL.hasCards(i)?i.currentLens.items.find((e=>(0,o.pipe)(t.hasActiveAlert(e),u.map((e=>e.alert)),u.exists((t=>e.id===n&&r.isRegistered(t.id)))))):u.none})),u.chain((({value:e})=>t.hasActiveAlert(e))),u.map((e=>e.alert)))),v.x(u.getEq(p.h$.ord).equals),S.U(u.map((t=>({alert:t,highlightIndex:0,source:e.get().alertSource})))),C.O(u.none)),e.highlightMarkByHighlightedCard=(t,r,n,a,s,l)=>{const c=e.getHighlightSubscribtion(t.hovered.pipe(I.b(100),S.U((0,i.ls)(u.chain((e=>{const t=r.get();return P.nL.hasCards(t)?t.currentLens.items.find((t=>(0,o.pipe)(s.hasActiveAlert(t),u.map((e=>e.alert)),u.exists((r=>t.id===e&&a.isRegistered(r.id)))))):u.none})),u.chain((({value:e})=>s.hasActiveAlert(e))),u.map((e=>e.alert))))),n,l);return{id:"highlightMarkByHighlightedAlert",when:m.R.isWithAlertsId,what:P.nL.Effect.Applicator.create(c.pipe(E.c(A.C)))}},e.getAlertHighlightSource=e=>t=>(0,o.pipe)(t,v.x(u.getEq(p.h$.ord).equals),S.U(u.map((t=>({alert:t,source:e,highlightIndex:0})))),C.O(u.none)),e.getActiveHighlightSource=(e,t,r)=>e.view(P.nL.mapper((({currentLens:e,alertSource:t})=>(0,o.pipe)(r(e),u.map((e=>({alert:e.activeAlert,source:t,highlightIndex:e.activeHighlightIndex}))))))).pipe(b.w(h.b2.rafScheduler),g.skipBy(u.getEq(n.getEq())),S.U(u.filter((e=>u.isSome(t.getRegistered(e.alert.id)))))),e.focusMarkByActiveAlert=(t,r,n,i,s,l=k.of(!0))=>{const h=(0,o.pipe)(e.getActiveHighlightSource(t,n,i),M.b(c.bw((e=>s.trace("new alert highlight: ",e)))),T.M(l),b.w((([e,t])=>(0,o.pipe)(e,u.fold((()=>(s.debug("Nothing to focus"),w.E)),(e=>x.y.create((()=>(s.debug(`Focus mark: ${e.alert.id} | ${e.highlightIndex}`),e.source===p.l$.sidebar&&t&&r.moveCursorToHighlight(e,"start"),(0,o.pipe)(r.focusAlertHighlight(e),d.g_((t=>(s.error("Cannot focus mark",t,{alertId:e.alert.id,highlightIndex:e.highlightIndex}),a.Q1)),(t=>()=>{s.debug(`Unfocus mark: ${e.alert.id} | ${e.highlightIndex}'`),t.dispose()}))))))))))));return{id:"focusMarkByActiveAlert",when:m.R.isWithAlertsId,what:P.nL.Effect.Applicator.create(h.pipe(E.c(A.C)))}},e.focusAlertByClickedMark=(e,t)=>({id:"focusAlertByActiveMark",when:P.nL.Effect.When.isSidebarOpen,what:P.nL.Effect.SwitchAlert.create(e.alertClicked.pipe(_.T(1),f.oA,L.h((e=>p.bZ.State.isRegistered(e.alert.state))),T.M(t.pipe(L.h(P.nL.hasCards)),((e,t)=>e)),S.U((({alert:e,highlightIndex:t})=>({alertHighlight:{alert:e,highlightIndex:t},alertSource:p.l$.text,options:{order:"textOrder"}})))))}),e.createOnAlertApplySideEffect=function(e,t){const r=e.pipe(S.U((e=>r=>e.type===D.Type.AppliedAlertAnimationFinished&&r.currentLens.meta.filter(e.alert)&&p.bZ.isApplicableAlert(e.alert)&&P.nL.hasItems(r)?r.patch({currentLens:t.finishApplyAnimation([e.alert])(r.currentLens),alertSource:e.alert.state.source}):r)));return{id:"onAlertApply",when:P.nL.Effect.When.isSidebarOpen,what:P.nL.Effect.Applicator.create(r)}}}(R||(R={}))},64992:(e,t,r)=>{r.d(t,{O:()=>v,x:()=>y});var n=r(45701),i=r(18208),o=r(68983),a=r(66896),s=r(48439);function l(e){return`${e} ${i._6(e,"alert","alerts")}`}const c=e=>(t,r,n,i,o)=>t?l(r.count):e(r,n,i,o),u=(e,t)=>(r,n,i,o)=>{const a=o?r.count:r.priorityCount;return a>0?l(a):i&y.IsDocumentEmpty?e:t},d={description:"Improves spelling, grammar, and punctuation.",stateMessage:c(u("No alerts","Looking good"))},p={description:"Helps make your writing easier to understand.",stateMessage:c(((e,t,r)=>{const i=(0,o.W)(n.lt(s.g.ord))(t);if(r&y.IsDocumentEmpty)return"So far so good";if(e.count>0){if(s.g.isMin(t))return l(e.count);if(i(s.g.fromNumber(20)))return"Unclear";if(i(s.g.fromNumber(70)))return"A bit unclear";if(i(s.g.fromNumber(85)))return"Mostly clear";if(i(s.g.fromNumber(95)))return"Clear"}return"Very clear"}))},m={description:"Helps make your writing more interesting and effective.",stateMessage:c(((e,t,r)=>{const i=r&y.IsFreeUser,a=s.g.isMin(t),c=(0,o.W)(n.lt(s.g.ord))(t);if(r&y.IsDocumentEmpty||i&&a)return"Nothing yet";if(i||e.count>0){if(a)return l(e.count);if(c(s.g.fromNumber(20)))return"Bland";if(c(s.g.fromNumber(80)))return"A bit bland";if(c(s.g.fromNumber(95)))return"Engaging"}return"Very engaging"}))},h={description:"Helps you make the right impression on your reader.",stateMessage:c(((e,t,r)=>{const i=r&y.IsFreeUser,a=s.g.isMin(t),c=(0,o.W)(n.lt(s.g.ord))(t);if(r&y.IsDocumentEmpty||i&&a)return"Nothing yet";if(i||e.count>0){if(a)return l(e.count);if(c(s.g.fromNumber(20)))return"Serious issues";if(c(s.g.fromNumber(40)))return"Very off";if(c(s.g.fromNumber(95)))return"Slightly off"}return"Just right"}))},g={description:"Your organization’s writing guidelines.",stateMessage:c(u("Nothing yet","All good"))},f={[a.R.SpecialId.Correctness]:d,[a.R.SpecialId.CorrectnessPriority]:d,[a.R.SpecialId.Clarity]:p,[a.R.SpecialId.ClarityPriority]:p,[a.R.SpecialId.Engagement]:m,[a.R.SpecialId.EngagementPriority]:m,[a.R.SpecialId.Delivery]:h,[a.R.SpecialId.DeliveryPriority]:h,[a.R.SpecialId.Vox]:g,[a.R.SpecialId.VoxPriority]:g,[a.R.SpecialId.Plagiarism]:{description:"Checks for similarities to published writing.",stateMessage:c(((e,t,r)=>r&y.IsLensVisited&&!(r&y.IsDocumentEmpty)?r&y.IsLensActive?s.g.isMin(t)?"100% original":`${t}% unoriginal`:"Recheck":"Not checked yet"))},[a.R.SpecialId.Premium]:{description:"Offers more suggestions on how to improve your writing.",stateMessage:c(((e,t,r)=>r&y.IsDocumentEmpty?"Advanced checks":`${e.count} more ${i._6(e.count,"alert","alerts")}`))},[a.R.SpecialId.FreePremiumAlerts]:{description:"Offers more suggestions on how to improve your writing.",stateMessage:c(((e,t,r)=>r&y.IsDocumentEmpty?"Advanced checks":`${e.count} more ${i._6(e.count,"alert","alerts")}`))}};var y;function v(e){return f[e]}!function(e){e[e.IsDocumentEmpty=1]="IsDocumentEmpty",e[e.IsLensActive=2]="IsLensActive",e[e.IsLensVisited=4]="IsLensVisited",e[e.IsFreeUser=8]="IsFreeUser"}(y||(y={}))},25970:(e,t,r)=>{r.d(t,{g:()=>s});var n,i=r(8125),o=r(5114),a=r(38983);!function(e){let t,r;!function(e){e[e.CHECKED=0]="CHECKED",e[e.NOT_CHECKED=1]="NOT_CHECKED"}(t=e.PlagiarismCheckingState||(e.PlagiarismCheckingState={})),function(e){e.Mock=class{constructor(){this.downloadStarted=a.h.create(!1),this.beginDownload=i.Q1,this.tryToInterrupt=i.Q1,this.generateReport=()=>{throw new Error("Method not implemented.")},this.reportData=a.h.create(o.none),this.dedHTML="",this.dispose=i.Q1}}}(r=e.ViewModel||(e.ViewModel={}))}(n||(n={}));var s,l=r(76974);!function(e){let t,r;!function(e){let t;!function(e){e[e.ERROR=0]="ERROR",e[e.EMPTY=1]="EMPTY",e[e.LOADING=2]="LOADING",e[e.SHORT_CONTENT=3]="SHORT_CONTENT",e[e.READY=4]="READY"}(t=e.Type||(e.Type={}))}(t=e.State||(e.State={})),function(e){e.Mock=class{constructor(e={type:t.Type.EMPTY},r=o.some(new n.ViewModel.Mock)){this.statisticsState=e,this.reportViewModel=r,this.state=l.of(this.statisticsState),this.onModalClose=i.Q1}}}(r=e.ViewModel||(e.ViewModel={}))}(s||(s={}))},27125:(e,t,r)=>{if(r.d(t,{L:()=>S,g:()=>i}),3075==r.j)var n=r(40327);var i,o=r(38983);if(3075==r.j)var a=r(84966);if(3075==r.j)var s=r(5114);if(3075==r.j)var l=r(66896);if(3075==r.j)var c=r(35416);if(3075==r.j)var u=r(32952);if(3075==r.j)var d=r(85985);if(3075==r.j)var p=r(77176);if(3075==r.j)var m=r(66310);if(3075==r.j)var h=r(98403);if(3075==r.j)var g=r(93508);if(3075==r.j)var f=r(16118);if(3075==r.j)var y=r(76974);if(3075==r.j)var v=r(50628);if(3075==r.j)var b=r(17343);if(3075==r.j)var w=r(60797);if(3075==r.j)var x=r(2834);if(3075==r.j)var I=r(25975);class S{constructor(e,t,r,y,v,b,w,x=I.v.WithSuccess.State.isInSuccess(y),S){this._state=e,this._documentModel=t,this._trackSuccessStateChanged=r,this._capabilities=y,this.nonPriorityOptions=v,this.mutedAlertsOptions=b,this.hasNonPriorityAlerts=w,this.isInSuccess=x,this._withBirthday=S,this._getTextAmount=e=>0===e?i.TextAmount.zero:e<=a.hD?i.TextAmount.small:i.TextAmount.large,this._subs=[],this.textAmount=o.h.create(this._getTextAmount(this._documentModel.documentLength.get().trimmed)),this.actionEvents=new u.xQ,this.applicatorEffects={id:"successViewModel.effects",when:l.R.isWithAlertsId,what:c.nL.Effect.Applicator.create(this.actionEvents.pipe(d.h((({type:e})=>e===i.ActionType.More)),p.U((()=>e=>{const t=e.patch({currentLens:c.nL.hasItems(e)&&(0,c.yi)(e.currentLens)?this._capabilities.toggleNonPriorityList("expanded")(e.currentLens):e.currentLens});return(0,n.pipe)(c.nL.hasItems(t)?this._capabilities.findFirstAlert(t.currentLens):s.none,s.fold((()=>t),(e=>t.patch({currentLens:c.nL.hasItems(t)?this._capabilities.selectItemByAlert(e)(t.currentLens):t.currentLens}))))}))))},this._currentLens=this._state.view((e=>({isSuccess:this.isInSuccess(e),type:e.currentLens.type,nonPriorityAlertsLeft:c.nL.isLensview(e)&&c.nL.hasItems(e)&&0!==this._capabilities.getActiveAlertsCount(e.currentLens),isAllAlerts:l.R.isMainLens(e.currentLens.id)}))),this._listenTextSize=()=>this._currentLens.view((e=>e.isSuccess)).pipe(m.w(h.Ft(this._documentModel.documentLength.view("trimmed"))),p.U(this._getTextAmount)).subscribe(h.wW(this.textAmount)),this._lensSwitch=this._currentLens.pipe(g.O(this._currentLens.get()),f.G(),p.U((([e,t])=>t.isSuccess?s.some({prevLensType:e.type,nonPriorityAlertsLeft:t.nonPriorityAlertsLeft,isAllAlerts:t.isAllAlerts}):s.none))),this._textAmountToSuccessType=e=>e===i.TextAmount.zero?{type:i.SuccessType.zero,showBirthday:this._withBirthday.get()}:e===i.TextAmount.large?{type:i.SuccessType.large}:{type:i.SuccessType.small},this.successState=o.h.create({type:i.SuccessType.zero,showBirthday:this._withBirthday.get()}),this._subs.push(this._listenTextSize(),this._listenSuccessStateChange()),this.priorityList=(0,n.pipe)(v,s.map((e=>({hasNonPriorityAlerts:this._state.view(w),reviewNonPriorityAlerts:()=>{e.trackNonPriorityToggle(),this.actionEvents.next({type:i.ActionType.More})}})))),this.mutedAlerts=(0,n.pipe)(b,s.map((()=>({reviewMutedSuggestions:()=>{},mutedSuggestionsCount:this._state.view((e=>e.currentLens.meta.mutedCount))}))))}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_listenSuccessStateChange(){const e=e=>e.type===i.SuccessType.applied||e.type===i.SuccessType.zero?y.of(e):this._documentModel.checkingState.pipe(d.h((e=>"checking"!==e)),v.P(),b.h(e));return this._lensSwitch.pipe(w.cp((t=>this.textAmount.pipe(p.U(this._textAmountToSuccessType),g.O(t.prevLensType===c.Nm.lensview?{type:i.SuccessType.applied,nonPriorityAlertsLeft:t.nonPriorityAlertsLeft,isAllAlerts:t.isAllAlerts}:this._textAmountToSuccessType(this.textAmount.get())),f.G(),p.U((([e,t])=>e.type===i.SuccessType.applied&&t.type!==i.SuccessType.zero?e:t)),m.w(((t,r)=>0===r?y.of(t):e(t))),x.b((e=>{this._trackSuccessStateChanged(e.type===i.SuccessType.applied?"applied":e.type===i.SuccessType.zero?"nothingToCheck":"noIssues")})))))).subscribe(h.wW(this.successState))}}!function(e){let t,r,n;!function(e){e.More="More"}(t=e.ActionType||(e.ActionType={})),function(e){e.zero="zero",e.small="small",e.large="large"}(r=e.TextAmount||(e.TextAmount={})),function(e){e.zero="zero",e.small="small",e.large="large",e.applied="applied",e.premiumOnboardingStart="premiumOnboardingStart",e.premiumOnboardingComplete="premiumOnboardingComplete"}(n=e.SuccessType||(e.SuccessType={}));e.Mock=class{constructor(){this.textAmount=o.h.create(r.zero),this.successState=o.h.create({type:n.zero,showBirthday:!1}),this.mutedSuggestionsCount=o.h.create(0),this.hasNonPriorityAlerts=o.h.create(!1)}reviewMutedSuggestions(){throw new Error("Method not implemented.")}reviewNonPriorityAlerts(){throw new Error("Method not implemented.")}dispose(){throw new Error("Method not implemented.")}}}(i||(i={}))},18955:(e,t,r)=>{r.d(t,{d:()=>k});var n=r(27378),i=r(5739),o=r(38983),a=r(5114),s=r(19962),l=r(81531),c=r(46680),u=r(74238),d=r(9922),p=r(77176),m=r(24209),h=r(18625),g=r(66310),f=r(40151),y=r(85089),v=r(2834),b=r(49708),w=r(93508),x=r(17343),I=r(98403),S=r(76974),C=r(19751),E=r(67434),A=r(57091);class k extends n.Component{constructor(){super(...arguments),this._log=l.C8.Logging.getLogger("CardsListConnectorView",c.i.DEBUG),this._subs=new d.w.Keeper}componentDidMount(){!0===this.props.isMaster&&this._setMaster()}componentDidUpdate(e){const t=this.props.name;this._log.debug("lensview did update",{wasMaster:e.isMaster,nowMaster:this.props.isMaster,name:t}),!0===this.props.isMaster?!1===e.isMaster?(this._log.info("reuse released view",t),this.forceUpdate((()=>{this._setMaster(),this._log.trace("view force update complete",t)}))):(this._log.trace("set master view",t),this._setMaster()):(this._log.trace("release master view",t),this._clearSubs())}componentWillUnmount(){this._clearSubs()}render(){const{className:e,children:t,height:r}=this.props;return n.createElement(i.F.div,{"data-purpose":"card-list-connector",style:r.pipe(p.U((e=>({height:e})))),className:e},t)}_setMaster(){this._setSubs()}_setSubs(){this._clearSubs(),this._subs.push(this.props.stateSyncListener.subscribe())}_clearSubs(){this._subs.dispose()}}!function(e){let t;!function(e){e.create=()=>o.h.create({scrollProvider:a.none,scrollConsumer:a.none,viewport:a.none,title:a.none})}(t=e.Elements||(e.Elements={})),e.boundedScrollListener=(e,t)=>m.T(h.P((()=>{e.paddingTop.set(0)})),t.view("viewport").pipe(g.w(a.fold((()=>f.E),(e=>y.YC(e).pipe(p.U((t=>Object.assign(Object.assign({},t),{top:e.offsetTop,height:e.offsetHeight}))))))),v.b((t=>e.viewport.set({top:u.r.FromWindowTop.ISO.wrap(t.top),height:t.height})))),t.view("scrollProvider").pipe(g.w(a.fold((()=>f.E),(t=>b.R(t,"scroll").pipe(p.U((()=>t.scrollTop)),w.O(t.scrollTop),v.b((t=>e.scrollTop.set(t))),x.h(I.PU)))))),t.view("title").pipe(g.w(a.fold((()=>S.of(s.UL.empty)),(e=>y.YC(e)))),p.U((e=>e.height)),C.shareReplay({bufferSize:1,refCount:!0}),v.b((t=>e.paddingTop.set(t)))),t.view("scrollConsumer").pipe(g.w(a.fold((()=>f.E),(t=>e.scrollOffset.pipe(v.b((e=>{t.scrollTop+=e})))))))).pipe(x.h(void 0)),e.superScrollListener=(e,t)=>{const r=t.view("title").pipe(g.w(a.fold((()=>S.of(s.UL.empty)),(e=>y.YC(e)))),p.U((e=>e.height)),C.shareReplay({bufferSize:1,refCount:!0}));return m.T(h.P((()=>{e.paddingTop.set(0)})),t.view("viewport").pipe(g.w(a.fold((()=>f.E),(e=>y.YC(e).pipe(p.U((t=>Object.assign(Object.assign({},t),{top:e.offsetTop,height:e.offsetHeight}))))))),v.b((t=>e.viewport.set({top:u.r.FromWindowTop.ISO.wrap(t.top),height:t.height})))),t.view("scrollProvider").pipe(g.w(a.fold((()=>f.E),(t=>b.R(t,"scroll").pipe(p.U((()=>t.scrollTop)),w.O(t.scrollTop),v.b((t=>e.scrollTop.set(t))),x.h(I.PU)))))),t.view("scrollConsumer").pipe(g.w(a.fold((()=>f.E),(t=>e.scrollOffset.pipe(E.R(((e,t)=>e-t),0),v.b((e=>{t.style.transform=`translateY(${e}px)`})))))),A.a(r),v.b((([t,r])=>e.paddingTop.set(t+r))))).pipe(x.h(void 0))}}(k||(k={}))},4948:(e,t,r)=>{r.d(t,{J:()=>c});var n=r(27378),i=r(44060),o=r(89894),a=r(40219);if(3075==r.j)var s=r(64757);var l=r(94632);const c=e=>n.createElement(s.zx.Animated,Object.assign({},(0,s.L_)(e,p.gray))),u={position:"relative",display:"inline-block",overflow:"hidden",outline:"none",border:0,verticalAlign:"middle",whiteSpace:"nowrap",cursor:"default",userSelect:"none",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{cursor:"pointer"}}},d={overflow:"hidden",padding:`0 ${o.ux.rem(.5)}`,borderRadius:o.ux.rem(a.fx),backgroundColor:i.Il.CoreNeutral60,color:i.Il.CoreNeutral0,textTransform:"none",letterSpacing:o.ux.rem(i.xv.ButtonLetterSpacing),fontSize:o.ux.rem(i.xv.ButtonSize),lineHeight:o.ux.rem(i.xv.ButtonLineHeight),transitionDuration:o.ux.seconds(.2),$nest:{"&[data-active='true'] > i[role='icon'] > svg, &:not([data-disabled='true']):hover > i[role='icon'] > svg, &:not([data-disabled='true'])[data-hovered='true'] > i[role='icon'] > svg":{fill:i.Il.CoreNeutral0},"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:i.Il.CoreNeutral50,color:i.Il.CoreNeutral0},"&:not([data-disabled='true'])[data-active='true']":{backgroundColor:i.Il.CoreNeutral50,color:i.Il.CoreNeutral0,$nest:{"&:hover":{backgroundColor:i.Il.CoreNeutral50,color:i.Il.CoreNeutral0}}},"&[data-disabled='true']":{backgroundColor:i.Il.CoreNeutral60,color:i.Il.CoreNeutral50},[`.${l.vD} &`]:{padding:`0 ${o.ux.rem(.5)}`,marginRight:o.ux.px(2),borderRadius:0,backgroundColor:i.Il.CoreNeutral60,$nest:{"&:first-child":{borderRadius:`${o.ux.rem(a.fx)} 0 0 ${o.ux.rem(a.fx)}`},"&:last-child":{marginRight:0,borderRight:"none",borderRadius:`0 ${o.ux.rem(a.fx)} ${o.ux.rem(a.fx)} 0`},"&[data-active='true']":{backgroundColor:i.Il.CoreBlue50,color:i.Il.CoreNeutral0,$nest:{"&:hover":{backgroundColor:i.Il.CoreBlue40,color:i.Il.CoreNeutral0}}}}}}},p=o.ux.stylesheet({button:[u],gray:[u,d]})},30543:(e,t,r)=>{r.d(t,{s:()=>N});var n,i,o=r(27378),a=r(5739),s=r(22232),l=r(44060),c=r(35407),u=r(88056),d=r(76024),p=r(19429),m=r(59312),h=r(95195),g=r(69243),f=r(22714);!function(e){e.prod="prod",e.preprod="preprod",e.qa="qa",e.fb="fb",e.dev="dev"}(n||(n={})),function(e){e.american="american",e.british="british",e.canadian="canadian",e.australian="australian"}(i||(i={}));var y,v=g.mM({".grammarly.com":null,".ppgr.io":null,".qagr.io":null}),b=(0,m.ev)((0,m.ev)([],Object.keys(v.keys),!0),["grammarly.io","sumologic.com","microsoft.com","office.com","apple.com","google.com","mozilla.org","mozilla.net","outlook.live.com","127.0.0.1"],!1).map((function(e){return e.startsWith(".")?e.slice(1):e})),w=g.G0([g.dt({state:g.i0("disabled")}),g.dt({state:g.i0("enabled")}),g.dt({state:g.i0("test")})]),x=(g.dt({version:g.Z_}),new g.Dy("HttpString",g.Z_.is,(function(e,t){return h.wE.chain(g.Z_.validate(e,t),(function(r){return/^(https?|wss?):\/\/(\w|\d|-|\/|\.|\?|\=|\_|\&)+(:(\d)+)?$/.test(r)?g.Vp(r):g.Rn(e,t,"URL parsing failed (".concat(r,")"))}))}),String)),I=new g.Dy("MsStoreUrlString",g.Z_.is,(function(e,t){return h.wE.chain(g.Z_.validate(e,t),(function(r){return/ms-windows-store:\/\/(\w|\d|-|\/|\.|\?|\=|\_|\&)+(:(\d)+)?$/.test(r)?g.Vp(r):g.Rn(e,t,"Edge URL parsing failed (".concat(r,")"))}))}),String),S=new g.Dy("AllowedHttpString",x.is,(function(e,t){return h.wE.chain(x.validate(e,t),(function(r){for(var n=r.split("//")[1].split("/")[0].split(":")[0],i=0,o=b;i<o.length;i++){var a=o[i];if(n.endsWith(a))return g.Vp(r)}var s="Domain (".concat(n,") is not allowed in ").concat(b.join(", "));return g.Rn(e,t,s)}))}),x.encode),C=g.mM({TRACE:null,DEBUG:null,INFO:null,WARN:null,ERROR:null,FATAL:null,OFF:null}),E=(g.r$({env:f.D.createStringEnum(n,"Environment"),logLevel:C,accumulateCrashLogLevel:C,sendCrashOnLogLevel:C,collectLogs:g.O7,collectCrashLogs:g.O7,copyLogsToConsole:g.O7,crashLogsCacheSize:g.pk,debugLogsCacheSize:g.pk,tracking:w,alertCache:g.r$({prefix:g.Z_,version:g.Z_}),mutedCategoriesCache:g.r$({prefix:g.Z_,version:g.Z_}),outcomeScoreCache:g.r$({prefix:g.Z_,version:g.Z_}),userSettingsPrefix:g.Z_,userSettingsVersion:g.Z_,defaultDialect:f.D.createStringEnum(i,"DialectEnum"),notificationShowTimeMs:g.pk,maxNotificationsOnTheScreen:g.pk,selfUpdate:g.r$({versionCheckInterval:g.pk,selfUpdateDelay:g.pk,canReloadCheckInterval:g.pk,blockingModalAutoReloadDelay:g.pk,retryFailedVersionCheckInterval:g.pk,retryFailedVersionCheckLimit:g.pk,debugBuildVersion:g.Z_,versionFilePath:g.Z_}),pingMaybeGnarDelay:g.pk,domains:g.r$({cookie:v,localServer:g.Z_}),api:g.r$({analyticsUrl:S,analyticsPrivateUrl:S,authUrl:S,institutionUrl:S,snippetsUrl:S,clientControlsUrl:S,institutionAdminUrl:S,institutionAnalyticsUrl:S,institutionMembersUrl:S,institutionInviteesUrl:S,institutionGroupsUrl:S,institutionTonesUrl:S,institutionVaultUrl:S,profileTonesUrl:S,tonesUrl:S,dapiUrl:S,doxUrl:S,doxWsUrl:S,irbisUrl:S,subscriptionUrl:S,discountUrl:S,dataReportUrl:S,capiWsUrl:S,capiApiUrl:S,gnarApi:g.r$({url:S}),felogUrl:S,felogDebugUrl:S,sumoUrl:S,crashLogUrl:S,onlineTestUrl:g.Z_,wsTest:S,proofitResultUrl:S,redirect:S,mailApiUrl:S,ssoUrl:S,scimUrl:S,workspaceUrl:S,voxWorkspaceUrl:S,voxInstitutionUrl:S,writingStylesUrl:S,writingStyleProfilesUrl:S,appsUrl:S,tokensUrl:S}),app:g.r$({nameWeb:g.Z_,nameDesktop:g.Z_}),urls:g.r$({free:g.Z_,account:S}),onlineEditor:g.r$({docId:S}),external:g.r$({gmail:S,gDocs:S,outlook:S}),funnel:g.r$({base:S,resetPassword:S,accountDeleted:S,businessLanding:S,businessStyleguideLanding:S,businessUpgradeLanding:S,subscribe:S,upgrade:S,plans:S,signin:S,socialSignin:S,signup:S,mainPage:S,deleteSocialAccount:S,subscriptionCancellationSurvey:S,keyboardInstall:S,desktopAppInstall:S,claimedUserJoinFallback:S,userTrustGuidelines:S,llamaServiceDownload:S,tour:S,facebookTour:S,gDocsTour:S,gmailTour:S,canvasTour:S,linkedInTour:S,outlookTour:S,slackTour:S}),desktop:g.r$({windows:g.r$({installURL:S,infoURL:S}),mac:g.r$({installURL:S,infoURL:S})}),llama:g.r$({windows:S,mac:S}),mobileApp:g.r$({android:S,iOS:S}),extension:g.r$({autoCitations:g.r$({demoPageUrl:g.Z_}),chrome:g.r$({installURL:S,infoURL:S}),firefox:g.r$({installURL:S,infoURL:S}),safari:g.r$({installURL:S}),edge:g.r$({installURL:I,infoURL:S}),edgeChromium:g.r$({installURL:S})}),edu:g.r$({adminPanelURL:S}),support:g.r$({login:S,email:g.Z_,mainPage:S,newRequest:S,contact:S,connectionTroubleshooting:S,emailExistsKBUrl:S,safariDownloadFilesKBUrl:S,rtfCompatibilityUrl:S,diagnosticTestPath:g.Z_,documentAcceptTrackedChanges:S,introducingGrammarlyEditor:S}),privacyPolicy:S,termsOfService:S,account:g.r$({customize:S,subscription:S,adminSubscription:S,members:S,styleGuide:S,writingStyle:S,suggestions:S,writingProgress:S}),preconnectLinks:g.IX(x),ideas:g.r$({galleryURL:S})}),p.VF((function(){return{env:n.prod,logLevel:"INFO",accumulateCrashLogLevel:"DEBUG",sendCrashOnLogLevel:"ERROR",collectLogs:!0,collectCrashLogs:!0,copyLogsToConsole:!1,crashLogsCacheSize:100,debugLogsCacheSize:100,tracking:{state:"enabled"},alertCache:{prefix:"editorTsAlertCache",version:"4"},mutedCategoriesCache:{prefix:"mutedCategoriesCache",version:"0"},outcomeScoreCache:{prefix:"scoreCache",version:"0"},userSettingsPrefix:"userSettings",userSettingsVersion:"1",defaultDialect:i.american,notificationShowTimeMs:7e3,maxNotificationsOnTheScreen:3,selfUpdate:{versionCheckInterval:59*d.wn,selfUpdateDelay:12*d.p7,canReloadCheckInterval:5*d.cK,blockingModalAutoReloadDelay:1*d.wn,retryFailedVersionCheckInterval:5*d.wn,retryFailedVersionCheckLimit:20,debugBuildVersion:"auto",versionFilePath:"/version.json"},pingMaybeGnarDelay:1*d.p7,domains:{cookie:".grammarly.com",localServer:"denali-local.grammarly.com"},api:{authUrl:"https://auth.grammarly.com/v3",institutionUrl:"https://goldengate.grammarly.com/institution/api",snippetsUrl:"https://goldengate.ppgr.io/snippets/v1/snippets",clientControlsUrl:"https://goldengate.grammarly.com/client-controls",institutionAdminUrl:"https://goldengate.grammarly.com/institution/api/institution/admin",institutionMembersUrl:"https://goldengate.grammarly.com/institution/api/institution/members",institutionInviteesUrl:"https://goldengate.grammarly.com/institution/api/institution/invitees",institutionGroupsUrl:"https://goldengate.grammarly.com/institution/api/groups",institutionVaultUrl:"https://goldengate.grammarly.com/institution/api/vault",analyticsUrl:"https://goldengate.grammarly.com/analytics/api/institution/statistics",analyticsPrivateUrl:"https://analytics.grammarly.com/private/api",institutionAnalyticsUrl:"https://goldengate.grammarly.com/institution/public/api/institution/statistics",institutionTonesUrl:"https://goldengate.grammarly.com/brand-tones/v1",profileTonesUrl:"https://goldengate.grammarly.com/brand-tones/v1",tonesUrl:"https://goldengate.ppgr.io/brand-tones/v1",dapiUrl:"https://data.grammarly.com",doxUrl:"https://dox.grammarly.com",doxWsUrl:"wss://dox.grammarly.com",irbisUrl:"https://irbis.grammarly.com",subscriptionUrl:"https://subscription.grammarly.com/api/v1",discountUrl:"https://irbis.grammarly.com/api/discounts",dataReportUrl:"https://datareport.grammarly.com",capiWsUrl:"wss://capi.grammarly.com/freews",capiApiUrl:"https://capi.grammarly.com/api",gnarApi:{url:"https://gnar.grammarly.com"},felogUrl:"https://f-log-editor.grammarly.io",felogDebugUrl:"https://f-log-editor-debug.grammarly.io",sumoUrl:"https://endpoint2.collection.us2.sumologic.com/receiver/v1/http/ZaVnC4dhaV0Bxac28IqT2frgzsjX7HEotu8EZEZr07YE9RWLCzrOMGwzO9aL6c_iSiidkEplFOod2igKIxz_7s2CHlXc2u-XuLpetEBK1fV6xjfN2Sw2gA==",crashLogUrl:"https://f-log-editor.grammarly.io/crash",onlineTestUrl:"/online-test.json",wsTest:"wss://wstest.grammarly.com",proofitResultUrl:"https://dox.grammarly.com/documents/_docId_/proofread",redirect:"https://redirect.grammarly.com/redirect",mailApiUrl:"https://g-mail.grammarly.com",ssoUrl:"https://sso.grammarly.com",scimUrl:"https://goldengate.grammarly.com/auth/api/token/scim",workspaceUrl:"https://goldengate.grammarly.com/workspace",voxWorkspaceUrl:"https://goldengate.grammarly.com/vox/v1/workspace",voxInstitutionUrl:"https://goldengate.grammarly.com/vox/v1/institution",writingStylesUrl:"https://goldengate.grammarly.com/writingstyle",writingStyleProfilesUrl:"https://goldengate.grammarly.com/writing-style",appsUrl:"https://apps.grammarly.com",tokensUrl:"https://tokens.grammarly.com"},app:{nameWeb:"editor",nameDesktop:"desktopEditor"},urls:{free:"/free",account:"https://account.grammarly.com"},onlineEditor:{docId:"https://app.grammarly.com/ddocs/"},external:{gmail:"https://mail.google.com/",gDocs:"https://docs.google.com",outlook:"https://outlook.live.com/mail"},funnel:{base:"https://www.grammarly.com",resetPassword:"https://www.grammarly.com/resetpassword",accountDeleted:"https://www.grammarly.com/account-deleted",businessLanding:"https://www.grammarly.com/business/e",businessStyleguideLanding:"https://www.grammarly.com/business/styleguide",businessUpgradeLanding:"https://www.grammarly.com/upgrade/business/try",subscribe:"https://www.grammarly.com/subscribe",upgrade:"https://www.grammarly.com/upgrade",plans:"https://www.grammarly.com/plans",signin:"https://www.grammarly.com/signin",socialSignin:"https://www.grammarly.com/signin/app",signup:"https://www.grammarly.com/signup",mainPage:"https://www.grammarly.com/",deleteSocialAccount:"https://www.grammarly.com/social/delete-account",subscriptionCancellationSurvey:"https://www.grammarly.com/subscription-cancellation-survey",keyboardInstall:"https://www.grammarly.com/keyboard",desktopAppInstall:"https://www.grammarly.com/native",claimedUserJoinFallback:"https://redirect.grammarly.com/redirect?business_join=1",userTrustGuidelines:"https://www.grammarly.com/trust",llamaServiceDownload:"https://www.grammarly.com/service/download",tour:"https://www.grammarly.com/tour",facebookTour:"https://www.grammarly.com/tour-facebook",gDocsTour:"https://www.grammarly.com/tour-gdocs",gmailTour:"https://www.grammarly.com/tour-gmail",canvasTour:"https://grammarly.com/tour-canvas",linkedInTour:"https://grammarly.com/tour-linkedin",outlookTour:"https://grammarly.com/tour-outlook",slackTour:"https://grammarly.com/tour-slack"},desktop:{windows:{installURL:"https://download-editor.grammarly.com/windows/GrammarlyEditor.exe",infoURL:"https://www.grammarly.com/native/windows"},mac:{installURL:"https://download-editor.grammarly.com/osx/GrammarlyEditor.dmg",infoURL:"https://www.grammarly.com/native/mac"}},llama:{windows:"https://download-windows.grammarly.com/GrammarlyInstaller.exe",mac:"https://download-mac.grammarly.com/Grammarly.dmg"},mobileApp:{android:"https://play.google.com/store/apps/details?id=com.grammarly.android.keyboard",iOS:"https://apps.apple.com/us/app/grammarly-grammar-keyboard/id1158877342"},extension:{autoCitations:{demoPageUrl:"https://www.sciencedirect.com/science/article/abs/pii/S0885200618300826"},chrome:{installURL:"https://chrome.google.com/webstore/detail/kbfnbcaeplbcioakkpcpgfkobkghlhen",infoURL:"https://chrome.google.com/webstore/detail/grammarly-spell-checker-g/kbfnbcaeplbcioakkpcpgfkobkghlhen?hl=en"},firefox:{installURL:"https://addons.mozilla.org/firefox/downloads/latest/566314/addon-566314-latest.xpi",infoURL:"https://addons.mozilla.org/en-US/firefox/addon/grammarly-1/"},safari:{installURL:"https://apps.apple.com/us/app/grammarly-for-safari/id1462114288?ls=1&mt=12"},edge:{installURL:"ms-windows-store://pdp?ProductId=9p59wxtbhzzm",infoURL:"https://www.microsoft.com/en-us/store/p/grammarly-for-microsoft-edge/9p59wxtbhzzm?rtc=1"},edgeChromium:{installURL:"https://microsoftedge.microsoft.com/addons/detail/grammarly-for-microsoft-e/cnlefmmeadmemmdciolhbnfeacpdfbkd"}},edu:{adminPanelURL:"https://account.grammarly.com/admin"},support:{login:"https://support.grammarly.com/login",email:"support@grammarly.com",mainPage:"https://support.grammarly.com/",newRequest:"https://support.grammarly.com/hc/en-us/requests/new",contact:"https://www.grammarly.com/contact",connectionTroubleshooting:"https://support.grammarly.com/hc/en-us/articles/115000090271-Network-configuration-blocks-Grammarly-services",emailExistsKBUrl:"https://support.grammarly.com/hc/en-us/articles/115000090791-Changing-your-email-to-an-email-that-already-exists",safariDownloadFilesKBUrl:"https://support.grammarly.com/hc/en-us/articles/360001105952",rtfCompatibilityUrl:"https://support.grammarly.com/hc/en-us/articles/115000091512-Preserve-text-formatting",diagnosticTestPath:"/diagnostic-test?origin=editor",documentAcceptTrackedChanges:"https://support.office.com/en-us/article/Accept-tracked-changes-4838d24c-d5d1-4c6c-8e39-78b44bd2b4cc",introducingGrammarlyEditor:"https://support.grammarly.com/hc/en-us/articles/360003474732-Introducing-the-Grammarly-Editor"},privacyPolicy:"https://www.grammarly.com/privacy-policy",termsOfService:"https://www.grammarly.com/terms",account:{customize:"https://redirect.grammarly.com/redirect?profile_dictionary=1",subscription:"https://account.grammarly.com/subscription",adminSubscription:"https://account.grammarly.com/admin/subscription",members:"https://account.grammarly.com/admin/members",styleGuide:"https://account.grammarly.com/admin/style-guide",writingStyle:"https://account.grammarly.com/admin/style-guide-writing-style",suggestions:"https://redirect.grammarly.com/redirect?profile_suggestions=1",writingProgress:"https://account.grammarly.com/writing-progress"},preconnectLinks:["https://data.grammarly.com","https://gnar.grammarly.com","https://subscription.grammarly.com","https://auth.grammarly.com","https://f-log-editor.grammarly.com","https://static.institution.grammarly.com"],ideas:{galleryURL:"https://app.grammarly.com/ideas/sales"}}})));!function(e){e.createFromPlatformConfig=c.Pj(E),e.Context=o.createContext(u.Y.invariantContent("PlatformConfig"))}(y||(y={}));var A=r(81531),k=r(89894),M=r(41572),T=r(64757),_=r(50790),L=r(4948);var N;!function(e){e.UnauthorizedError=({action:e})=>o.createElement(_.DI.TitledContent,{title:"You've Been Logged Out"},"This occurs due to inactivity or logging out on another device.",o.createElement("br",null),o.createElement(L.J,{name:"login",className:U.footerLink,onClick:e},"Log Back In")),e.Offline=({reconnect:e,reconnectTime:t})=>o.createElement(_.DI.TitledContent,{title:"Lost Connection"},"Your Internet session was interrupted. We’ll try to reconnect you in"," ",o.createElement(a.F.span,null,t.view((e=>e)))," seconds.",o.createElement("br",null),o.createElement(L.J,{name:"reconnect",className:U.footerLink,onClick:e},"Reconnect Now")),e.ServerError=()=>{const t=e.withReload(L.J,"UnknownConnectionError");return o.createElement(_.DI.TitledContent,{title:"Sorry, Unexpected Issue"},"A small error has occurred, causing an interruption of service.",o.createElement("br",null),o.createElement(t,{name:"reload-page",className:U.footerLink},"Reload This Page"))},e.ConnectionWSError=()=>{const e=o.useContext(y.Context);return o.createElement(_.DI.TitledContent,{title:"Can’t Connect to Grammarly"},"Your network configuration currently blocks Grammarly services on this computer. ",o.createElement("br",null),o.createElement(L.J,{name:"troubleshoot",className:U.footerLink,href:e.support.diagnosticTestPath,target:"_blank"},"Troubleshoot This Issue"))},e.ClientConnectionError=()=>{const t=e.withReload(L.J,"ClientConnectionErrorNotification");return o.createElement(_.DI.TitledContent,{title:"Your Internet Connection Is Unstable"},"Please check your network stability and then reload this page.",o.createElement("br",null),o.createElement(t,{name:"reload-page",className:U.footerLink},"Reload Page Now"))},e.DocumentNotFoundError=({navigateToDocuments:e})=>o.createElement(_.DI.TitledContent,{title:"Can’t find this document"},"It looks like this document was removed or URL is incorrect.",o.createElement("br",null),o.createElement(L.J,{name:"goto-docs",className:U.footerLink,onClick:e},"Go to your documents")),e.SelfUpdate=()=>{const t=o.useContext(M.m.Context),r=e.withReload(T.zx,"SelfUpdateBlocker");return o.createElement(_.DI.TitledContent,{title:"Grammarly needs to refresh this page"},"Don't worry - your documents have already been saved. Please"," ",o.createElement(r,{name:"reload-page",className:U.link},"reload")," ","the page ",t.hotkeyLabelR,".")},e.DesktopHardUpdate=({reloadMethod:e})=>{const t=o.useContext(M.m.Context).desktopUpdate;return o.createElement(_.DI.TitledContent,{title:t.hardTitle},t.hard,o.createElement("br",null),o.createElement(L.J,{name:"reload-desktop",className:U.footerLink,onClick:e},t.reload))},e.DesktopHardDownload=({downloadMethod:e})=>{const t=o.useContext(M.m.Context).desktopUpdate;return o.createElement(_.DI.TitledContent,{title:t.hardTitle},t.hard,o.createElement("br",null),o.createElement(L.J,{name:"download-desktop",className:U.footerLink,onClick:e},t.download))},e.SlowNetworkError=()=>o.createElement(_.DI.TitledContent,{title:"Your Internet Connection Is Unstable"},"Grammarly may work slower than normal."),e.CheckingIsDownError=()=>o.createElement(_.DI.TitledContent,{title:"Text Checking Is Temporarily Unavailable"},"Grammarly is unable to check your text for errors at this time. We’re working to resolve the issue. Please check back soon."),e.Error=()=>{const e=o.useContext(y.Context);return o.createElement(_.DI.TitledContent,{title:"Sorry, Something Went Wrong"},"Please try again later or"," ",o.createElement(T.zx,{name:"support",className:U.link,href:e.support.login,target:"_blank"},"contact support")," ","now to report the issue.")},e.ProofitPaymentDeclinedError=({paymentMethod:e,navigateToSubscription:t})=>{const r=o.useContext(M.m.Context).proofitPayment,n=function(e,t,r){switch(e){case"creditCard":return t;case"payPal":return r;default:const n=`Unknown payment method: ${e}`;throw A.C8.Logging.getLogger("ProofitView").warn(n),new Error(n)}}(e,r.creditCard,r.payPal);return o.createElement(_.DI.TitledContent,{title:"Order can not be processed"},o.createElement("div",null,n),"Please update your credit card information in the Manage Subscription section.",o.createElement("br",null),o.createElement(L.J,{name:"manage-subscription",className:U.footerLink,onClick:t},"Go to Manage Subscription"))},e.PaymentSuccessMessage=()=>{const e=o.useContext(M.m.Context).proofitOrderModal.card.paymentSuccess;return o.createElement(_.DI.TitledContent,{title:e.title},o.createElement("div",null,e.message))},e.PaymentErrorMessage=()=>{const e=o.useContext(M.m.Context).proofitOrderModal.card.paymentError,t=o.useContext(y.Context);return o.createElement(_.DI.TitledContent,{title:e.title},o.createElement("div",null,e.message(t.support.login)))},e.ProofitEmptyDocumentError=()=>o.createElement(_.DI.TitledContent,{title:"Document is empty"},"The document you are trying to submit is empty. Please write something and try again."),e.ProofitDocumentProofreadError=({navigateToDocuments:e})=>o.createElement(_.DI.TitledContent,{title:"This document is a recent submission"},"The text you are trying to send for human proofreading was reviewed by our team. Please edit your text or select another document before you re-submit.",o.createElement("br",null),o.createElement(L.J,{name:"goto-docs",className:U.footerLink,onClick:e},"Go to your documents")),e.ProofitComplexInternalStructureError=({navigateToDocuments:e})=>o.createElement(_.DI.TitledContent,{title:"This document cannot be corrected"},"The text you are trying to send for human proofreading has complex internal structure. Please edit your text (e.g., remove significantly long tables) or select another document.",o.createElement("br",null),o.createElement(L.J,{name:"goto-docs",className:U.footerLink,onClick:e},"Go to your documents")),e.withReload=(e,t)=>class extends o.Component{render(){return o.createElement(e,Object.assign({},this.props,{onClick:()=>{try{localStorage.setItem("pageReloadReason",JSON.stringify({source:t,location:self.location.href,timestamp:Date.now()}))}catch(e){}self.location.reload()}}))}},e.CopyToClipboardError=()=>{const e=o.useContext(M.m.Context);return o.createElement(_.DI.TitledContent,{title:"Copying Is Not Supported by Your Browser"},"Please use ",e.hotkeyLabelC," instead.")},e.ProofitCancelled=()=>{const e=o.useContext(y.Context);return o.createElement(_.DI.TitledContent,{title:"Your order has been cancelled"},"Your proofreading order has been cancelled and the payment refunded. Please check your email for more information, or contact"," ",o.createElement(L.J,{name:"support",className:U.footerLink,href:e.support.login,target:"_blank"},"Grammarly support"))},e.ProofitCompleted=({documentTitle:e,documentDownloadUrl:t,email:r})=>o.createElement(_.DI.TitledContent,{title:`${e||"Your"} document has been proofread`},"A version of this document with proofreaders’ marks has been emailed to you at ",r," in .docx format.",o.createElement("br",null),o.createElement(L.J,{name:"download",className:U.footerLink,href:t,target:"_blank"},"Download .docx")),e.DenaliFormattingCompatibility=()=>{const e=o.useContext(M.m.Context),t=o.useContext(y.Context);return o.createElement(_.DI.TitledContent,{title:e.rtfCompatibilityModeNotificationTitle},"To preserve your document’s formatting, Grammarly’s formatting tools are temporarily not available.",o.createElement("br",null),o.createElement(L.J,{name:"support",className:U.footerLink,href:t.support.rtfCompatibilityUrl,target:"_blank"},"Learn more"))},e.DenaliDocumentUploaded=({navigateToDocuments:e})=>{const{denaliDocumentUploadNotification:t}=o.useContext(M.m.Context);return o.createElement(_.DI.TitledContent,{title:t.title},t.text," ",o.createElement(T.zx,{name:"goto-docs",className:U.link,onClick:e},t.link))},e.AlertsNothingFound=()=>o.createElement(_.DI.Content,null,"Grammarly found no critical writing issues in this text. Keep up the great work!"),e.DesktopSoftUpdate=({reloadMethod:e})=>{const t=o.useContext(M.m.Context).desktopUpdate;return o.createElement(_.DI.TitledContent,{title:t.softTitle},t.soft,o.createElement("br",null),o.createElement(L.J,{name:"reload-desktop",className:U.footerLink,onClick:e},t.reload))},e.DesktopSoftDownload=({downloadMethod:e})=>{const t=o.useContext(M.m.Context).desktopUpdate;return o.createElement(_.DI.TitledContent,{title:t.softTitle},t.soft,o.createElement("br",null),o.createElement(L.J,{name:"download-desktop",className:U.footerLink,onClick:e},t.download))},e.DownloadDocumentNotFoundError=()=>{const e=o.useContext(M.m.Context);return o.createElement(_.DI.TitledContent,{"data-name":"document-not-found",title:e.downloadDocumentNotFoundError})},e.ClipboardNotSupported=({hotkey:e})=>{const t=o.useContext(M.m.Context);return o.createElement(_.DI.Content,null,t.hotkeyUnsupported,o.createElement("b",null,e))},e.DocumentSizeExceeded=({os:e,officeAddinUrl:t})=>{const r=o.useContext(M.m.Context).fileSizeExceededNotification;return o.createElement(_.DI.TitledContent,{title:r.title},r.body,"windows"===e&&o.createElement(L.J,{name:"officeAddin",className:U.footerLink,href:t,target:"_blank"},r.link))},e.DocumentUploaded=({navigateToDocument:e})=>{const t=o.useContext(M.m.Context).documentUploaded;return o.createElement(_.DI.Content,null,t.message,o.createElement("br",null),o.createElement(L.J,{name:"goto-doc",className:U.footerLink,onClick:e},t.link))},e.DocumentTypeUnsupported=()=>{const e=o.useContext(M.m.Context);return o.createElement(_.DI.Content,null,"Unsupported file type. ",e.notificationUploadFileText,": Microsoft Word (.doc, .docx), OpenOffice (.odt), TXT and RTF.")},e.DocumentWithTrackedChangesIsUnsupported=({link:e})=>o.createElement(_.DI.Content,null,"Your document contains revisions. Accept all revisions and try uploading again. Click"," ",o.createElement(T.zx,{name:"document-accept-tracked-changes",className:U.link,href:e,target:"_blank"},"here")," ","for details.");const t=(e,t)=>{switch(e){case R.switchToDenali:return t.switchToDenali;case R.feedbackSend:return t.feedbackSend;case R.statisticsError:return t.statisticsError;case R.referenceCopied:return t.referenceCopied;case R.documentCopied:return t.documentCopied;case R.isTemporaryDownloadError:return t.isTemporaryDownloadError;case R.documentUploadGeneralError:return t.documentUploadGeneralError;case R.documentIsEmpty:return t.documentIsEmpty;case R.noFileToUpload:return t.noFileToUpload;case R.oneDocumentIsAllowed:return t.oneDocumentIsAllowed;default:return(0,s.vE)(e)}};e.Generic=({type:e})=>{const r=o.useContext(M.m.Context);return o.createElement(_.DI.TitledContent,{title:t(e,r)})}}(N||(N={}));const O={display:"inline-flex",overflow:"unset",color:l.Il.CoreNeutral0,verticalAlign:"baseline",textDecoration:"underline",fontWeight:"bold",cursor:"pointer"},D={marginTop:k.ux.rem(.5),textDecoration:"none"},U=k.ux.stylesheet({link:[O],footerLink:[O,D]});var R;!function(e){e.switchToDenali="switchToDenali",e.feedbackSend="feedbackSend",e.statisticsError="statisticsError",e.referenceCopied="referenceCopied",e.documentCopied="documentCopied",e.isTemporaryDownloadError="isTemporaryDownloadError",e.documentUploadGeneralError="documentUploadGeneralError",e.documentIsEmpty="documentIsEmpty",e.noFileToUpload="noFileToUpload",e.oneDocumentIsAllowed="oneDocumentIsAllowed"}(R||(R={}))},32380:(e,t,r)=>{r.d(t,{A:()=>v});var n=r(27378),i=r(18208),o=r(44060),a=r(89894),s=r(41572),l=r(61922),c=r(50790),u=r(4948);const d=(e,t)=>{switch(e.kind){case"ignore":return"Dismissed";case"ignoreAll":return n.createElement(n.Fragment,null,n.createElement("span",null,e.alerts)," ",i._6(e.alerts,"alert has been","alerts have been")," dismissed");case"replace":return"Corrected";case"replaceSynonym":return"Replaced";case"replaceTransform":return n.createElement(n.Fragment,null,e.transform);case"addToDictionary":return n.createElement(n.Fragment,null,n.createElement("b",{className:t&&t.addToDictionary},e.word)," has been added to dictionary");case"report":return"Your report has been sent";case"markAsHelpful":return"Marked as “Will address”";case"markAsNotHelpful":return"Marked as “Not helpful”";case"acknowledge":return"Acknowledged";default:return""}},p={display:"flex",marginTop:a.ux.rem(-1.1),marginBottom:a.ux.rem(-.5),alignItems:"center",justifyContent:"space-between"},m={marginTop:a.ux.rem(.6),marginRight:a.ux.rem(1),color:o.Il.CoreNeutral0,flexGrow:0,flexShrink:0},h={marginTop:a.ux.rem(-.25),paddingRight:a.ux.rem(.5),minWidth:"auto",minHeight:"auto",justifyContent:"space-between"},g={marginTop:a.ux.rem(.6),maxWidth:a.ux.rem(14),wordWrap:"break-word",flexBasis:"auto",flexGrow:1},f={marginRight:a.ux.rem(1.4)},y=a.ux.stylesheet({alertUndoWrapper:[p],alertUndoWrapperFlexible:[p,{flexWrap:"nowrap"}],alertUndoWrapperFullWidth:[p,{flexWrap:"wrap"}],alertUndoBtn:[m],alertUndoIcon:[h],alertUndoContent:[g],alertUndoContentFlexible:[g,f],addToDictionary:[{wordBreak:"break-all"}]});var v;!function(e){const t={wrapper:y.alertUndoWrapperFlexible,content:y.alertUndoContent,icon:y.alertUndoIcon,button:y.alertUndoBtn};e.Standard=({action:r,params:i})=>n.createElement(c.DI.Content,null,n.createElement(e.Content,{action:r,content:d(i),theme:Object.assign(Object.assign({},t),{wrapper:y.alertUndoWrapperFullWidth})})),e.Flexible=({notification:r,onClose:i,action:o,params:a})=>n.createElement(c.SJ.Wrapper,{notification:r,onClose:i},n.createElement(c.DI.Content,null,n.createElement(e.Content,{action:o,content:d(a,{addToDictionary:y.addToDictionary}),theme:Object.assign(Object.assign({},t),{wrapper:y.alertUndoWrapperFlexible,content:y.alertUndoContentFlexible})}))),e.Content=({action:e,content:r,theme:i=t})=>{const o=n.useContext(s.m.Context);return n.createElement("div",{className:i.wrapper},n.createElement("div",{className:i.content},r),n.createElement(u.J,{name:"alertUndoButton",className:i.button,onClick:e},n.createElement(l.JO.Undo,{className:i.icon}),o.undo))}}(v||(v={}))},31668:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(22232);var i=function(){function e(t,r){void 0===r&&(r=new URLSearchParams),this.base=t,this.params=r;var i=e._toString(t,r).length;(0,n.kG)(i<e.MAX_URL_LENGTH,"url exceeded length limit",String(i))}return e.prototype.addParams=function(t){var r,n=Object.entries(t).reduce((function(e,t){var r=t[0],n=t[1];return e.append(r,n),e}),(r=this.params,new URLSearchParams(r.toString())));return new e(this.base,n)},e.prototype.toString=function(){return e._toString(this.base,this.params)},e._toString=function(e,t){var r=t.toString();return"".concat(e).concat(r.length?"?".concat(r):"")},e.MAX_URL_LENGTH=2083,e}()},40330:(e,t,r)=>{r.d(t,{JO:()=>h,JX:()=>I,Ki:()=>g,X2:()=>i,XF:()=>y,XJ:()=>p,gO:()=>a,n4:()=>f,sg:()=>o,xv:()=>c,yL:()=>S,zx:()=>m});var n,i,o,a,s,l,c,u,d,p,m,h,g,f,y,v,b,w,x,I,S,C=r(18208),E=r(79880);(n||(n={})).create=function(e,t,r){return{type:"strongAlertRef",alertIds:t,child:e,onEmpty:r,id:I.from("strongAlertRef")}},(i||(i={})).create=function(e,t,r,n){return{type:"row",left:e,right:t,spacing:r,verticalAlign:n,id:I.from("row")}},(o||(o={})).create=function(e){return{type:"column",children:e,id:I.from("column")}},s=a||(a={}),l=s.Type="block",s.create=function(e,t,r){for(var n=arguments.length,i=new Array(n>3?n-3:0),o=3;o<n;o++)i[o-3]=arguments[o];return{type:l,name:S.unknown(e),parts:i,spacing:t,innerSpacing:r,id:I.from(e)}},s.isBlock=function(e){return e.type===l},s.hasOnlyTextParts=function(e){return e.parts.every(c.isText)},function(e){var t=e.Type="text";e.create=function(e,r,n,i,o,a){return{type:t,text:e,size:r,format:n,textColor:i,backgroundColor:o,outlineColor:a,id:I.from(t)}},e.isText=function(e){return e.type===t}}(c||(c={})),(u||(u={})).create=function(e,t){return{label:e,preview:t}},(d||(d={})).create=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return{type:"alternativeChoice",alternatives:t,id:I.from("alternativeChoice")}},(p||(p={})).create=function(e,t){return{type:"viewStack",id:I.from("ViewStack"),views:t,selected:e}},function(e){var t,r=e.Type="button";(t=e.Action||(e.Action={})).isTransitionAction=function(e){return"transition"===e.type},t.isApplyAlternativeAction=function(e){return"applyAlternative"===e.type},t.createSelectAlternativeAction=function(e){return{type:"selectAlternative",alternativeIndex:e}},e.create=function(e,t,n,i,o,s){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:E.jL.Square,u=I.from(e);return{type:r,id:u,name:S.unknown(e),tooltip:o,kind:i,state:E.BN.Enabled,label:{type:a.Type,name:S.unknown(""),parts:[c.create(t,E.yH.Regular,[],E.Il.CoreNeutral0,void 0,void 0)],spacing:s,id:I.from("label-button-"+u)},actions:n,shape:l}},e.createIcon=function(e,t,n,i,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:E.jL.Square,l=I.from(e),c="icon-button-"+e;return{type:r,id:l,name:S.unknown(e),tooltip:o,kind:i,state:E.BN.Enabled,label:{type:a.Type,name:S.unknown(c),spacing:g.create("0","0.25","0","0.25"),parts:[h.create(t,void 0)],id:I.from(c)},actions:n,shape:s}}}(m||(m={})),function(e){var t,r=e.Type="icon";(t=e.Source||(e.Source={})).createKnown=function(e){return{kind:"known",name:e}},t.createUrl=function(e,t,r){return{kind:"url",name:t,url:e,size:r}},e.create=function(e,t){return{type:r,source:e,backgroundColor:t,id:I.from(r)}}}(h||(h={})),(g||(g={})).create=function(e,t,r,n){return{top:e,bottom:r,left:n,right:t}},(f||(f={})).create=function(e,t){return{vertical:t,horizontal:e}},function(e){var t=e.Type="count";e.create=function(e,r){return{type:"count",backgroundColor:r,value:e,id:I.from(t)}}}(y||(y={})),((b=v||(v={})).Choice||(b.Choice={})).create=function(e,t,r){return{type:"sliderChoice",id:I.from("slider-choice-"+t.toLowerCase()),icon:e,label:t,actions:r}},b.create=function(e,t,r){return{type:"slider",segmentSize:e,fillColor:t,choices:r,id:I.from("slider")}},((x=w||(w={})).Choice||(x.Choice={})).create=function(e,t,r,n){return{id:I.from("alternative-slider-choice-"+t.toLowerCase()),icon:e,label:t,actions:r,preview:n}},x.create=function(e,t,r){return{type:"alternativeSlider",segmentSize:e,fillColor:t,choices:r,id:I.from("alternativeSlider")}},(I||(I={})).from=function(e){return e+"#"+C.fg(6)},(S||(S={})).unknown=function(e){return{kind:"unknown",value:e}}},15467:(e,t,r)=>{r.d(t,{_:()=>H});var n=r(29866),i=r(54495),o=r(38983),a=r(9922),s=r(60797),l=r(32952),c=r(16782),u=r(95300),d=r(24209),p=r(77176),m=r(40649),h=r(41398),g=r(93508),f=r(16118),y=r(24713),v=r(85985),b=r(81670),w=r(92843),x=r(8125),I=r(95574),S=r(22232),C=r(83078),E=r(5114),A=r(93756),k=r(95195),M=r(45701),T=r(19429);r(99702),r(69936);new Map;var _=function(e,t){return L(e,(function(e,r){return t(r)}))},L=function(e,t){return(0,i.zG)(e,(r=t,function(e){for(var t,n=new Map,i=e.entries();!(t=i.next()).done;){var o=t.value,a=o[0],s=o[1];r(a,s)&&n.set(a,s)}return n}));var r};var N=r(81531),O=r(46680),D=r(21038),U=r(28811),R=r(31539),P=r(79880),F=r(26393);function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){B(e,t,r[t])}))}return e}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var H=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onFeedRemove=new l.xQ,this._header=new c.t(1),this._feeds=new Map,this._currentCards=o.h.create(R.l.empty),this._feed=new u.X(void 0),this._feedStack=new u.X([]),this._cardIdToFocus=new l.xQ,this._subs=new a.w.Keeper,this._log=N.C8.Logging.getLogger("SDUIFeedManager",O.i.TRACE,O.T.Manager.getColor()),this._forceFeedInternalInfo=new l.xQ,this._changeFeed=function(e){var t=r;r._feed.next(e),(0,i.zG)(e.cards,R.l.applyDiff,T.UI(b.T.recover((function(e){return t._log.error("conflicts on diff apply",e)}))),(function(e){return t._currentCards.modify(e)}))};var n=d.T(this._feedStack.pipe(p.U((function(e){return E.fromNullable(e[e.length-1])})),s.oA,p.U((function(e){return r._getFeedInternalInfo(e.feedId,e.focusedCardId)}))),this._forceFeedInternalInfo),v=d.T(this._feedStack.pipe(m.g("length"),p.U((function(e){return E.fromNullable(e[e.length-1])})),s.oA,p.U((function(e){return r._getFeedInternalInfo(e.feedId,e.focusedCardId)}))),this._forceFeedInternalInfo),x=this._cardIdToFocus.pipe(h.M(this.feed),p.U((function(e){var t=W(e,2),n=t[0],i=t[1];return r._getFeedInternalInfo(i.feedId,D.j.Item.Id.from(n))}))),I=t.pipe(g.O(U.a.empty),f.G(),p.U((function(e){var t=W(e,2),r=t[0],n=t[1];return U.a.diff(r,n)})),p.U((function(e){return r._processSDUIItems(e)})),h.M(n),p.U((function(e){var t=W(e,2),r=t[0],n=t[1],o=n.feedOrd,a=n.feedFilter;return{feedId:n.feedId,cards:(0,i.zG)(r,w.v.filter(a,(function(e,t){return a(t)}),a)),feedOrd:o,itemIdToSelect:E.none}}))),S=d.T(v,x).pipe(h.M(t,this._currentCards),p.U((function(e){var t=W(e,3),r=t[0],n=r.feedOrd,o=r.feedFilter,a=r.feedId,s=r.itemIdToSelect,l=t[1],c=t[2],u=(0,i.zG)(l,R.l.iso.unwrap,(function(e){return(0,i.zG)(e.entries,(t=o,function(e){return _(e,t)}));var t}));return{feedId:a,cards:R.l.diffFromEntries(c.entries,u),feedOrd:n,itemIdToSelect:s}})));this._subs.push(d.T(I,S).subscribe(this._changeFeed)),this._subs.push(v.pipe(y.j("header")).subscribe((function(e){return r._header.next(e)})))}var t,r,L;return t=e,(r=[{key:"header",get:function(){return this._header.asObservable()}},{key:"feed",get:function(){return this._feed.pipe(v.h(x.$K))}},{key:"currentFeed",get:function(){return E.fromNullable(this._feed.getValue())}},{key:"_getFeed",value:function(e){var t=this._feeds.get(e);return void 0===t?k.t$("Cannot switch to feed. Feed with id '".concat(e,"' not found.")):k.F2(t)}},{key:"_getFeedInternalInfo",value:function(e,t){var r=(0,i.zG)(this._getFeed(e),k.UI((function(e){return e.content})),I.MH);return{feedId:e,feedFilter:function(e){var t=$(e.content);return!E.isNone(t)&&r.filtering.reduce((function(e,r){return!1===e?e:(0,i.zG)(t,E.chain((function(e){return E.fromNullable(e[r.property])})),E.fold((function(){return r.condition===P.j2.NotEqualTo}),(function(e){return r.condition===P.j2.EqualTo?e===r.value:e!==r.value})))}),!0)},feedOrd:(0,n.g_)(M.getMonoid())(r.ordering.map((function(e){return(0,i.zG)(M.ordNumber,M.contramap((function(t){return(0,i.zG)($(t),E.chain((function(t){return E.fromNullable(t[e.orderBy])})),E.fold((function(){return Number.MAX_VALUE}),(function(t){return"asc"===e.direction?t:-1*t})))})))}))),itemIdToSelect:E.some(t),header:r.header}}},{key:"pushFeed",value:function(e,t){var r=this;return(0,i.zG)(this._getFeed(e),k.UI((function(){var n=r._feedStack.getValue();return n=n.concat({feedId:e,focusedCardId:t?D.j.Item.Id.from(t):void 0}),r._feedStack.next(n),null})))}},{key:"popFeed",value:function(){var e=this._feedStack.getValue();e.length>1?(e=e.slice(0,e.length-1),this._feedStack.next(e)):this._log.warn("Invoked `popFeed()` when there are less than 2 feeds in the feed stack, this is a no-op.")}},{key:"focusCard",value:function(e){var t=this;return(0,i.zG)(this.currentFeed,k.Yo((function(){return"Cannot focus card when there is no active feed."})),k.UI((function(){return t._cardIdToFocus.next(e),null})))}},{key:"notifyCardFocused",value:function(e){var t=this._feedStack.getValue(),r=t[t.length-1];(0,S.kG)(void 0!==r),t=t.slice(0,t.length-1).concat(G({},r,{focusedCardId:e})),this._feedStack.next(t)}},{key:"_processSDUIItems",value:function(e){var t=this;return w.v.fromMutation((function(r){var n=t;(0,i.zG)(e,w.v.forEach((function(e){if(void 0!==n._feeds.get(e.id)){var t=n;n._feeds.delete(e.id),(0,i.zG)(n.currentFeed,E.filter((function(t){return t.feedId.toString()===e.id.toString()})),C.bw((function(){return t.onFeedRemove.next(e)})))}else r.set(e.id,A.t$(e))}),(function(e,t){if("assistantFeed"===t.content.type){var o=t.content;if(void 0!==n._feeds.get(e.id)){var a=n;n._feeds.set(e.id,G({},t,{content:o})),(0,i.zG)(n.currentFeed,E.filter((function(t){return t.feedId===e.id})),E.map((function(e){return a._header.next(o.header)})))}else n._log.warn("Feed with id '".concat(e.id,"' not found for update"))}else r.set(e.id,A.Hk(e,t))}),(function(e){if("assistantFeed"===e.content.type){var t=e.content;n._feeds.set(e.id,G({},e,{content:t}))}else r.set(e.id,A.F2(e))})))}))}},{key:"dispose",value:function(){this._subs.dispose()}}])&&z(t.prototype,r),L&&z(t,L),e}();function $(e){return(0,i.zG)(F.a.findFirst(e,"assistantCard"),E.chain((function(e){return E.fromNullable(e.properties)})))}},31903:(e,t,r)=>{r.d(t,{Q:()=>l});var n=r(54495),i=r(37492),o=r(51072),a=r(81531);function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._capiSDUIClient=t,this._log=a.C8.Logging.getLogger("SDUIFeedbackServiceImpl")}var t,r,l;return t=e,(r=[{key:"sendUserAction",value:function(e,t){var r=this;(0,n.zG)(this._capiSDUIClient.sendUserAction(e,t),o.Vi,(function(e){return e.catch((function(e){i.EP.isDroppedError(e)?r._log.debug("Stopped listening for sendUserAction message acknowledge",e):i.YG.isNotConnectedError(e)?r._log.warn("Failed to sendUserAction as CAPI was not connected",e):r._log.error("Failed to sendUserAction",e)}))}))}}])&&s(t.prototype,r),l&&s(t,l),e}()},58954:(e,t,r)=>{r.d(t,{p:()=>n});var n,i,o=r(27378),a=r(25186),s=r(54495),l=r(5739),c=r(40151),u=r(28043),d=r(77176),p=r(16027),m=r(15646),h=r(10065),g=r(51935);(i=n||(n={})).ListCard=p.UI.Node.make((function(){return p.UI.mount(p.UI.Node.empty,(function(){return c.E}))})),i.SingleCard=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.k;return p.UI.Node.make((function(t){var r=t.view,n=t.notify,i=r("view");return o.createElement(l.F.Fragment,null,i.pipe(u.x((function(e,t){return e.equals(t)})),d.U((function(t){return o.createElement(g.P,{key:t.id,sduiRootId:t.id,content:t.cardDSL.value,designSystem:e,notify:function(e,r,i){return n({type:m.lY.Type.sduiCardAction,sourceId:e,cardId:t.id,actions:r,scope:i})()},transitions:a.Sb(t.transitions),prevContent:t.prevCardDSL,onAnimationEnd:n({type:m.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}),onMount:s.Q1})}))))}))}},52726:(e,t,r)=>{r.d(t,{p:()=>d});var n=r(54495),i=r(5114),o=r(83078),a=r(16027),s=r(35416),l=r(25975),c=r(76974),u=r(77176);function d(e,t){return a.Z.composeKnot({content:a.Z.fromSideEffect(n.Q1,m(e,t)),root:p()})}var p=function(){return function(){return c.of({})}};function m(e,t){var r=e.view(t.getActiveAlertsCount).view((function(e){return 0===e})),a=e.view(l.v.Prism.getFeedItems());return e.pipe(u.U(s.In.getActiveItem),u.U((function(e){if(i.isNone(e))return{root:"empty",card:{kind:"empty"}};var s=o.MH(e),l=a.get(),c=(0,n.zG)(l.getAt(l.size-1),i.exists((function(e){return e.id===s.id})));return{root:s.id,card:t.viewState(r.get(),c)(s)}})))}},94810:(e,t,r)=>{r.d(t,{c:()=>n});var n,i=r(27378),o=r(5739),a=r(5114),s=r(16027);!function(e){var t,r=function(e){return s.UI.Knot.make(l,{card:e})};!function(e){e.onMount="onMount"}(t=e.ActionsKind||(e.ActionsKind={})),e.assistant=function(e){return s.UI.Knot.make(n,{content:r(e)})};var n=e.AssistantBox=s.UI.Grid.make((function(e){var r=e.notify,n=e.slots;return i.createElement(o.F.div,{id:"assistant-feed-wrapper",mount:function(e){return r({kind:t.onMount,element:a.fromNullable(e)})()}},n.content)}));e.card=r;var l=e.IdProvider=s.UI.Grid.make((function(e){var t=e.slots,r=e.state;return i.createElement(o.F.div,{"data-id":r},t.card)}))}(n||(n={}))},8821:(e,t,r)=>{r.d(t,{N:()=>n});var n,i,o,a=r(25186),s=r(54495),l=r(77176),c=r(60797),u=r(41398),d=r(85985),p=r(5114),m=r(35416),h=r(40330);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}o=n||(n={}),((i=o.PrevNextNavigation||(o.PrevNextNavigation={})).Events||(i.Events={})).fromSduiCardActions=(0,s.ls)(l.U((function(e){var t=(0,s.zG)(e.actions,a.hX(h.zx.Action.isTransitionAction));return e.actions.find((function(e){return"prevCard"===e.type}))?p.some({kind:"prevClicked",transitions:t}):e.actions.find((function(e){return"nextCard"===e.type}))?p.some({kind:"nextClicked",transitions:t}):p.none})),c.oA),i.sideEffect=function(e,t,r){return{id:"SingleCardAssistant.prevNextNavigation",when:m.nL.Effect.When.isSidebarOpen,what:m.nL.Effect.ItemsApplicator.create((0,s.zG)(e,u.M(t.pipe(d.h(m.nL.hasCards))),l.U((function(e){var t=f(e,2),r=t[0],n=t[1];return(0,s.zG)(n.currentLens.cardIndex,p.chain((function(e){return n.currentLens.items.getAt("nextClicked"===r.kind?e+1:e-1)})))})),c.oA,l.U((function(e){return function(t){return m.nL.Prism.getLensWithItems().modify(r.selectItemById(e.id),t)}}))))}}},64998:(e,t,r)=>{r.d(t,{i:()=>n});var n,i,o,a=r(54495),s=r(8125),l=r(95195),c=r(5114),u=r(83078),d=r(81531),p=r(35416),m=r(69111),h=r(26393),g=r(79880);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){y(e,t,r[t])}))}return e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}i=n||(n={}),o=(0,s.HP)(d.C8.Logging.getLogger),(i.DisablePrevNextButtons||(i.DisablePrevNextButtons={})).create=function(e){var t=o("SingleCardAssistant.Transformers.disablePrevNextButtons");return function(r){var n=r.state,i=r.metadata;if(!p.nL.hasItems(n))return t.trace("state has no feed items, returning original state"),l.t$({state:n,metadata:i});var o=n;return(0,a.zG)(o.currentLens.cardIndex,c.chain((function(e){return(0,a.zG)(p.In.getActiveItem(n.currentLens),c.map((function(t){return(0,a.bc)(t,e)})))})),c.map((function(t){var r=b(t,2),i=r[0],a=r[1];return p.nL.Prism.getLensWithItems().modify((function(t){if(!m.e.isSDUIItem(i)||!c.isSome(i.cardDSL))return t;var r=e.clone(i),o=u.MH(r.cardDSL),s=!1,l=h.a.map(o,(function(e){if("button"===e.type&&e.name.value===g.MU.ButtonPrev){var t=0===a?g.BN.Disabled:g.BN.Enabled;return s=s||t!==e.state,v({},e,{state:t})}if("button"===e.type&&e.name.value===g.MU.ButtonNext){var r=a===n.currentLens.items.size-1?g.BN.Disabled:g.BN.Enabled;return s=s||r!==e.state,v({},e,{state:r})}return e}));return c.isSome(l)&&s?(r=Object.assign(r,{cardDSL:l}),v({},t,{items:t.items.add(r)})):t}),o)})),c.getOrElse((function(){return n})),(function(e){return l.t$({state:e,metadata:i})}))}}},60984:(e,t,r)=>{r.d(t,{Q:()=>n});var n,i=r(27378),o=r(16027);(n||(n={})).Empty=o.UI.Node.make((function(){return i.createElement("div",null)}))},8829:(e,t,r)=>{r.d(t,{t:()=>s});var n=r(54495),i=r(73864);function o(e,t){return{decode:e.decode,encode:t.encode}}function a(e){return{decode:e.decode,encode:n.yR}}i.Z_,i.Rx,i.O7,i.dX,i.mI;var s,l,c,u,d,p,m,h,g=r(2147),f=r(11577),y=r(83078),v=r(22232),b=r(5114),w=r(95195),x=r(73975),I=r(15646),S=r(98992);l=s||(s={}),c=l.Type=I.lY.Type.sduiCardAction,u=f.n(g.z2)(S.eX),l.eq=x.f7((function(e,t){return e.type===c&&e.type===t.type&&e.cardId===t.cardId&&u.equals(e.actions,t.actions)})),d=o(f.n(i.z2)(S.eX),{encode:function(e){return e}}),p=(0,n.ls)(d.decode,w.Vn((function(e){return new Error(i.ii(e))}))),m=o(f.n(i.z2)(S.ON),{encode:function(e){return e}}),h=(0,n.ls)(m.decode,w.Vn((function(e){return new Error(i.ii(e))}))),l.isSduiCardAction=function(e){return e.type===s.Type&&(r=e.actions,w.tO(p(r)))&&"object"==typeof(t=e.scope)&&null!=t&&Object.keys(t).every((function(e){var r=t[e];return"alertRef"===e?(0,n.zG)(r,b.fromPredicate(y.is),b.flatten,b.fold(n.W8,(0,n.ls)(h,w.tO))):((0,v.L0)(e),!1)}));var t,r}},84174:(e,t,r)=>{r.d(t,{q:()=>Q});var n=r(54495),i=r(95195),o=r(5114),a=r(22232),s=r(55415),l=r(71249),c=r(83078),u=r(8125),d=r(25186),p=r(5920),m=r(81531),h=r(46680),g=r(33678),f=r(40018),y=r(66896),v=r(15646),b=r(8829),w=r(35416),x=r(25975),I=r(9922),S=r(32952),C=r(19751),E=r(77176),A=r(60797),k=r(50628),M=r(41398),T=r(85985),_=r(28043),L=r(40151),N=r(16892),O=r(48067),D=r(21038),U=r(28811),R=r(40330),P=r(17594),F=r(31668),j=r(69111);function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){W(e,t,r[t])}))}return e}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var V,Q=function(){function e(t,r,s,l,c,u){var y=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new g.A,x=arguments.length>7&&void 0!==arguments[7]&&arguments[7],M=this;if(B(this,e),this._sduiService=t,this._checksFeedCapabilities=r,this._lensState=s,this._sduiManager=l,this._sduiFeedManager=c,this._alertReader=u,this._platformEnvironment=y,this._log=m.C8.Logging.getLogger("SDUICardsViewModelImpl",h.i.DEBUG),this._subs=new I.w.Keeper,this.sduiActionEvents=new S.xQ,this.actionEvents=new S.xQ,this._sduiActionsHandler=this.sduiActionEvents.pipe(C.skipBy(b.t.eq),E.U((function(e){var t=e.cardId,r=e.sourceId,s=e.actions,l=e.scope;return function(e){var c=M;return M._log.info("sdui card action:",{cardId:t,actions:s}),(0,n.zG)(s,d.u4(e,(function(e,u){switch(u.type){case"notify":return c._sduiService.sendUserAction(r,u.userAction),e;case"removeCard":var m=c;return(0,n.zG)(e.currentLens.items.get(t),o.map((function(e){return e.value})),o.chain((function(e){return(0,n.zG)(m._resolveSDUIStrongAlertRef(l.alertRef),o.map((function(t){return{alertIds:t,card:e}})))})),o.fold((function(){var r=m,a=s.some(R.zx.Action.isApplyAlternativeAction)?e:V.itemsLens.set((0,n.zG)(p.l.update(e.currentLens.items,t,(function(e){return r._checksFeedCapabilities.remove(n.W8,n.W8)(e)})),i.g_((function(){return e.currentLens.items}),n.yR)),e);return(0,n.zG)(e.currentLens.items.get(t),o.filterMap((function(e){return(0,n.zG)(r._checksFeedCapabilities.hasActiveAlert(e.value),o.map((function(e){return e.alert})),o.filter((function(e){return!P.$.isPremium(e)&&!s.some(R.zx.Action.isApplyAlternativeAction)})),o.map((function(t){return(0,n.bc)(e.value,t)})))})),o.fold((function(){return a}),(function(t){var i=$(t,2),a=i[0],s=i[1],l=r;return requestAnimationFrame((function(){return l.actionEvents.next({type:v.lY.Type.alertIgnore,alertId:s.id,id:a.id,eligibleForSurvey:s.dismissSurvey,drilldownSuggestionIds:s.alertType===f.bZ.Type.Synfony?(0,n.zG)(a.synfonySelection,o.getOrElse((function(){return[]}))):void 0})})),e})))}),(function(t){var r=t.alertIds,i=t.card,a=m;return s.some(R.zx.Action.isApplyAlternativeAction)||requestAnimationFrame((function(){var e=a;(0,n.zG)(r,d.fw(o.option)((function(t){return e._alertReader.getById(e._mapToDenaliAlertId(t))})),o.map(d.UI((function(t){return e.actionEvents.next({type:v.lY.Type.alertIgnore,alertId:t.id,id:i.id,eligibleForSurvey:t.dismissSurvey,drilldownSuggestionIds:t.alertType===f.bZ.Type.Synfony?(0,n.zG)(i.synfonySelection,o.getOrElse((function(){return[]}))):void 0})})))),a._sduiManager.pushRemovedAlerts([r,O.i5.RemoveAlertSDUIAction])})),e})));case"applyAlternative":var h=c;return(0,n.zG)(e.currentLens.items.get(t),o.map((function(e){return e.value})),i.Yo((function(){return new Error("unknown cardId: ".concat(t))})),i.Pd((function(e){return h._log.error("error in processing applyAlternative action",e)}),(function(e){var t=h;(0,n.zG)(h._resolveSDUIStrongAlertRef(l.alertRef),o.fold((function(){var r=t,i=(0,n.zG)(t._checksFeedCapabilities.hasActiveAlert(e),o.map((function(e){return e.alert})));o.isNone(i)?t._log.error("error in processing applyAlternative action: card must have active alert"):requestAnimationFrame((function(){return r.actionEvents.next({type:v.lY.Type.alertApply,id:e.id,eligibleForSurvey:i.value.acceptSurvey,eligibleForGbPrompt:i.value.gbPrompt,alertId:i.value.id,alternativeIndex:u.alternativeIndex,cardType:v.lY.getCardType({activeAlert:i.value})})}))}),(function(r){var i=t;requestAnimationFrame((function(){var t=i;(0,n.zG)(r,d.fw(o.option)((function(e){return t._alertReader.getById(t._mapToDenaliAlertId(e))})),o.map(d.UI((function(r){return t.actionEvents.next({type:v.lY.Type.alertApply,id:e.id,eligibleForSurvey:r.acceptSurvey,eligibleForGbPrompt:r.gbPrompt,alertId:r.id,alternativeIndex:u.alternativeIndex,cardType:v.lY.getCardType({activeAlert:P.$.fromModel(r)})})})))),i._sduiManager.pushRemovedAlerts([r,O.i5.RemoveAlertSDUIAction])}))})))})),(function(){return e}));case"closeCard":return e.patch({currentLens:w.nL.hasItems(e)?c._checksFeedCapabilities.unselectItem()(e.currentLens):e.currentLens,switchOrder:"lensOrder",alertSource:f.l$.sidebar});case"nextCard":case"prevCard":case"openSettings":case"openToneDetector":case"openFeedback":case"upgradeToPremium":case"openLearnMore":case"transition":case"removeAlert":case"selectAlternative":case"newRevision":return e;case"openLink":return c._platformEnvironment.actions.openPopup(new F.Z(u.url)),e;case"pushAssistantFeed":var g=c;return requestAnimationFrame((function(){return(0,n.zG)(g._sduiFeedManager.pushFeed(D.j.Item.Id.from(u.feedId),u.cardId),i.Vn((function(e){return g._log.error(e),e})))})),e;case"popAssistantFeed":var y=c;return requestAnimationFrame((function(){return y._sduiFeedManager.popFeed()})),e;case"focusAssistantCard":var b=c;return requestAnimationFrame((function(){return b._sduiFeedManager.focusCard(u.cardId)})),e;case"switchView":var x={where:u.where,selected:u.selected,sduiRootId:D.j.Item.Id.from(t)};return c._switchCallerCard(x),c._switchActiveCard(x),c._switchActiveFeed(x),e;default:return(0,a.L0)(u),e}})),(function(e){return e.patch({alertSource:f.l$.sidebar})}))}}))),this._focusedItem=this._lensState.view((function(e){return w.nL.hasItems(e)?(0,n.zG)(e.currentLens.cardIndex,o.chain((function(t){return e.currentLens.items.getAt(t)}))):o.none})),this._subs.push(this._handleSduiCardOnFocus(),this._handleSduiFeedRemove(),this._handleSduiOnEmptyEvents()),!x){var T=this;this._subs.push(this._sduiManager.state.pipe(E.U(U.a.find((function(e){return"gButton"===e.content.type}))),A.oA,k.P()).subscribe((function(e){var t=e.content;T.sduiActionEvents.next({type:b.t.Type,sourceId:e.id,cardId:e.id,actions:t.actions,scope:{alertRef:o.none}})})))}}var t,r,u;return t=e,(r=[{key:"_handleSduiOnEmptyEvents",value:function(){var e=this;return this._sduiManager.onAlertsRefEmpty.pipe(M.M(this._focusedItem),T.h((function(e){var t=$(e,2),r=t[0].sduiRootId,i=t[1];return(0,n.zG)(i,o.filter((function(e){return e.id===r})),o.isSome)})),E.U((function(e){return $(e,1)[0]}))).subscribe((function(t){var r=t.sduiId,n=t.sduiRootId,i=t.emptyStrongAlertRef;return e.sduiActionEvents.next({type:b.t.Type,sourceId:r,cardId:n,actions:i.onEmpty,scope:{alertRef:o.some(i)}})}))}},{key:"_handleSduiFeedRemove",value:function(){var e=this;return this._sduiFeedManager.onFeedRemove.subscribe((function(t){(0,a.kG)("assistantFeed"===t.content.type),e.sduiActionEvents.next({type:b.t.Type,sourceId:t.id,cardId:t.id,actions:t.content.onRemove,scope:{alertRef:o.none}})}))}},{key:"_handleSduiCardOnFocus",value:function(){var e=this;return this._focusedItem.pipe(_.x((function(e,t){return o.getEq(N.s.eqById).equals(e,t)})),A.oA,T.h(j.e.isSDUIItem),E.U((0,n.ls)(s.ei("id"),D.j.Item.Id.from)),E.U((function(t){return(0,n.zG)(e._sduiManager.findFirstCardWithContent(t),o.map((function(e){return[e,t]})))})),A.oA).subscribe((function(t){var r=$(t,2),n=r[0],i=n.card,o=n.parentStrongAlertRef,a=r[1];e._sduiFeedManager.notifyCardFocused(a),e.sduiActionEvents.next({type:b.t.Type,sourceId:a,cardId:a,actions:i.onFocus,scope:{alertRef:o}})}))}},{key:"getApplicatorEffects",value:function(){return(0,n.zG)([[this._sduiActionsHandler,"sduiActions"]],l.UI((function(e){var t=$(e,2),r=t[0],n=t[1];return{id:"cardsViewModel.effects.".concat(n),when:y.R.isWithAlertsId,what:w.nL.Effect.Applicator.create(r)}})))}},{key:"dispose",value:function(){this._subs.dispose()}},{key:"_switchCallerCard",value:function(e){this._sduiManager.pushSwitchView(e)}},{key:"_switchActiveCard",value:function(e){var t=this;(0,n.zG)(this._focusedItem.get(),o.filter((function(t){return e.sduiRootId!==t.id})),c.bw((function(r){return t._sduiManager.pushSwitchView(H({},e,{sduiRootId:D.j.Item.Id.from(r.id)}))})))}},{key:"_switchActiveFeed",value:function(e){var t=this;(0,n.zG)(this._sduiFeedManager.currentFeed,o.filter((function(t){return t.feedId!==e.sduiRootId})),c.bw((function(r){var n=r.feedId;return t._sduiManager.pushSwitchView(H({},e,{sduiRootId:n}))})))}},{key:"_resolveSDUIStrongAlertRef",value:function(e){var t=this;return(0,n.zG)(e,o.chain((function(e){return t._sduiManager.resolveStrongAlertRefAlerts(e)})))}},{key:"_mapToDenaliAlertId",value:function(e){return"".concat(e)}}])&&G(t.prototype,r),u&&G(t,u),e}();!function(e){e.itemsLens=w.nL.Prism.getLens().compose(x.v.Prism.items),e.createLegacy=function(e,t,r,i,a,s){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new g.A;return(0,n.zG)(c.gz(e,i,a),o.fold((function(){return new V.Mock}),(function(e){var n=$(e,3),i=n[0],o=n[1],a=n[2];return new Q(i,t,r,o,a,s,l)})))};e.Mock=function e(){B(this,e),this.actionEvents=new S.xQ,this.sduiActionEvents=new S.xQ,this.sideEffect={id:"cardsViewModelMock",when:y.R.isWithAlertsId,what:w.nL.Effect.Applicator.create(L.E)},this.getApplicatorEffects=function(){return[{id:"cardsViewModelMock",when:y.R.isWithAlertsId,what:w.nL.Effect.Applicator.create(L.E)}]},this.dispose=u.Q1}}(V||(V={}))},37355:(e,t,r)=>{r.d(t,{$O:()=>S,ND:()=>y,U8:()=>I,a3:()=>A,hc:()=>w,o_:()=>b});var n=r(27378),i=r(54495),o=r(22232),a=r(71249),s=r(77678),l=r(64757),c=r(89894),u=r(1509),d=r(94632),p=r(32096),m=r(79880);function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(this,arguments)}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){h(e,t,r[t])}))}return e}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return{primary:function(t){return n.createElement(l.zx.Primary,g({},E(t),{className:c.ux.joinClasses([e.primary,e.main,t.shape===m.jL.Round?C.round:void 0])}),t.text)},secondary:function(t){return n.createElement(l.zx.Tertiary,g({},E(t),{className:c.ux.joinClasses([e.main,t.shape===m.jL.Round?C.round:void 0])}),t.text)},toggle:function(t){return n.createElement(l.zx.Animated,g({},E(t),{styleType:u.Z.Type.Button,className:c.ux.joinClasses([d.LI,e.toggle,e.main,t.shape===m.jL.Round?C.round:void 0])}),t.text)}}}var v={lineHeight:"calc(2px * var(--rem) - 2px)",padding:0},b={flexShrink:0,minHeight:c.ux.rem(2),$nest:{"& span":v}},w=(0,d.T)({default:{borderRadius:c.ux.rem(p.fx),whiteSpace:"normal",backgroundColor:s.CoreNeutral0,color:s.CoreBlue50,border:"1px solid ".concat(s.CoreNeutral20),transitionDuration:".2s",transitionProperty:"border-color, background-color",lineHeight:"calc(2px * var(--rem) - 2px)"},hovered:{backgroundColor:s.CoreBlue1},disabled:{color:s.CoreNeutral40,borderColor:s.CoreNeutral10},clicked:{backgroundColor:s.CoreBlue10},toggled:{backgroundColor:s.CoreNeutral1,borderColor:s.CoreBlue50},hidden:{}}),x={fill:s.CoreNeutral0,stroke:s.CoreNeutral0},I=f({},(0,d.T)({default:{display:"inline-flex"},hovered:{},clicked:{},disabled:{},toggled:{},hidden:{}}),{$nest:{"& span":v,"& i":x,"&:not([data-disabled='true'])[data-hovered='true'] i":x}}),S={borderRadius:c.ux.percent(100)},C=c.ux.stylesheet({main:[b],primary:[I],toggle:[w],round:[S]});function E(e){return f({name:e.name,onClick:e.onClick,title:void 0!==e.tooltip&&e.state!==m.BN.Disabled?A(e.tooltip):void 0},function(e){switch(e){case m.BN.Enabled:return{disabled:!1,active:!1};case m.BN.Disabled:return{disabled:!0,active:!1};case m.BN.Selected:return{disabled:!1,active:!0};case m.BN.Hidden:return{hidden:!0};default:return(0,o.vE)(e)}}(e.state))}function A(e){return n.createElement(n.Fragment,null,(0,i.zG)(e.split("\n"),(function(e){var t=e.length;return 0===t?e:a.QI(e[0],e.slice(1,t).map((function(e,t){return n.createElement(n.Fragment,{key:t},n.createElement("br",null),e)})))})))}},10065:(e,t,r)=>{r.d(t,{k:()=>sr});var n=r(27378),o=r(59009);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var l=r(79880),c=r(25186),u=r(54495),d=r(5114),p=r(95195),m=r(81531),h=r(40330);function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){g(e,t,r[t])}))}return e}var y=function(e){return"selectAlternative"===e.type?d.some(e.alternativeIndex):d.none};function v(e){return function(t){return(0,u.zG)(t,c.Ew((0,u.ls)(y,d.exists((function(t){return t===e})))),d.isSome)}}var b=r(5739);function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){w(e,t,r[t])}))}return e}var I,S=r(37355),C=r(77678),E=r(7514),A=r(89894);function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _(e){return function(e){if(Array.isArray(e))return e}(e)||T(e)||N(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e){return function(e){if(Array.isArray(e))return k(e)}(e)||T(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}!function(e){e[e.SmallLetterSpacing=0]="SmallLetterSpacing",e[e.BodyLetterSpacing=0]="BodyLetterSpacing",e[e.BodySize=.875]="BodySize",e[e.SmallSize=.75]="SmallSize"}(I||(I={}));var O,D,U=function(e){var t=e.size,r=e.format,i=e.textColor,o=e.backgroundColor,a=e.outlineColor,s=e.text,c=function(e,t){var r="".concat(e,"-").concat(t),n=H.get(r);if(void 0!==n)return n;var i=A.ux.style({color:C[e],backgroundColor:Boolean(t)?C[t]:t});return H.put(r,i),i}(i,o),u=_(r),d=u[0],p=u.slice(1),m=void 0!==d?W[d]:"span",h=p.map((function(e){return e===l.SQ.StrikeoutDiagonal?function(e){var t="sd-".concat(e),r=H.get(t);if(void 0!==r)return r;var n=A.ux.style(function(e){return{backgroundImage:"linear-gradient(to top left,\n    rgba(0,0,0,0) 0%,\n    rgba(0,0,0,0) calc(50% - 0.5px),\n    ".concat(C[e]," 50%,\n    rgba(0,0,0,0) calc(50% + 0.5px),\n    rgba(0,0,0,0) 100%)")}}(e));return H.put(t,n),n}(null!=a?a:i):G[e]}));return void 0!==a&&h.push(function(e){var t="ol-".concat(e),r=H.get(t);if(void 0!==r)return r;var n=A.ux.style({borderColor:C[e]});return H.put(t,n),n}(a)),n.createElement(m,{className:A.ux.joinClasses([c,B[t]].concat(L(h))),children:s})},R=A.ux.rem(21/16),P=A.ux.rem(.875),F={padding:"".concat(A.ux.rem(.15625)," 0")},j={letterSpacing:A.ux.rem(I.BodyLetterSpacing),fontSize:A.ux.rem(I.BodySize),lineHeight:R},z={letterSpacing:A.ux.rem(I.SmallLetterSpacing),fontSize:A.ux.rem(I.SmallSize),lineHeight:P},B=A.ux.stylesheet((M(O={},l.yH.Regular,[F,j]),M(O,l.yH.Small,[F,z]),O)),G=A.ux.stylesheet((M(D={},l.SQ.Bold,[{fontWeight:"bolder"}]),M(D,l.SQ.Italic,[{fontStyle:"italic"}]),M(D,l.SQ.StrikeoutHorizontal,[{textDecoration:"line-through"}]),M(D,l.SQ.StrikeoutDiagonal,[]),M(D,l.SQ.Outline,[{padding:"".concat(A.ux.rem(1/16)," ").concat(A.ux.rem(3.5/16)," ").concat(A.ux.rem(1/16)," ").concat(A.ux.rem(3.5/16)),border:"1px solid",borderRadius:"2px"}]),D)),W={strikeoutHorizontal:"s",strikeoutDiagonal:"span",outline:"span",bold:"b",italic:"i"};var H=new E.z6(100);function $(e){return void 0===e?Q.main:A.ux.joinClasses([Q.main,Y(e)])}var V={padding:"".concat(A.ux.rem(2/16)," ").concat(A.ux.rem(.25)),minWidth:A.ux.rem(1.125),borderRadius:A.ux.rem(.75),display:"inline-flex",whiteSpace:"nowrap",alignItems:"center",justifyContent:"center",boxSizing:"border-box",$nest:{"& > *":{padding:0}}},Q=A.ux.stylesheet({main:[V]});function Y(e){var t="".concat(e),r=Z.get(t);if(void 0!==r)return r;var n=A.ux.style({backgroundColor:C[e]});return Z.put(t,n),n}var Z=new E.z6(100),q=r(12187),J=r(61922);function K(){return K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K.apply(this,arguments)}var X={close:function(e){return n.createElement(J.JO.Close,{className:re(e)})},"arrow-right":function(e){return n.createElement(J.JO.Arrow,{direction:J.n4.right,className:re(e)})},"arrow-left":function(e){return n.createElement(J.JO.Arrow,{direction:J.n4.left,className:re(e)})},gear:function(e){return n.createElement(J.JO.Gear,{enforceStroke:!0,width:13,className:re(e)})},dictionary:function(e){return n.createElement(J.JO.Dict,{className:re(e)})},clarity:function(e){return n.createElement(J.JO.ClarityOutcome,{className:re(e)})},correctness:function(e){return n.createElement(J.JO.Correctness,{className:re(e)})},engagement:function(e){return n.createElement(J.JO.EngagementOutcome,{className:re(e)})},delivery:function(e){return n.createElement(J.JO.DeliveryOutcome,{className:re(e)})},diamond:function(e){return n.createElement(J.JO.Paid,{width:20,className:re(e)})},feedback:function(e){return n.createElement(J.JO.AssistantFeedback,{className:re(e)})},sensitivity:function(e){return n.createElement(J.JO.Sensitivity,{className:re(e)})},"external-link":function(e){return n.createElement(J.JO.ExternalLink,{className:re(e)})},sparkles:function(e){return n.createElement(J.JO.Sparkles,{className:re(e)})},ignore:function(e){return n.createElement(J.JO.Ignore,{width:14,height:15,className:re(e)})},info:function(e){return n.createElement(J.JO.Info,{className:re(e)})},report:function(e){return n.createElement(J.JO.Report,{width:12,className:re(e)})},proofreader:function(e){return n.createElement(J.JO.Proofread,{width:16,className:re(e)})},mute:function(e){return n.createElement(J.JO.Mute,{width:16,className:re(e)})},more:function(e){return n.createElement(J.a1,K({},(0,q.Sh)(re(e)),{width:14,viewBox:"0 0 14 4"}),n.createElement("path",{d:"M6.99951 0.5C7.82794 0.5 8.49951 1.17157 8.49951 2C8.49951 2.82843 7.82794 3.5 6.99951 3.5C6.17108 3.5 5.49951 2.82843 5.49951 2C5.49951 1.17157 6.17108 0.5 6.99951 0.5Z",fill:"#6D758D"}),n.createElement("path",{d:"M11.9995 0.5C12.8279 0.5 13.4995 1.17157 13.4995 2C13.4995 2.82843 12.8279 3.5 11.9995 3.5C11.1711 3.5 10.4995 2.82843 10.4995 2C10.4995 1.17157 11.1711 0.5 11.9995 0.5Z",fill:"#6D758D"}),n.createElement("path",{d:"M1.99951 0.5C2.82794 0.5 3.49951 1.17157 3.49951 2C3.49951 2.82843 2.82794 3.5 1.99951 3.5C1.17108 3.5 0.499512 2.82843 0.499512 2C0.499512 1.17157 1.17108 0.5 1.99951 0.5Z",fill:"#6D758D"}))}},ee={width:A.ux.rem(1.5),height:A.ux.rem(1.5),minWidth:A.ux.rem(1.5),minHeight:A.ux.rem(1.5),borderRadius:A.ux.rem(1.5)},te=A.ux.stylesheet({main:[ee]});function re(e){return void 0===e.backgroundColor?te.main:A.ux.joinClasses([te.main,ne(e.backgroundColor)])}function ne(e){var t=ie.get(e);if(void 0!==t)return t;var r=A.ux.style({backgroundColor:C[e]});return ie.put(e,r),r}var ie=new E.z6(100),oe={width:A.ux.rem(.85),height:A.ux.rem(.85)},ae={width:A.ux.rem(1.5),height:A.ux.rem(1.5),borderRadius:A.ux.rem(1.5),display:"inline-flex",justifyContent:"center",alignItems:"center"},se=A.ux.stylesheet({main:[{objectFit:"contain",alignSelf:"center",overflow:"hidden"}],defaultSize:[oe],wrapper:[ae]});function le(e){return void 0===e?se.wrapper:A.ux.joinClasses([se.wrapper,ne(e)])}function ce(e){return void 0===e?A.ux.joinClasses([se.main,se.defaultSize]):A.ux.joinClasses([se.main,ue(e)])}function ue(e){var t=de.get(e);if(void 0!==t)return t;var r=A.ux.style({width:A.ux.rem(Number(e)),height:A.ux.rem(Number(e))});return de.put(e,r),r}var de=new E.z6(100);function pe(e,t,r){var n="wrapper-".concat(e,"-").concat(t,"-backgroundColor"),i=he.get(n);if(void 0!==i)return i;var o=A.ux.style({width:A.ux.rem(Number(t)),height:A.ux.rem(Number(e)),display:"inline-flex",justifyContent:"center",alignItems:"center"});return void 0!==r&&(o=A.ux.joinClasses([o,ne(r)])),he.put(n,o),o}function me(e,t){var r="content-".concat(e,"-").concat(t),n=he.get(r);if(void 0!==n)return n;var i=A.ux.style({width:A.ux.rem(Number(t)),height:A.ux.rem(Number(e))});return he.put(r,i),i}var he=new E.z6(100);function ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fe(e){var t=e.spacing,r=e.innerSpacing,n=e.horizontalAlign,i=e.verticalAlign,o=e.fraction,a=e.maxLines,s=[ye.base];return void 0!==a&&s.push(function(e){var t="m-".concat(e),r=we.get(t);if(void 0!==r)return r;var n=A.ux.style({display:"-webkit-inline-box",overflow:"hidden",WebkitBoxOrient:"vertical","-webkit-line-clamp":e});return we.put(t,n),n}(a)),void 0===t&&void 0===r||s.push(function(e){var t=e.spacing,r=e.innerSpacing,n="".concat(null==t?void 0:t.top,"-").concat(null==t?void 0:t.bottom,"-").concat(null==t?void 0:t.left,"-").concat(null==t?void 0:t.right,"-").concat(null==r?void 0:r.vertical,"-").concat(null==r?void 0:r.horizontal),i=we.get(n);if(void 0!==i)return i;var o,a,s={$debugName:"spacing"};void 0!==t&&(s.marginRight=A.ux.rem(Number(t.right)),s.marginBottom=A.ux.rem(Number(t.bottom)),s.marginTop=A.ux.rem(Number(t.top)),s.marginLeft=A.ux.rem(Number(t.left))),void 0!==r&&(s.marginRight=A.ux.rem(Number(null!==(o=null==t?void 0:t.right)&&void 0!==o?o:0)-Number(r.horizontal)),s.marginBottom=A.ux.rem(Number(null!==(a=null==t?void 0:t.bottom)&&void 0!==a?a:0)-Number(r.vertical)),s.$nest={"& > *":{marginRight:A.ux.rem(Number(r.horizontal)),marginBottom:A.ux.rem(Number(r.vertical))}});var l=A.ux.style(s);return we.put(n,l),l}({spacing:t,innerSpacing:r})),void 0!==n&&s.push(xe[n]),void 0!==i&&s.push(Ie[i]),void 0!==o&&s.push(function(e){var t="f-".concat(e),r=we.get(t);if(void 0!==r)return r;var n=A.ux.style({flex:e,overflow:"hidden"});return we.put(t,n),n}(o)),s.length>0?A.ux.joinClasses(s):void 0}var ye=A.ux.stylesheet({base:[{overflowWrap:"anywhere",display:"inline-block"}]});var ve,be,we=new E.z6(100),xe=A.ux.stylesheet((ge(ve={},l.Kq.Left,[{textAlign:"left"}]),ge(ve,l.Kq.Center,[{textAlign:"center"}]),ge(ve,l.Kq.Right,[{textAlign:"right"}]),ve)),Ie=A.ux.stylesheet((ge(be={},l.g$.Top,[{$nest:{"& > *":{verticalAlign:"top"}}}]),ge(be,l.g$.Middle,[{$nest:{"& > *":{verticalAlign:"middle"}}}]),ge(be,l.g$.Bottom,[{$nest:{"& > *":{verticalAlign:"bottom"}}}]),be)),Se=A.ux.stylesheet({holder:[{display:"flex",flexDirection:"column"}]});function Ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ce(e,t,r[t])}))}return e}var Ae={display:"flex",flexWrap:"nowrap",alignItems:"inherit",maxWidth:"100%"},ke=Ee({},Ae,{flexGrow:1}),Me=Ee({},Ae,{marginLeft:"auto",flexShrink:0}),Te=A.ux.stylesheet({row:[{display:"flex",flexDirection:"row",alignItems:"center"}],rowLeft:[ke],rowRight:[Me]});function _e(e){return void 0===e?Te.row:A.ux.joinClasses([Te.row,Oe(e)])}function Le(e){return void 0===e?Te.rowLeft:A.ux.joinClasses([Te.rowLeft,Re[e]])}function Ne(e){return void 0===e?Te.rowRight:A.ux.joinClasses([Te.rowRight,Re[e]])}function Oe(e){var t=e.top,r=e.bottom,n=e.left,i=e.right,o="".concat(t,"-").concat(r,"-").concat(n,"-").concat(i),a=Ue.get(o);if(void 0!==a)return a;var s=A.ux.style({marginTop:A.ux.rem(Number(t)),marginLeft:A.ux.rem(Number(n)),marginRight:A.ux.rem(Number(i)),marginBottom:A.ux.rem(Number(r))});return Ue.put(o,s),s}var De,Ue=new E.z6(100),Re=A.ux.stylesheet((Ce(De={},l.g$.Top,[{alignItems:"start"}]),Ce(De,l.g$.Middle,[{alignItems:"center"}]),Ce(De,l.g$.Bottom,[{alignItems:"end"}]),De)),Pe=A.ux.stylesheet({"list-main":[{display:"flex",flexDirection:"column"}]}),Fe=r(99094),je=r(32096),ze=r(64757),Be=r(94632),Ge=r(38983);function We(){return We=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},We.apply(this,arguments)}var He=(0,Be.T)({default:{display:"block",overflow:"hidden",position:"relative",borderRadius:A.ux.rem(je.fx),boxSizing:"border-box",margin:"0 -2px -2px -2px",border:A.ux.important("2px solid transparent"),whiteSpace:"normal",minHeight:"calc(2px * var(--rem) + 4px)",transitionDuration:".2s",transitionProperty:"border, background, color"},hovered:{cursor:"pointer",border:A.ux.important("2px solid ".concat(C.CoreNeutral10)),borderColor:C.CoreNeutral10,background:C.CoreNeutral10,$nest:{"& *:not([data-disabled='true'])[data-hovered='true']":{borderColor:C.CoreNeutral20,background:C.CoreNeutral20}}},disabled:{},clicked:{},toggled:{},hidden:{}}),$e=A.ux.stylesheet({ghost:[He]}),Ve=r(18813);function Qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ye={width:A.ux.rem(2),height:A.ux.rem(2)},Ze={flexShrink:0,alignItems:"center",justifyContent:"center",height:A.ux.rem(2),width:A.ux.rem(2),$nest:{"& > *":{marginTop:"3px"}}},qe={display:"flex",width:A.ux.rem(3),alignItems:"center",justifyContent:"center"},Je={paddingRight:A.ux.rem(1)},Ke=A.ux.stylesheet({container:[{display:"inline-flex",position:"relative"}],dropdownContainer:[Ye],button:[Ze],itemContainer:[{display:"flex",flexDirection:"row"}],itemIcon:[qe],itemText:[Je]}),Xe=r(85089),et=r(60797),tt=r(83078),rt=r(73975),nt=r(85985),it=r(77176),ot=r(93508),at=r(66310),st=r(80334),lt=r(76974),ct=r(2844),ut=r(28043),dt=r(76498);function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var gt=function(e,t){var r={root:e,rootMargin:"0px",threshold:[0,1]};return Xe.n(t,r).pipe(nt.h(dt.Od),it.U((function(e){return 1!==e[0].intersectionRatio})),ot.O(t.offsetHeight>e.offsetHeight))},ft=function(e,t){return Ge.h.combine(e,t,tt.vB(gt)).pipe(et.oA,at.w(u.yR),st.h(lt.of(!0)))},yt=rt.MW({topOverflow:rt.vD,bottomOverflow:rt.vD});var vt=new E.z6(100);var bt=A.ux.stylesheet({"scroll-main":[{display:"flex",flexDirection:"column",borderTop:"1px solid transparent",borderBottom:"1px solid transparent",transitionProperty:"border-top-color, border-bottom-color",transitionDuration:".2s",pointerEvents:"auto"}],overflowBottom:[{borderBottomColor:A.ux.important(C.CoreNeutral20)}],overflowTop:[{borderTopColor:A.ux.important(C.CoreNeutral20)}]}),wt=r(22191),xt=r(32952),It=r(95300),St=r(24209),Ct=r(17343),Et=r(41398),At=r(2834),kt=r(90845);function Mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _t(){return _t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_t.apply(this,arguments)}function Lt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Tt(e,t,r[t])}))}return e}function Nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ot="sliderOuterContainer",Dt="sliderLabel",Ut="sliderContainer",Rt="slider",Pt="sliderDragging",Ft="sliderSliderDivisionPoint",jt="sliderDivisionPointHoverArea",zt="sliderInner",Bt="sliderInnerDragging",Gt="sliderInnerJiggle",Wt="sliderKnob",Ht="sliderKnobDragging",$t="sliderKnobEmoji",Vt={fontWeight:700,fontSize:A.ux.rem(.875),lineHeight:A.ux.rem(1),width:A.ux.rem(8)},Qt={height:A.ux.rem(2.625),display:"flex",flexDirection:"column",justifyContent:"center"},Yt={position:"relative",width:A.ux.percent(100),backgroundColor:C.CoreNeutral40,height:A.ux.rem(.125),borderRadius:A.ux.rem(.375),transition:"height 0.15s ease-in-out",$nest:Tt({"&:hover":{height:A.ux.rem(.5)}},"&:hover .".concat(Ft),{visibility:"visible"})},Zt={height:A.ux.rem(.5),$nest:Tt({},"& .".concat(Ft),{visibility:"visible"})},qt={position:"absolute",height:A.ux.rem(.25),backgroundColor:C.CoreNeutral0,top:A.ux.rem(.125),bottom:A.ux.rem(.125),borderRadius:A.ux.percent(100),visibility:"hidden"},Jt={background:C.CoreNeutral90,opacity:0,height:A.ux.rem(1.5),position:"absolute",borderRadius:A.ux.percent(100),cursor:"pointer",top:A.ux.rem(-.5),zIndex:1,$nest:{"&:hover":{opacity:.1}}},Kt={position:"relative",display:"flex",alignItems:"center",backgroundColor:C.CorePurple40,height:A.ux.percent(100),borderRadius:A.ux.rem(.375),transition:"width 0.15s ease-in-out"},Xt=A.ux.keyframes({from:{width:"100%"},to:{width:"calc(100% - ".concat(A.ux.rem(1.5),")")}}),er=A.ux.keyframes({from:{width:"calc(100% - ".concat(A.ux.rem(1.5),")")},to:{width:"100%"}}),tr={animation:"".concat(Xt," 0.8s cubic-bezier( 0.05, 0.46, 0.37, 0.92 ) 1s forwards,\n              ").concat(er," 0.2s cubic-bezier( 0.05, 0.46, 0.37, 0.92 ) 2s forwards")},rr={position:"absolute",right:A.ux.rem(-.875),display:"flex",justifyContent:"center",alignItems:"center",width:A.ux.rem(1.75),height:A.ux.rem(1.75),backgroundColor:C.CoreNeutral0,boxShadow:"0px 0px 1px rgba(109, 117, 141, 0.8), 0px 1px 8px rgba(109, 117, 141, 0.28)",borderRadius:A.ux.rem(1.875),cursor:"ew-resize",transitionProperty:"width, height",transitionDuration:"0.15s",transitionTimingFunction:"ease-in-out",zIndex:1,$nest:{"&:hover":{width:A.ux.rem(2),height:A.ux.rem(2),boxShadow:"0px 0px 1.14286px rgba(109, 117, 141, 0.8), 0px 4px 12px rgba(109, 117, 141, 0.3)"}}},nr={width:A.ux.rem(2),height:A.ux.rem(2),boxShadow:"0px 0px 1.14286px rgba(109, 117, 141, 0.8), 0px 4px 12px rgba(109, 117, 141, 0.3)"},ir={width:A.ux.rem(.9375),height:A.ux.rem(.9375),pointerEvents:"none"},or={outerContainer:A.ux.joinClasses([Ot,A.ux.style({display:"flex",alignItems:"center"})]),label:A.ux.joinClasses([Dt,A.ux.style(Vt)]),container:A.ux.joinClasses([Ut,A.ux.style(Qt)]),slider:A.ux.joinClasses([Rt,A.ux.style(Yt)]),sliderDragging:A.ux.joinClasses([Pt,A.ux.style(Zt)]),sliderDivisionPoint:A.ux.joinClasses([Ft,A.ux.style(qt)]),sliderDivisionPointHoverArea:A.ux.joinClasses([jt,A.ux.style(Jt)]),sliderInner:A.ux.joinClasses([zt,A.ux.style(Kt)]),sliderInnerDragging:A.ux.joinClasses([Bt,A.ux.style({transition:"none"})]),sliderInnerJiggle:A.ux.joinClasses([Gt,A.ux.style(tr)]),knob:A.ux.joinClasses([Wt,A.ux.style(rr)]),knobDragging:A.ux.joinClasses([Ht,A.ux.style(nr)]),knobEmoji:A.ux.joinClasses([$t,A.ux.style(ir)])};var ar=function(e){e=null!==e?e:function(e){throw e}(new TypeError("Cannot destructure undefined"));return n.createElement("div",null,"not implemented")},sr={button:(0,S.ND)(),alternativeChoice:function(e){var t=e.designSystem,r=e.content,i=e.activeIndex,o=e.notify,a=m.C8.Logging.getLogger("AlternativeChoiceView");return n.createElement(t.column,{children:[(0,u.zG)(d.fromNullable(r[i]),p.Yo((function(){return"Cannot render alternative choice preview if there's no choice that matches the current alternative index."})),p.UI((function(e){return e.preview})),p.Y$(h.gO.isBlock,(function(){return"Cannot render alternative choice preview if it's not of type `block.`"})),p.Y$(h.gO.hasOnlyTextParts,(function(){return"Cannot render alternative choice preview `block` if not every part is of type `text.`"})),p.UI((function(e){return n.createElement(t.block,f({},e,{children:e.parts.map((function(e,r){return n.createElement(t.text,f({key:r},e))})),spacing:{top:l.T.D0,right:l.T.D0,bottom:l.T.D1,left:l.T.D0},key:"preview"}))})),p.fS((function(e){return a.warn(e),null}))),n.createElement(t.block,{innerSpacing:{horizontal:l.T.D05,vertical:l.T.D05},verticalAlign:l.g$.Top,children:r.map((function(e,r){return"button"===e.label.type&&"block"===e.label.label.type?n.createElement(t.button.toggle,{key:r,text:t.block(f({},e.label.label,{children:e.label.label.parts.map((function(e,r){return"text"===e.type?e.text:"icon"===e.type&&"known"===e.source.kind?n.createElement(t.icon[e.source.name],f({key:r},e)):null}))})),name:e.label.name.value,state:v(i)(e.label.actions)?l.BN.Selected:l.BN.Enabled,tooltip:void 0,shape:l.jL.Square,onClick:o(e.label.actions,e.label.id)}):a.warn("Content where `label.type` is not `button` and `label.label.type` is not `block` are not supported (yet)",{content:e})})),key:"control",id:h.JX.from("AlternativeChoiceView-control")})],id:h.JX.from("AlternativeChoiceView")})},text:U,image:function(e){var t=e.name,r=e.url,i=e.size,o=e.backgroundColor;return n.createElement("div",{className:le(o),"data-role":"icon"},n.createElement("img",{src:r,className:ce(i),alt:t}))},imageSized:function(e){var t=e.name,r=e.url,i=e.height,o=e.width,a=e.backgroundColor;return n.createElement("div",{className:pe(i,o,a),"data-role":"icon"},n.createElement("img",{src:r,className:me(i,o),alt:t.value}))},icon:X,alertsCount:function(e){var t=e.textView,r=s(e,["textView"]),i=n.useContext(o.o.Context);return n.createElement(t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){a(e,t,r[t])}))}return e}({key:"alertsCountText"},r,{text:"".concat(i.alertIds.length)}))},count:function(e){var t=e.backgroundColor,r=e.value,i=e.textColor,o=void 0===i?l.Il.CoreNeutral0:i;return n.createElement("div",{className:$(t)},n.createElement(U,{size:l.yH.Small,format:[l.SQ.Bold],textColor:o,text:r}))},block:function(e){var t=n.useRef(null);return n.useEffect((function(){var r,n=e.maxLines&&(null===(r=t.current)||void 0===r?void 0:r.querySelector("*:last-child"));if(n){var i=setTimeout((function(){var e,r=self.getComputedStyle(n,null),i=r.getPropertyValue("color"),o=r.getPropertyValue("font-size"),a=r.getPropertyValue("line-height"),s=r.getPropertyValue("letter-spacing");Object.assign(null===(e=t.current)||void 0===e?void 0:e.style,{color:i,fontSize:o,lineHeight:a,letterSpacing:s})}),0);return function(){return clearTimeout(i)}}return function(){}}),[e.maxLines]),n.createElement("div",{ref:t,"data-role":"block-layout",className:fe(e)},e.children)},row:function(e){var t=e.left,r=e.right,i=e.spacing,o=e.verticalAlign,a=Array.isArray(t)&&0===t.length,s=Array.isArray(r)&&0===r.length;return a&&s?null:n.createElement("div",{"data-role":"row-layout",className:_e(i)},a?null:n.createElement("div",{"data-role":"row-content",className:Le(o)},t),s?null:n.createElement("div",{"data-role":"row-content",className:Ne(o)},r))},column:function(e){var t=e.children;return n.createElement("div",{"data-role":"column-layout",className:Se.holder},t)},slider:function(e){var t=e.fillColor,r=e.segmentSize,i=e.choices,o=e.designSystem,a=e.onChoiceSelected,s=kt.P.useElWatcher(),c=s.ref,u=s.onMount,p=new xt.xQ,h=new xt.xQ,g=new xt.xQ,f=new xt.xQ,y=new xt.xQ,v=new xt.xQ,w=new It.X(!0),x=i.length-1,I=x>0?100/x:0,S=i.reduce((function(e){var t=e[e.length-1],r=0;return void 0!==t&&(r=t+I),e.push(r),e}),[]),E=new It.X(S[x]),k=St.T(y.pipe(Ct.h(!0)),g.pipe(Ct.h(!1)),f.pipe(Ct.h(!1))).pipe(ot.O(!1)),M=St.T(y,h).pipe(Et.M(k),nt.h((function(e){var t=Nt(e,2);t[0];return t[1]})),it.U((function(e){return Nt(e,1)[0]})),Et.M(c),it.U((function(e){var t=Nt(e,2),r=t[0],n=t[1];return(0,wt.z)(n,d.map((function(e){return e.getBoundingClientRect()})),d.bindTo("sliderClientRect"),d.apS("containerMouseEventVal",d.some(r)))})),et.oA,it.U((function(e){var t=e.containerMouseEventVal,r=e.sliderClientRect,n=r.x,i=r.x+r.width;return t.clientX<=n?0:t.clientX>=i?100:(t.clientX-n)/(i-n)*100}))),T=E.pipe(ut.x(),it.U((function(e){for(var t=-1,r=0;r<S.length-1;r++){var n=S[r],i=S[r+1];e>=n&&e<=i&&(t=e>=(n+i)/2?r+1:r)}return t}))),_=T.pipe(ut.x(),it.U((function(e){return i[e]})));return kt.P.useSubscriptionTo(St.T(M.pipe(ut.x()),k.pipe(ut.x(),nt.h((function(e){return!e})),Et.M(M),it.U((function(e){var t=Nt(e,2);t[0];return t[1]})),it.U((function(e){var t,r=0,n=!0,i=!1,o=void 0;try{for(var a,s=S[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value,c=Math.abs(e-l);(void 0===t||c<t)&&(t=c,r=l)}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}))),p.pipe(nt.h((function(e){return"ArrowRight"===e.key||"ArrowLeft"===e.key})),At.b((function(e){e.preventDefault(),e.stopPropagation()})),it.U((function(e){return e.key})),nt.h((function(e){return"ArrowRight"===e||"ArrowLeft"===e})),Et.M(E),it.U((function(e){var t,r=Nt(e,2),n=r[0],i=r[1];return(t="ArrowRight"===n?i+I:i-I)>100?100:t<0?0:t}))),v.pipe(it.U((function(e){return S[e]})))).pipe(At.b((function(e){return E.next(e)})))),kt.P.useSubscriptionTo(_.pipe(it.U((function(e){return a(e.actions,e.id,l.nz.SelectSliderChoice)})),At.b((function(e){return e()})))),i.length<2?(m.C8.Logging.getLogger("SliderView").warn("Cannot render slider with less than 2 choices.",{choicesLength:i.length}),null):n.createElement(b.F.div,{className:or.outerContainer,onKeyDown:function(e){return p.next(e)},"data-role":"slider"},n.createElement(b.F.div,{className:or.label},_.pipe(it.U((function(e){return e.label})))),n.createElement(b.F.div,{className:or.container,style:{width:A.ux.rem(x*r)},onMouseMove:function(e){return h.next(e)},onMouseUp:function(e){return g.next(e)},onMouseLeave:function(e){return f.next(e)}},n.createElement(b.F.div,_t({},(0,q.Sh)(or.slider,k.pipe(it.U((function(e){return e?or.sliderDragging:null})))),{mount:u,onMouseOver:function(){return w.next(!1)},onFocus:function(){return w.next(!1)}}),n.createElement(b.F.div,_t({},(0,q.Sh)(or.sliderInner,k.pipe(it.U((function(e){return e?or.sliderInnerDragging:null}))),w.pipe(it.U((function(e){return e?or.sliderInnerJiggle:null})))),{style:{width:E.pipe(it.U(A.ux.percent)),color:C[t]}}),n.createElement(b.F.div,_t({},(0,q.Sh)(or.knob,k.pipe(it.U((function(e){return e?or.knobDragging:null})))),{onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),y.next(e)},tabIndex:0}),_.pipe(it.U((function(e){return"known"===e.icon.source.kind?n.createElement(o.icon[e.icon.source.name],{key:e.icon.source.name,backgroundColor:e.icon.backgroundColor}):n.createElement(o.image,Lt({key:e.icon.source.name,backgroundColor:e.icon.backgroundColor},e.icon.source))}))))),k.pipe(it.U((function(e){return i.map((function(t,i){var o={width:A.ux.rem(.25),left:A.ux.rem(0===i?.125:i===x?i*r-.25-.125:i*r-.25)};return n.createElement(b.F.Fragment,{key:t.id},n.createElement("div",{className:or.sliderDivisionPoint,style:o}),T.pipe(it.U((function(t){return t===i||e?null:n.createElement(b.F.div,{className:or.sliderDivisionPointHoverArea,style:Lt({},o,{transform:"scaleX(6)"}),onClick:function(){return v.next(i)}})}))))}))}))))))},alternativeSlider:function(e){var t=e.fillColor,r=e.segmentSize,i=e.choices,o=e.designSystem,a=e.activeAltIndex,s=e.notify;return n.createElement(o.column,{children:[n.createElement(o.slider,{fillColor:t,segmentSize:r,choices:i.map((function(e){return{id:e.id,icon:e.icon,label:e.label,actions:e.actions}})),designSystem:o,onChoiceSelected:s,key:"select"}),n.createElement(b.F.Fragment,{key:"preview"},a.view((function(e){return(0,u.zG)(d.fromNullable(i[e+1]),p.Yo((function(){return"Cannot render alternative slider preview if there's no choice that matches the current alternative index."})),p.UI((function(e){return e.preview})),p.Y$(h.gO.isBlock,(function(){return"Cannot render alternative slider preview if it's not of type `block.`"})),p.Y$(h.gO.hasOnlyTextParts,(function(){return"Cannot render alternative slider preview `block` if not every part is of type `text.`"})),p.UI((function(e){return n.createElement(o.block,x({},e,{children:e.parts.map((function(e,t){return n.createElement(o.text,x({key:t},e))}))}))})),p.fS((function(e){return m.C8.Logging.getLogger("AlternativeSliderView").warn(e),null})))})))],id:h.JX.from("AlternativeSlider")})},scroll:function(e){var t=Ge.h.create(d.none),r=Ge.h.create(d.none),i=Ge.h.create(d.none),o=ft(t,r),a=ft(t,i),s=ct.aj([o,a]).pipe(it.U((function(e){var t=ht(e,2);return{topOverflow:t[0],bottomOverflow:t[1]}})),ot.O({topOverflow:!1,bottomOverflow:!1}),ut.x(yt.equals));return n.createElement(n.Fragment,null,n.createElement("style",null,'div[data-role="scroll"] {\n            border-color: transparent;\n          }'),n.createElement(b.F.div,{"data-role":"scroll",className:s.pipe(it.U((function(t){return function(e){var t=e.maxHeight,r=e.topOverflow,n=e.bottomOverflow,i=[];i.push(bt["scroll-main"]),r&&i.push(bt.overflowTop);n&&i.push(bt.overflowBottom);void 0!==t&&i.push(function(e){var t="overflow-".concat(e),r=vt.get(t);if(void 0!==r)return r;var n=A.ux.style({$debugName:"overflow",maxHeight:A.ux.rem(e),overflowY:"auto",overflowX:"hidden",$nest:{"& > *":{overflow:"visible"}}});return vt.put(t,n),n}(t));return i.length>0?A.ux.joinClasses(i):void 0}(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){mt(e,t,r[t])}))}return e}({},e,t))}))),mount:function(e){return t.set(d.fromNullable(e))}},n.createElement("div",{style:{margin:0},ref:function(e){return r.set(d.fromNullable(e))}}),e.children,n.createElement("div",{style:{margin:0},ref:function(e){return i.set(d.fromNullable(e))}})))},list:function(e){return n.createElement(n.Fragment,null,n.createElement("style",null,'div[data-name="listItem"] {\n            border-color: transparent;\n          }'),n.createElement("div",{"data-role":"list",className:A.ux.joinClasses([Pe["list-main"]])},e.items.map((function(t,r){return e.renderItem(t,r)}))))},listItem:function(e){return n.createElement("div",{"data-role":"list-item"},n.createElement(ze.zx.Animated,We({},(0,ze.L_)(function(e){return{name:"listItem",onClick:e.onClick,title:void 0!==e.tooltip?(0,S.a3)(e.tooltip):void 0}}(e),$e.ghost)),n.createElement(Fe.f.Context.Provider,{value:{hovered:Ge.h.create(!1)}},e.label)))},strongAlertRef:o.b,nativeToneInsightsModal:ar,nativeLearnMoreModal:ar,nativeSettingsModal:ar,nativeFeedbackModal:ar,nativeKeyTakeawaysAssistantCard:ar,nativeProofitModal:ar,dropDownMenuButton:function(e){var t=function(t){return"known"===t.source.kind?n.createElement(e.designSystem.icon[t.source.name],{key:t.source.name,backgroundColor:t.backgroundColor}):n.createElement(e.designSystem.image,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Qe(e,t,r[t])}))}return e}({key:t.source.name,backgroundColor:t.backgroundColor},t.source))};return n.createElement("div",{className:Ke.container},n.createElement(Ve.L,{align:"right",name:"dropDownMenu",theme:{dropdownContainer:Ke.dropdownContainer},label:n.createElement(ze.zx.Tertiary,{name:"dropDownMenuBtn",className:Ke.button},t(e.icon))},e.menu.sections.map((function(r,i){return n.createElement(n.Fragment,{key:i},r.items.map((function(r,i){return n.createElement(ze.zx.Flat,{key:i,name:r.id,onClick:e.onClick(r.onClickActions,r.id)},n.createElement("div",{className:Ke.itemContainer},n.createElement("div",{className:Ke.itemIcon},r.icon&&t(r.icon)),n.createElement("div",{className:Ke.itemText},r.text)))})),i<e.menu.sections.length-1&&n.createElement(Ve.L.Delimiter,null))}))))}}},51935:(e,t,r)=>{r.d(t,{P:()=>N});var n=r(54495),i=r(25186),o=r(27378),a=r(90845),s=r(50628),l=r(2834),c=r(83078),u=r(5114),d=r(38983),p=r(5739),m=["proofitButton","newRevision"],h=r(79880),g=r(26393),f=r(89894),y=function(e){var t=e.parentKey,r=e.from,n=e.transition,i=e.to,a=e.onAnimationEnd,s=e.renderContent,l=v(n.animateFrom,"from"),c=v(n.animateTo,"to"),u=l.needFullWidth||c.needFullWidth;return o.createElement("div",{className:f.ux.joinClasses([b,u?w:""])},r&&o.createElement("div",{onAnimationEnd:function(){return a(n.fromName)},className:f.ux.joinClasses(l.className)},s(r,"from-".concat(t),[])),o.createElement("div",{onAnimationEnd:function(){return a(n.toName)},className:f.ux.joinClasses(c.className)},s(i,"to-".concat(t),[])))};function v(e,t){switch(e){case"fadeOut":return{className:[I],needFullWidth:!1};case"fadeIn":return{className:[C],needFullWidth:!1};case"slideLeft":return{className:A(t,"left"),needFullWidth:!0};case"slideRight":return{className:A(t,"right"),needFullWidth:!0};default:return{className:[],needFullWidth:!1}}}var b=f.ux.style({position:"relative",overflow:"hidden"}),w=f.ux.style({width:"100%"}),x=f.ux.keyframes({from:{opacity:1,visibility:"visible"},to:{opacity:0,visibility:"hidden"}}),I=f.ux.style({position:"absolute",opacity:0,visibility:"hidden",animation:"".concat(x," ").concat(f.ux.seconds(.3)," ease-out")}),S=f.ux.keyframes({from:{opacity:0,visibility:"hidden"},to:{opacity:1,visibility:"visible"}}),C=f.ux.style({animation:"".concat(S," ").concat(f.ux.seconds(.3)," ease-out")}),E=function(e){return"calc(".concat(e,"px * var(--cardWidth))")},A=function(e,t){var r="to"===e?0:"".concat(E("left"===t?-1:1)),n="from"===e?0:"".concat(E("left"===t?1:-1)),i=f.ux.keyframes({from:{transform:"translateX(".concat(n,")"),visibility:"visible"},to:{transform:"translateX(".concat(r,")"),visibility:"from"===e?"hidden":"visible"}}),o=f.ux.style({position:"absolute",left:0,right:0,visibility:"hidden"}),a=f.ux.style({position:"from"===e?"absolute":"relative",animation:"".concat(i," ").concat(f.ux.seconds(.3)," ease-out")});return"from"===e?[o,a]:[a]},k=r(59009);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){T(e,t,r[t])}))}return e}function L(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var N=function(e){var t=e.content,r=e.prevContent,f=e.transitions,v=e.designSystem,b=e.notify,w=e.onMount,x=e.onAnimationEnd,I=e.sduiRootId,S=function(e){return"name"in e},C=function(e){return(0,n.zG)(e,i.UI((function(e){return"applyAlternative"===e.type&&0===e.alternativeIndex?{type:"applyAlternative",alternativeIndex:A.get()}:"selectAlternative"===e.type?(A.set(e.alternativeIndex),e):e})))},E=new Map,A=d.h.create(0),M=function(e,t,r,i,a){var s=S(e)?r.find((function(t){return t.toName===e.name.value})):void 0;if(void 0!==s){var l=E.get(s.fromName);return o.createElement(y,{key:O(t,e),parentKey:t,renderContent:function(e,t){return M(e,O(t,e),[],n.Q1,a)},onAnimationEnd:i,from:l,to:e,transition:s})}switch(e.type){case"text":return o.createElement(v.text,_({key:O(t,e)},e));case"button":var c=M(e.label,t,r,i,a);return o.createElement(p.F.Fragment,{key:O(t,e)},A.view((function(r){return o.createElement(v.button[e.kind],{key:O(t,e),text:c,name:e.name.value,state:e.name.value===h.MU.ButtonAccept&&-1===r?h.BN.Hidden:e.state,tooltip:e.tooltip,shape:e.shape,onClick:N(a)(e.actions,e.id)})})));case"alternativeChoice":return o.createElement(p.F.Fragment,{key:O(t,e)},A.view((function(r){return o.createElement(v.alternativeChoice,{key:O(t,e),designSystem:v,content:e.alternatives,activeIndex:r,notify:N(a)})})));case"icon":return T(e.source,e.backgroundColor,O(t,e));case"image":return o.createElement(v.imageSized,_({key:O(t,e)},e));case"count":return o.createElement(v.count,_({key:O(t,e)},e));case"block":return o.createElement(v.block,_({key:O(t,e)},e,{children:e.parts.map((function(e,n){return M(e,O(t,{id:n.toString()}),r,i,a)}))}));case"row":return o.createElement(v.row,_({key:O(t,e)},e,{left:e.left.map((function(e,n){return M(e,O(t,{id:n.toString()}),r,i,a)})),right:e.right.map((function(e,n){return M(e,O(t,{id:n.toString()}),r,i,a)}))}));case"column":return o.createElement(v.column,_({key:O(t,e)},e,{children:e.children.map((function(e,n){return M(e,O(t,{id:n.toString()}),r,i,a)}))}));case"slider":return o.createElement(v.slider,_({key:O(t,e),designSystem:v,onChoiceSelected:N(a)},e));case"alternativeSlider":return o.createElement(v.alternativeSlider,_({key:O(t,e),designSystem:v,activeAltIndex:A.view(),notify:N(a)},e));case"strongAlertRef":var d=_({},a,{alertRef:u.some(e)});return o.createElement(v.strongAlertRef,_({key:t},e,{children:M(e.child,t,r,i,d)}));case"scroll":return o.createElement(v.scroll,_({key:O(t,e),children:M(e.child,t,r,i,a)},e));case"list":return o.createElement(v.list,_({key:O(t,e),renderItem:function(n,s){var l=M(n.label,t,r,i,a);return o.createElement(v.listItem,{key:O(t,e)+"."+s.toString(),label:l,tooltip:n.tooltip,onClick:N(a)(n.actions,e.id)})}},e));case"alertsCount":return o.createElement(v.alertsCount,_({key:O(t,e),textView:v.text},e));case"assistantCard":return M(e.child,t,r,i,a);case"nativeToneInsightsModal":return o.createElement(v.nativeToneInsightsModal,_({key:O(t,e)},e));case"nativeLearnMoreModal":return o.createElement(v.nativeLearnMoreModal,_({key:O(t,e)},e));case"nativeSettingsModal":return o.createElement(v.nativeSettingsModal,_({key:O(t,e)},e));case"nativeFeedbackModal":return o.createElement(v.nativeFeedbackModal,_({key:O(t,e)},e));case"nativeKeyTakeawaysAssistantCard":return o.createElement(v.nativeKeyTakeawaysAssistantCard,_({key:O(t,e)},e));case"nativeProofitModal":return o.createElement(v.nativeProofitModal,_({key:O(t,e)},e));case"viewStack":return(0,n.zG)(u.fromNullable(e.views[e.selected]),u.fold((function(){return o.createElement("div",null,"unknown selected view, corresponding view is missing")}),(function(e){return M(e,t,r,i,a)})));case"dropDownMenuButton":return o.createElement(v.dropDownMenuButton,_({key:O(t,e),designSystem:v,onClick:N(a)},e));case"assistantFeed":case"gButton":throw new Error("".concat(e.type," can not be rendered directly"));default:return function(e){if(m.includes(e.type))throw new Error("".concat(e.type," component rendering is not implemented here"));return o.createElement("div",null,"unknown element")}(e)}},T=function(e,t,r){return"known"===e.kind?o.createElement(v.icon[e.name],{key:r,backgroundColor:t}):o.createElement(v.image,_({key:r},e,{backgroundColor:t}))},N=function(e){return function(t,r){return function(){return(0,n.zG)(t,C,(function(t){return b(r,t,e)}))}}};u.isSome(r)&&g.a.forEach(c.MH(r),(function(e){S(e)&&E.set(e.name.value,e)}));var D=f.reduce((function(e,t){return E.has(t.fromName)&&(e+=1),e+=1}),0),U=d.h.create([]);a.P.useSubscriptionTo((0,n.zG)(U,s.P((function(e){return e.length===D})),l.b(x))),a.P.useEffectOnDidMount(w);var R={alertRef:u.none};return o.createElement(k.o.Context.Provider,{value:{alertIds:[]}},M(t,I,f,(function(e){return U.modify((function(t){return L(t).concat([e])}))}),R))};function O(e,t){return"".concat(e,".").concat(t.id)}},59009:(e,t,r)=>{r.d(t,{b:()=>a,o:()=>n});var n,i=r(88056),o=r(27378);(n||(n={})).Context=o.createContext(i.Y.invariantContent("AlertRefState"));var a=function(e){var t=e.children,r=e.alertIds;return o.createElement(n.Context.Provider,{value:{alertIds:r}},t)}},18756:(e,t,r)=>{function n(e){return!(!e||"function"!=typeof e.equals||"function"!=typeof e.hashCode)}function i(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){const r=e.valueOf(),n=t.valueOf();if(r===n||r!=r&&n!=n)return!0;if(!r||!n)return!1}return!(!n(e)||!e.equals(t))}r.d(t,{AC:()=>a});function o(e){if("number"==typeof e)return e&e;if("function"==typeof e.valueOf){const t=e.valueOf();if(t!==e)return o(t)}return n(e)?e.hashCode():a(String(e))}function a(e){let t=0;if(null==e||0===e.length)return t;for(let r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return t}class s extends Error{constructor(e){let t="";for(const r of e.slice(0,2)){let e="";e=r instanceof Error?`${r.name}(${r.message})`:`${r}`,t+=", "+e}t=t.slice(2),e.length>2&&(t+=", ..."),super(t),this.name="CompositeError",this.errorsRef=e;this.constructor=s,this.__proto__=s.prototype}errors(){return this.errorsRef.slice()}}Error;class l extends Error{constructor(e){super(e),this.name="NoSuchElementError";this.constructor=l,this.__proto__=l.prototype}}Error;class c extends Error{constructor(e){super(e),this.name="IllegalStateError";this.constructor=c,this.__proto__=c.prototype}}class u extends Error{constructor(e){super(e),this.name="IllegalArgumentError";this.constructor=u,this.__proto__=u.prototype}}class d extends Error{constructor(e){super(e),this.name="NotImplementedError";this.constructor=d,this.__proto__=d.prototype}}class p extends Error{constructor(e){super(e),this.name="TimeoutError";this.constructor=p,this.__proto__=p.prototype}}function m(e){return function(){const t=Array.prototype.slice.call(arguments);return t.push(this),e.apply(void 0,t)}}function h(e,t,r){const n=e,i=n.prototype,o="fantasy-land/",a="equals",s=o+a,l="map",c=o+l,u="ap",d=o+u,p=o+"of",h="chain",g=o+h,f="chainRec",y=o+f;i.equals?i[s]=i.equals:r&&(i[s]=m(r.equals)),i.map?i[c]=i.map:t&&(i[c]=m(t.map)),i.ap?i[d]=i.ap:t&&(i[d]=m(t.ap)),n.pure?n[p]=n.pure:t&&(n[p]=t.of),i.chain?i[g]=i.chain:t&&(i[g]=m(t.chain)),n.chainRec?n[y]=n.chainRec:t&&(n[y]=t.chainRec)}class g{constructor(e,t){this._isRight="right"===t,this.value=e}isLeft(){return!this._isRight}isRight(){return this._isRight}contains(e){return this._isRight&&i(this.value,e)}exists(e){return this._isRight&&e(this.value)}filterOrElse(e,t){return this._isRight?e(this.value)?this:y(t()):this}flatMap(e){return this._isRight?e(this.value):this}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}fold(e,t){return this._isRight?t(this.value):e(this.value)}forAll(e){return!this._isRight||e(this.value)}get(){if(this._isRight)return this.value;throw new l("left.get()")}getOrElse(e){return this._isRight?this.value:e}getOrElseL(e){return this._isRight?this.value:e()}map(e){return this._isRight?b(e(this.value)):this}forEach(e){this._isRight&&e(this.value)}swap(){return this._isRight?y(this.value):b(this.value)}toOption(){return this._isRight?S(this.value):C}equals(e){return null!=e&&(this._isRight===e._isRight&&i(this.value,e.value))}hashCode(){return this._isRight?o(this.value)<<2:o(this.value)<<3}static pure(e){return new v(e)}static left(e){return y(e)}static right(e){return b(e)}static map2(e,t,r){return e.isLeft()?e:t.isLeft()?t:b(r(e.value,t.value))}static map3(e,t,r,n){return e.isLeft()?e:t.isLeft()?t:r.isLeft()?r:b(n(e.value,t.value,r.value))}static map4(e,t,r,n,i){return e.isLeft()?e:t.isLeft()?t:r.isLeft()?r:n.isLeft()?n:b(i(e.value,t.value,r.value,n.value))}static map5(e,t,r,n,i,o){return e.isLeft()?e:t.isLeft()?t:r.isLeft()?r:n.isLeft()?n:i.isLeft()?i:b(o(e.value,t.value,r.value,n.value,i.value))}static map6(e,t,r,n,i,o,a){return e.isLeft()?e:t.isLeft()?t:r.isLeft()?r:n.isLeft()?n:i.isLeft()?i:o.isLeft()?o:b(a(e.value,t.value,r.value,n.value,i.value,o.value))}static tailRecM(e,t){let r=e;for(;;){const e=t(r);if(!e.isRight())return e;const n=e.value;if(n.isRight())return b(n.value);r=n.value}}}class f extends g{constructor(e){super(e,"left")}}function y(e){return new f(e)}class v extends g{constructor(e){super(e,"right")}}function b(e){return new v(e)}const w={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:g.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>g.tailRecM(t,(t=>e(g.left,g.right,t)))};h(g,w,w);class x{constructor(e,t){this._isEmpty=null!=t?t:null==e,this.value=e}get(){if(!this._isEmpty)return this.value;throw new l("Option.get")}getOrElse(e){return this._isEmpty?e:this.value}orNull(){return this._isEmpty?null:this.value}orUndefined(){return this._isEmpty?void 0:this.value}getOrElseL(e){return this._isEmpty?e():this.value}orElse(e){return this._isEmpty?e:this}orElseL(e){return this._isEmpty?e():this}isEmpty(){return this._isEmpty}nonEmpty(){return!this._isEmpty}map(e){return this._isEmpty?C:S(e(this.value))}flatMap(e){return this._isEmpty?C:e(this.value)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}filter(e){return this._isEmpty||!e(this.value)?C:this}fold(e,t){return this._isEmpty?e():t(this.value)}contains(e){return!this._isEmpty&&i(this.value,e)}exists(e){return!this._isEmpty&&e(this.value)}forAll(e){return this._isEmpty||e(this.value)}forEach(e){this._isEmpty||e(this.value)}equals(e){return null!=e&&(this.nonEmpty()&&e.nonEmpty()?i(this.value,e.value):this.isEmpty()&&e.isEmpty())}hashCode(){return this._isEmpty?2433880:null==this.value?9735524:o(this.value)<<2}static of(e){return null!=e?S(e):C}static some(e){return new x(e,!1)}static none(){return C}static empty(){return C}static pure(e){return S(e)}static map2(e,t,r){return e.nonEmpty()&&t.nonEmpty()?S(r(e.value,t.value)):C}static map3(e,t,r,n){return e.nonEmpty()&&t.nonEmpty()&&r.nonEmpty()?S(n(e.value,t.value,r.value)):C}static map4(e,t,r,n,i){return e.nonEmpty()&&t.nonEmpty()&&r.nonEmpty()&&n.nonEmpty()?S(i(e.value,t.value,r.value,n.value)):C}static map5(e,t,r,n,i,o){return e.nonEmpty()&&t.nonEmpty()&&r.nonEmpty()&&n.nonEmpty()&&i.nonEmpty()?S(o(e.value,t.value,r.value,n.value,i.value)):C}static map6(e,t,r,n,i,o,a){return e.nonEmpty()&&t.nonEmpty()&&r.nonEmpty()&&n.nonEmpty()&&i.nonEmpty()&&o.nonEmpty()?S(a(e.value,t.value,r.value,n.value,i.value,o.value)):C}static tailRecM(e,t){let r=e;for(;;){const e=t(r);if(!e.nonEmpty())return C;{const t=e.value;if(t.isRight())return S(t.value);r=t.value}}}}class I extends x{constructor(e){super(e,!1)}}function S(e){return new I(e)}const C=new class extends x{constructor(){super(void 0,!0)}},E={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:x.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>x.tailRecM(t,(t=>e(g.left,g.right,t)))};h(x,E,E);class A{constructor(e,t){this._isSuccess="success"===t,this.value=e}isSuccess(){return this._isSuccess}isFailure(){return!this._isSuccess}get(){if(!this._isSuccess)throw this.value;return this.value}getOrElse(e){return this._isSuccess?this.value:e}getOrElseL(e){return this._isSuccess?this.value:e()}orNull(){return this._isSuccess?this.value:null}orUndefined(){return this._isSuccess?this.value:void 0}orElse(e){return this._isSuccess?this:e}orElseL(e){return this._isSuccess?this:e()}failed(){return this._isSuccess?_(new l("try.failed()")):M(this.value)}fold(e,t){return this._isSuccess?t(this.value):e(this.value)}filter(e){if(!this._isSuccess)return this;try{return e(this.value)?this:_(new l(`Predicate does not hold for ${this.value}`))}catch(e){return _(e)}}flatMap(e){if(!this._isSuccess)return this;try{return e(this.value)}catch(e){return _(e)}}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}map(e){return this._isSuccess?A.of((()=>e(this.value))):this}forEach(e){this._isSuccess&&e(this.value)}recover(e){return this._isSuccess?this:A.of((()=>e(this.value)))}recoverWith(e){try{return this._isSuccess?this:e(this.value)}catch(e){return _(e)}}toOption(){return this._isSuccess?S(this.value):C}toEither(){return this._isSuccess?b(this.value):y(this.value)}equals(e){return null!=e&&(this._isSuccess?e._isSuccess&&i(this.value,e.value):!e._isSuccess&&i(this.value,e.value))}hashCode(){return this._isSuccess,o(this.value)}static of(e){try{return M(e())}catch(e){return _(e)}}static pure(e){return A.success(e)}static unit(){return N}static success(e){return M(e)}static failure(e){return _(e)}static raise(e){return _(e)}static map2(e,t,r){if(e.isFailure())return e;if(t.isFailure())return t;try{return M(r(e.value,t.value))}catch(e){return _(e)}}static map3(e,t,r,n){if(e.isFailure())return e;if(t.isFailure())return t;if(r.isFailure())return r;try{return M(n(e.value,t.value,r.value))}catch(e){return _(e)}}static map4(e,t,r,n,i){if(e.isFailure())return e;if(t.isFailure())return t;if(r.isFailure())return r;if(n.isFailure())return n;try{return M(i(e.value,t.value,r.value,n.value))}catch(e){return _(e)}}static map5(e,t,r,n,i,o){if(e.isFailure())return e;if(t.isFailure())return t;if(r.isFailure())return r;if(n.isFailure())return n;if(i.isFailure())return i;try{return M(o(e.value,t.value,r.value,n.value,i.value))}catch(e){return _(e)}}static map6(e,t,r,n,i,o,a){if(e.isFailure())return e;if(t.isFailure())return t;if(r.isFailure())return r;if(n.isFailure())return n;if(i.isFailure())return i;if(o.isFailure())return o;try{return M(a(e.value,t.value,r.value,n.value,i.value,o.value))}catch(e){return _(e)}}static tailRecM(e,t){let r=e;for(;;)try{const e=t(r);if(e.isFailure())return e;const n=e.get();if(n.isRight())return M(n.value);r=n.value}catch(e){return _(e)}}}class k extends A{constructor(e){super(e,"success")}}function M(e){return new k(e)}class T extends A{constructor(e){super(e,"failure")}}function _(e){return new T(e)}const L={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:A.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>A.tailRecM(t,(t=>e(g.left,g.right,t)))};h(A,L,L);const N=M(void 0);class O{static of(e){return new D(e)}static empty(){return R}static collection(...e){return new F(e)}static cancelAll(e){let t=null;for(const r of e)try{r.cancel()}catch(e){t?t.push(e):t=[e]}if(t)throw 1===t.length?t[0]:new s(t)}}class D extends O{constructor(e){super(),this.thunk=e}cancel(){if(null!==this.thunk){const e=this.thunk;this.thunk=null,e()}}}class U{constructor(){this._funIsDummy=!0}cancel(){}}const R=new U;class P{static of(e){return new j(e)}static empty(){return new z}static alreadyCanceled(){return B}static collection(...e){return new F(e)}}class F extends P{constructor(e){super(),this._refs=e}isCanceled(){return!this._refs}cancel(){if(this._refs)try{O.cancelAll(this._refs)}finally{delete this._refs}}}class j extends D{isCanceled(){return null===this.thunk}}class z extends P{constructor(){super(...arguments),this.canceled=!1}isCanceled(){return this.canceled}cancel(){this.canceled=!0}}const B=new class extends U{isCanceled(){return!0}};new class extends U{isCanceled(){return!0}cancel(){}update(e){return e.cancel(),this}};class G{constructor(e){this._underlying=e,this._canceled=!1}update(e){return this._canceled?e.cancel():this._underlying=e,this}isCanceled(){return this._canceled}cancel(){this._canceled||(this._canceled=!0,this._underlying&&(this._underlying.cancel(),delete this._underlying))}collapse(){if(this._underlying&&this._underlying instanceof G){const e=this._underlying;this._underlying=e._underlying,this._canceled=e._canceled}return this}clear(){return this._canceled||(this._underlying=void 0),this}static empty(){return new G}static of(e){return new G(O.of(e))}}class W{constructor(e){this._refs=e?e.slice(0):[]}cancel(){if(this._refs)try{O.cancelAll(this._refs)}finally{delete this._refs}}isCanceled(){return!this._refs}push(e){return this._refs?this._refs.push(e):e.cancel(),this}pop(){return this._refs&&this._refs.pop()||O.empty()}static empty(){return new W}static collection(...e){return new W(e)}}class H{constructor(e){this._underlying=e||R,this._chained=!1}update(e){if(!e)throw new u("cannot update to null value");return this._underlying?this._chained?(this._underlying.update(e),this):(this._underlying=e,this):(e.cancel(),this)}cancel(){this._underlying&&(this._underlying.cancel(),this._chained=!1,delete this._underlying)}clear(){this._underlying&&(this._underlying=R,this._chained=!1)}isCanceled(){return!this._underlying||this._chained&&this._underlying.isCanceled()}chainTo(e){if(!e)throw new u("cannot chain to null value");if(e===this)return this;if(!this._underlying)return e.cancel(),this;let t=e,r=!0;for(;t&&r;)if(t._chained){const e=t._underlying;if(e===this)return this;t=e,r=!!e}else t._underlying||(t=void 0),r=!1;if(t){const e=this._underlying;this._underlying=t,this._chained=!0,e instanceof U||t.update(e)}else this.cancel();return this}static empty(){return new H}}class ${toString(){return this.label.toUpperCase()}}const V=1e3,Q=1e6,Y=1e3*Q,Z=60*Y,q=60*Z,J=24*q,K=9007199254740992,X=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)};function ee(e,t,r){return e>r?K:e<-r?-9007199254740992:e*t}const te=new class extends ${constructor(){super(...arguments),this.ord=0,this.label="nanoseconds"}convert(e,t){return t.toNanos(e)}toNanos(e){return e}toMicros(e){return X(e/1e3)}toMillis(e){return X(e/(Q/1))}toSeconds(e){return X(e/(Y/1))}toMinutes(e){return X(e/(Z/1))}toHours(e){return X(e/(q/1))}toDays(e){return X(e/(J/1))}};const re=new class extends ${constructor(){super(...arguments),this.ord=1,this.label="microseconds"}convert(e,t){return t.toMicros(e)}toNanos(e){return ee(e,1e3,X(K/1e3))}toMicros(e){return e}toMillis(e){return X(e/1e3)}toSeconds(e){return X(e/(Y/V))}toMinutes(e){return X(e/(Z/V))}toHours(e){return X(e/(q/V))}toDays(e){return X(e/(J/V))}};const ne=new class extends ${constructor(){super(...arguments),this.ord=2,this.label="milliseconds"}convert(e,t){return t.toMillis(e)}toNanos(e){return ee(e,Q/1,X(K/(Q/1)))}toMicros(e){return ee(e,1e3,X(K/1e3))}toMillis(e){return e}toSeconds(e){return X(e/1e3)}toMinutes(e){return X(e/6e4)}toHours(e){return X(e/(q/Q))}toDays(e){return X(e/(J/Q))}};const ie=new class extends ${constructor(){super(...arguments),this.ord=3,this.label="seconds"}convert(e,t){return t.toSeconds(e)}toNanos(e){return ee(e,Y/1,X(K/(Y/1)))}toMicros(e){return ee(e,Y/V,X(K/(Y/V)))}toMillis(e){return ee(e,1e3,X(K/1e3))}toSeconds(e){return e}toMinutes(e){return X(e/60)}toHours(e){return X(e/3600)}toDays(e){return X(e/86400)}};const oe=new class extends ${constructor(){super(...arguments),this.ord=4,this.label="minutes"}convert(e,t){return t.toMinutes(e)}toNanos(e){return ee(e,Z/1,X(K/(Z/1)))}toMicros(e){return ee(e,Z/V,X(K/(Z/V)))}toMillis(e){return ee(e,6e4,X(K/6e4))}toSeconds(e){return ee(e,60,X(K/60))}toMinutes(e){return e}toHours(e){return X(e/60)}toDays(e){return X(e/1440)}};const ae=new class extends ${constructor(){super(...arguments),this.ord=5,this.label="hours"}convert(e,t){return t.toHours(e)}toNanos(e){return ee(e,q/1,X(K/(q/1)))}toMicros(e){return ee(e,q/V,X(K/(q/V)))}toMillis(e){return ee(e,q/Q,X(K/(q/Q)))}toSeconds(e){return ee(e,3600,X(K/3600))}toMinutes(e){return ee(e,60,X(K/60))}toHours(e){return e}toDays(e){return X(e/24)}};const se=new class extends ${constructor(){super(...arguments),this.ord=6,this.label="days"}convert(e,t){return t.toDays(e)}toNanos(e){return ee(e,J/1,X(K/(J/1)))}toMicros(e){return ee(e,J/V,X(K/(J/V)))}toMillis(e){return ee(e,J/Q,X(K/(J/Q)))}toSeconds(e){return ee(e,86400,X(K/86400))}toMinutes(e){return ee(e,1440,X(K/1440))}toHours(e){return ee(e,24,X(K/24))}toDays(e){return e}};class le{constructor(e,t){if(isNaN(e))throw new u("NaN is not supported for a Duration");this.duration=X(e),this.unit=t}isFinite(){return isFinite(this.duration)}toNanos(){return te.convert(this.duration,this.unit)}toMicros(){return re.convert(this.duration,this.unit)}toMillis(){return ne.convert(this.duration,this.unit)}toSeconds(){return ie.convert(this.duration,this.unit)}toMinutes(){return oe.convert(this.duration,this.unit)}toHours(){return ae.convert(this.duration,this.unit)}toDays(){return se.convert(this.duration,this.unit)}convertTo(e){return new le(e.convert(this.duration,this.unit),e)}negate(){switch(this.duration){case 1/0:return le.negInf();case-1/0:return le.inf();default:return new le(-this.duration,this.unit)}}plus(e){if(!isFinite(this.duration)){if(!isFinite(e.duration)&&this.duration!==e.duration)throw new u("cannot deal with two infinities with different signs, as that would be a NaN");return this}if(0===e.duration)return this;if(0===this.duration)return e;if(!isFinite(e.duration))return e;let t=this,r=e;return r.unit.ord<t.unit.ord&&(t=e,r=this),r=r.convertTo(t.unit),new le(t.duration+r.duration,t.unit)}minus(e){return this.plus(e.negate())}equals(e){function t(e,t){return e.unit.convert(t.duration,t.unit)===e.duration}return isFinite(this.duration)?this.unit.ord<=e.unit.ord?t(this,e):t(e,this):!isFinite(e.duration)&&this.duration===e.duration}hashCode(){return this.isFinite()?this.toNanos():this.duration===1/0?7540833725118015:422082410550358}toString(){return this.isFinite()?`${this.duration} ${this.unit.label}`:this.duration>=0?"[end of time]":"[beginning of time]"}static of(e){return"number"==typeof e?le.millis(e):e}static zero(){return new le(0,se)}static inf(){return new le(1/0,se)}static negInf(){return new le(-1/0,se)}static nanos(e){return new le(e,te)}static micros(e){return new le(e,re)}static millis(e){return new le(e,ne)}static seconds(e){return new le(e,ie)}static minutes(e){return new le(e,oe)}static hours(e){return new le(e,ae)}static days(e){return new le(e,se)}}class ce{constructor(e){this._previous=[],this.get=e}set(e){return this.setL((()=>e))}setL(e){this._previous.push(this.get),this.get=e}revert(){const e=this._previous.pop();e&&(this.get=e)}bind(e,t){return this.bindL((()=>e),t)}bindL(e,t){const r=this.get,n=this._previous.slice(0),i=this;try{return i.get=e,t()}finally{i.get=r,i._previous=n}}static of(e){return new ce(e)}}function ue(e){if(!e)return[];if("[object Array]"===Object.prototype.toString.call(e))return e;const t=e[Symbol.iterator](),r=[];for(;;){const e=t.next();if(e.value&&r.push(e.value),e.done)return r}}const de=Math.log(2);function pe(e){if(e<0)throw new u("nr must be positive");const t=Math.ceil(function(e){return Math.log(e)/de}(e));return 1<<(t>30?30:t&t)}class me{constructor(e){switch(this.batchIndex=0,this.executionModel=e,e.type){case"alwaysAsync":this.executeBatched=this.executeAsync;break;case"synchronous":this.executeBatched=this.trampoline;break;case"batched":const t=e.recommendedBatchSize-1;this.executeBatched=e=>{const r=this.batchIndex+1&t;return r?(this.batchIndex=r,this.trampoline(e)):this.executeAsync(e)}}}scheduleWithFixedDelay(e,t,r){const n=(e,i,o)=>i.update(e.scheduleOnce(o,(()=>{r(),n(e,i,t)}))),i=G.empty();return n(this,i,e)}scheduleAtFixedRate(e,t,r){const n=(e,t,i,o)=>t.update(e.scheduleOnce(i,(()=>{const i=e.currentTimeMillis();r();const a=e.currentTimeMillis()-i,s=Math.max(0,o-a);n(e,t,o,s)}))),i=G.empty();return n(this,i,"number"==typeof e?e:e.toMillis(),"number"==typeof t?t:t.toMillis())}}me.global=ce.of((()=>ye));class he{constructor(e,t){switch(this.type=e,e){case"synchronous":this.recommendedBatchSize=1073741824;break;case"alwaysAsync":this.recommendedBatchSize=1;break;case"batched":this.recommendedBatchSize=pe(t||128)}}equals(e){return this.type===e.type&&this.recommendedBatchSize===e.recommendedBatchSize}hashCode(){return 47*a(this.type)+this.recommendedBatchSize}static synchronous(){return new he("synchronous")}static alwaysAsync(){return new he("alwaysAsync")}static batched(e){return new he("batched",e)}}he.global=ce.of((()=>he.batched()));class ge{constructor(e){this._isActive=!1,this._queue=[],this._reporter=e}execute(e){this._isActive?this._queue.push(e):this.runLoop(e)}runLoop(e){this._isActive=!0;try{let t=e;for(;t;){try{t()}catch(e){this._reporter(e)}t=this._queue.pop()}}finally{this._isActive=!1}}}class fe extends me{constructor(e=!1,t=he.global.get(),r){super(t),r&&(this.reportFailure=r),this._trampoline=new ge(this.reportFailure),this._useSetImmediate=!!e&&"function"==typeof setImmediate,this.executeAsync=this._useSetImmediate?e=>setImmediate(ve(e,this.reportFailure)):e=>setTimeout(ve(e,this.reportFailure))}executeAsync(e){throw new d("Constructor of GlobalScheduler wasn't executed")}trampoline(e){return this._trampoline.execute(e)}reportFailure(e){console.error(e)}currentTimeMillis(){return Date.now()}scheduleOnce(e,t){const r=Math.max(0,le.of(e).toMillis()),n=setTimeout((()=>{this.batchIndex=0;try{t()}catch(e){this.reportFailure(e)}}),r);return O.of((()=>clearTimeout(n)))}withExecutionModel(e){return new fe(this._useSetImmediate,e)}}const ye=new fe(!0);function ve(e,t){return()=>{try{e()}catch(e){t(e)}}}class be{transform(e,t){return this.transformWith((t=>be.pure(e(t),this._scheduler)),(e=>be.pure(t(e),this._scheduler)))}attempt(){return this.transform(y,b)}flatMap(e){return this.transformWith(be.raise,e)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}forEach(e){this.onComplete((t=>t.forEach(e)))}map(e){return this.transformWith(be.raise,(t=>be.pure(e(t),this._scheduler)))}recoverWith(e){return this.transformWith(e,be.pure)}recover(e){return this.transformWith((t=>be.pure(e(t),this._scheduler)),(e=>be.pure(e,this._scheduler)))}then(e,t){if(!e&&!t)return this;const r=this._scheduler;return this.transformWith(Ae(t,(e=>be.raise(e,r)),r),Ae(e,(e=>be.pure(e,r)),r))}toPromise(){return new Promise(((e,t)=>{this.onComplete((r=>r.fold(t,e)))}))}delayResult(e){return this.transformWith((t=>be.delayedTick(e,this._scheduler).flatMap((()=>be.raise(t,this._scheduler)))),(t=>be.delayedTick(e,this._scheduler).map((()=>t))))}timeout(e){const t=be.raise(new p(le.of(e).toString()),this._scheduler);return this.timeoutTo(e,(()=>t))}timeoutTo(e,t){const r=[this,be.delayedTick(e,this._scheduler).flatMap((()=>t()))];return be.firstCompletedOf(r,this._scheduler)}static of(e,t=me.global.get()){const r=Ce.empty(t);return t.executeAsync((()=>r.tryComplete(A.of(e)))),r.future()}static pure(e,t=me.global.get()){return new we(M(e),t)}static raise(e,t=me.global.get()){return new we(_(e),t)}static create(e,t=me.global.get()){const r=Ce.empty(t);try{const t=e(r.complete);return r.future(t||void 0)}catch(e){return be.raise(e,t)}}static unit(e=me.global.get()){const t=e;let r=t._funCache&&t._funCache.futureUnit;return r||(r=new we(M(void 0),e),t._funCache=t._funCache||{},t._funCache.futureUnit=r),r}static delayedTick(e,t=me.global.get()){return be.create((r=>t.scheduleOnce(e,(()=>r(M(void 0))))),t)}static tailRecM(e,t,r=me.global.get()){return t(e).flatMap((e=>e.isRight()?be.pure(e.get(),r):be.tailRecM(e.swap().get(),t,r)))}static fromPromise(e,t=me.global.get()){return e instanceof be?e.withScheduler(t):be.create((t=>{e.then((e=>t(M(e))),(e=>t(_(e))))}),t)}static fromTry(e,t=me.global.get()){return new we(e,t)}static firstCompletedOf(e,t=me.global.get()){return function(e,t){return be.create((r=>{try{const n=Me(e,t);if(0===n.length)return r(_(new u("empty list of futures")));let i=!1;for(let e=0;e<n.length;e++){const o=e;n[e].onComplete((e=>{i?e.isFailure()&&t.reportFailure(e.failed().get()):(i=!0,ke(n,t,o),r(e))}))}return O.of((()=>ke(n,t)))}catch(e){r(_(e))}}),t)}(e,t)}static traverse(e,t=1/0,r=me.global.get()){return n=>function(e,t,r,n){if(r<=0)throw new u("parallelism <= 0");return be.of((()=>ue(e)),n).flatMap((e=>Te(e,t,r,n,0,[])))}(e,n,t,r)}static sequence(e,t=me.global.get()){return function(e,t){return be.create((r=>{try{const n=Me(e,t);if(0===n.length)return r(M([]));const i=O.of((()=>ke(n,t)));let o=!1,a=0,s=[];for(let e=0;e<n.length;e++){const l=e;n[e].onComplete((e=>{a+=1,e.isSuccess()?o||(s[l]=e.get(),o=a===n.length,o&&r(M(s))):o?t.reportFailure(e.failed().get()):(o=!0,i.cancel(),r(e))}))}return i}catch(e){r(_(e))}}),t)}(e,t)}static map2(e,t,r,n=me.global.get()){return be.sequence([e,t],n).map((e=>r(e[0],e[1])))}static map3(e,t,r,n,i=me.global.get()){return be.sequence([e,t,r],i).map((e=>n(e[0],e[1],e[2])))}static map4(e,t,r,n,i,o=me.global.get()){return be.sequence([e,t,r,n],o).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,r,n,i,o,a=me.global.get()){return be.sequence([e,t,r,n,i],a).map((e=>o(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,r,n,i,o,a,s=me.global.get()){return be.sequence([e,t,r,n,i,o],s).map((e=>a(e[0],e[1],e[2],e[3],e[4],e[5])))}}class we extends be{constructor(e,t){super(),this._value=e,this._scheduler=t}cancel(){}value(){return S(this._value)}withScheduler(e){return this._scheduler===e?this:new we(this._value,e)}onComplete(e){this._scheduler.executeBatched((()=>e(this._value)))}transformWith(e,t){return Ee(this,e,t,this._scheduler)}toPromise(){return this._value.fold((e=>Promise.reject(e)),(e=>Promise.resolve(e)))}}class xe{constructor(){this.id=null,this.ref=null}compressedRoot(){let e=this;for(;"chained"===e.id;)e=e.ref,this.ref=e;return e}value(){switch(this.id){case null:return C;case"complete":return S(this.ref);case"chained":return this.compressedRoot().value()}}tryComplete(e,t){switch(this.id){case null:const r=this.ref;if(this.ref=e,this.id="complete",r)for(let n=0;n<r.length;n++)t.executeBatched((()=>r[n](e)));return!0;case"complete":return!1;case"chained":const n=this.ref.compressedRoot(),i=n.tryComplete(e,t);return this.id="complete",this.ref=i?e:n.value().get(),i}}chainTo(e,t){switch(this.id){case null:const r=this.ref;if(this.id="chained",this.ref=e.compressedRoot(),r&&r.length>0)for(let n=0;n<r.length;n++)e.onComplete(r[n],t);break;case"chained":this.compressedRoot().chainTo(e.compressedRoot(),t);break;case"complete":e.tryComplete(this.ref,t)}}onComplete(e,t){switch(this.id){case null:this.ref||(this.ref=[]),this.ref.push(e);break;case"complete":t.executeBatched((()=>e(this.ref)));break;case"chained":this.ref.onComplete(e,t)}}}const Ie={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:be.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>be.tailRecM(t,(t=>e(g.left,g.right,t)))};h(be,Ie);class Se extends be{constructor(e,t,r){super(),this._state=e,this._scheduler=r,t&&(this._cancelable=t)}value(){return this._state.value()}onComplete(e){return this._state.onComplete(e,this._scheduler)}cancel(){if(this._cancelable)try{this._cancelable.cancel()}finally{delete this._cancelable}}withScheduler(e){return this._scheduler===e?this:new Se(this._state,this._cancelable,e)}transformWith(e,t){return Ee(this,e,t,this._scheduler,this._cancelable)}}class Ce{constructor(e,t){this.tryComplete=e=>this._state.tryComplete(e,this._scheduler),this.complete=e=>{if(!this.tryComplete(e))throw new c("Cannot complete a FutureMaker twice!")},this._state=e,this._scheduler=t}trySuccess(e){return this.tryComplete(M(e))}success(e){return this.complete(M(e))}tryFailure(e){return this.tryComplete(_(e))}failure(e){return this.complete(_(e))}chainTo(e){this._state.chainTo(e._state,this._scheduler)}future(e){return"complete"===this._state.id?new we(this._state.ref,this._scheduler):new Se(this._state,e,this._scheduler)}withScheduler(e){return this._scheduler===e?this:new Ce(this._state,e)}static empty(e=me.global.get()){return new Ce(new xe,e)}static completed(e,t=me.global.get()){const r=new xe;return r.id="complete",r.ref=e,new Ce(r,t)}}function Ee(e,t,r,n,i){const o=Ce.empty(n),a=new H(i);return e.onComplete((e=>{let i;try{i=e.fold(t,r)}catch(e){i=be.raise(e)}if(i.value().isEmpty()){const e=i._cancelable;e&&e instanceof H?e.chainTo(a):!e||e instanceof U||a.update(e)}else a.clear();i instanceof Se?i._state.chainTo(o._state,n):i.onComplete(o.tryComplete)})),o.future(a)}function Ae(e,t,r){return n=>{if("function"!=typeof e)return t(n);const i=e(n);return i?"function"==typeof i.then?be.fromPromise(i,r):be.pure(i,r):be.pure(n,r)}}function ke(e,t,r=-1){const n=[];for(let t=0;t<e.length;t++)if(t!==r)try{e[t].cancel()}catch(e){n.push(e)}if(n.length>0)for(const e of n)t.reportFailure(e)}function Me(e,t){if(!e)return[];if("[object Array]"===Object.prototype.toString.call(e))return e;const r=[];try{const t=e[Symbol.iterator]();for(;;){const e=t.next();if(e.value&&r.push(e.value),e.done)break}return r}catch(e){throw ke(r,t),e}}function Te(e,t,r,n,i,o){if(i>=e.length)return be.pure(o,n);let a=[],s=0;try{for(;i<e.length&&s<r;)a.push(t(e[i++])),s+=1;const l=be.sequence(a,n).map((e=>{for(let t=0;t<e.length;t++)o.push(e[t])}));return i>=e.length?l.map((()=>o)):l.flatMap((()=>Te(e,t,r,n,i,o)))}catch(e){return ke(a,n),be.raise(e)}}const _e={next:()=>({done:!0})};function Le(e){if(!e)return _e;if("[object Array]"!==Object.prototype.toString.call(e))return e[Symbol.iterator]();const t=e;if(0===t.length)return _e;let r=0;return{next:()=>{const e=t[r++];return{done:r>=t.length,value:e}}}}class Ne{get(){return function(e){let t=e,r=null,n=null;for(;;)switch(t._tag){case"now":const e=t,i=ze(r,n);if(!i)return e.value;r=null,t=i(e.value);break;case"always":case"once":t=new Oe(t.get());break;case"suspend":t=t.thunk();break;case"flatMap":r&&(n||(n=[]),n.push(r));const o=t;r=o.f,t=o.source}}(this)}map(e){return new Fe(this,(t=>Ne.now(e(t))))}flatMap(e){return new Fe(this,e)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}memoize(){switch(this._tag){case"now":case"once":return this;case"always":return new Ue(this.get);default:return new Ue((()=>this.get()))}}forEachL(e){return this.map(e)}forEach(e){this.forEachL(e).get()}static of(e){return Ne.always(e)}static pure(e){return Ne.now(e)}static now(e){return new Oe(e)}static unit(){return De}static always(e){return new Re(e)}static once(e){return new Ue(e)}static suspend(e){return new Pe(e)}static defer(e){return Ne.suspend(e)}static tailRecM(e,t){return t(e).flatMap((e=>e.isRight()?Ne.now(e.get()):Ne.tailRecM(e.swap().get(),t)))}static sequence(e){return function(e){return Ne.of((()=>Le(e))).flatMap((e=>Be([],e)))}(e)}static map2(e,t,r){return Ne.sequence([e,t]).map((e=>r(e[0],e[1])))}static map3(e,t,r,n){return Ne.sequence([e,t,r]).map((e=>n(e[0],e[1],e[2])))}static map4(e,t,r,n,i){return Ne.sequence([e,t,r,n]).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,r,n,i,o){return Ne.sequence([e,t,r,n,i]).map((e=>o(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,r,n,i,o,a){return Ne.sequence([e,t,r,n,i,o]).map((e=>a(e[0],e[1],e[2],e[3],e[4],e[5])))}}class Oe extends Ne{constructor(e){super(),this.value=e,this._tag="now"}get(){return this.value}toString(){return`Eval.now(${JSON.stringify(this.value)})`}}const De=new Oe(void 0);class Ue extends Ne{constructor(e){super(),this._tag="once",this._thunk=e}get(){if(this._thunk){try{this._cache=this._thunk(),this._isError=!1}catch(e){this._cache=e,this._isError=!0}delete this._thunk}if(this._isError)throw this._cache;return this._cache}toString(){return"Eval.once([thunk])"}}class Re extends Ne{constructor(e){super(),this._tag="always",this.get=e}toString(){return"Eval.always([thunk])"}}class Pe extends Ne{constructor(e){super(),this.thunk=e,this._tag="suspend"}toString(){return"Eval.suspend([thunk])"}}class Fe extends Ne{constructor(e,t){super(),this.source=e,this.f=t,this._tag="flatMap"}toString(){return`Eval#FlatMap(${String(this.source)}, [function])`}}const je={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:Ne.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>Ne.tailRecM(t,(t=>e(g.left,g.right,t)))};function ze(e,t){return e||(t&&t.length>0?t.pop():null)}function Be(e,t){for(;;){const r=t.next(),n=r.done;if(r.value){return r.value.flatMap((r=>(e.push(r),n?Ne.pure(e):Be(e,t))))}if(n)return Ne.pure(e)}}h(Ne,je);class Ge{run(e=me.global.get()){return function(e,t){let r=e,n=null,i=null;const o=t.executionModel.recommendedBatchSize-1;let a=t.batchIndex;for(;;)if(r instanceof A){if(r.isSuccess()){const e=et(n,i);if(!e)return t.batchIndex=a,be.pure(r.get());try{r=e(r.get())}catch(e){r=new We(A.failure(e))}}else{const e=r.failed().get(),o=tt(n,i);if(!o)return t.batchIndex=a,be.raise(e);try{r=o(e)}catch(e){r=new We(A.failure(e))}}n=null;const e=a+1&o;if(!e)return at(r,t,n,i,!0);a=e}else switch(r._tag){case"pure":r=r.value;break;case"always":r=A.of(r.thunk);break;case"once":r=r.runTry();break;case"flatMap":const e=r;n&&(i||(i=[]),i.push(n)),n=e.g?[e.f,e.g]:e.f,r=e.source;break;case"async":case"memoize":return at(r,t,n,i,!1)}}(this,e)}runOnComplete(e,t=me.global.get()){return ot(this,t,null,e,null,null,null)||O.empty()}attempt(){return this.transform((e=>g.left(e)),g.right)}asyncBoundary(e){return this.flatMap((t=>Ge.shift(e).map((()=>t))))}chain(e){return this.flatMap(e)}delayExecution(e){return Ge.delayedTick(e).flatMap((()=>this))}delayResult(e){return this.transformWith((t=>Ge.delayedTick(e).flatMap((()=>Ge.raise(t)))),(t=>Ge.delayedTick(e).map((()=>t))))}doOnFinish(e){return this.transformWith((t=>e(S(t)).flatMap((()=>Ge.raise(t)))),(t=>e(C).map((()=>t))))}doOnCancel(e){return Ge.asyncUnsafe(((t,r)=>{const n=t.scheduler;n.trampoline((()=>{const i=t.connection;i.push(O.of((()=>e.run(n)))),Ge.unsafeStart(this,t,st(n,i,r))}))}))}executeForked(e){return Ge.fork(this,e)}executeWithModel(e){return Ge.asyncUnsafe(((t,r)=>{const n=t.scheduler.withExecutionModel(e),i=new qe(n,t.connection,t.options);n.trampoline((()=>Ge.unsafeStart(this,i,r)))}))}executeWithOptions(e){return Ge.asyncUnsafe(((t,r)=>{const n=t.scheduler,i=new qe(n,t.connection,e);n.trampoline((()=>Ge.unsafeStart(this,i,r)))}))}flatMap(e){return new Qe(this,e)}ap(e){return e.flatMap((e=>this.map(e)))}followedBy(e){return this.flatMap((()=>e))}forEach(e){return this.map(e)}forEffect(e){return this.flatMap((t=>e.map((()=>t))))}map(e){return new Qe(this,(t=>Ge.now(e(t))))}memoize(){switch(this._tag){case"pure":return this;case"always":return new $e(this.thunk,!1);case"memoize":const e=this;return e.onlySuccess?new Ze(this,!1):e;default:return new Ze(this,!1)}}memoizeOnSuccess(){switch(this._tag){case"pure":case"once":case"memoize":return this;case"always":return new $e(this.thunk,!0);default:return new Ze(this,!0)}}recover(e){return this.recoverWith((t=>Ge.now(e(t))))}recoverWith(e){return this.transformWith(e,Ge.now)}timeout(e){const t=Ge.raise(new p(le.of(e).toString()));return this.timeoutTo(e,t)}timeoutTo(e,t){const r=[this,Ge.delayedTick(e).flatMap((()=>t))];return Ge.firstCompletedOf(r)}transform(e,t){return this.transformWith((t=>Ge.now(e(t))),(e=>Ge.now(t(e))))}transformWith(e,t){return new Qe(this,t,e)}static always(e){return new Ve(e)}static async(e){return Ge.asyncUnsafe(((t,r)=>{const n=t.scheduler,i=t.connection;n.trampoline((()=>{const t=st(n,i,r);try{const r=e(n,t);i.push(r||O.empty())}catch(e){t(_(e))}}))}))}static asyncUnsafe(e){return new Ye(e)}static defer(e){return Ge.unit().flatMap((()=>e()))}static deferAction(e){return Ge.asyncUnsafe(((t,r)=>{const n=t.scheduler;let i;try{i=e(n)}catch(e){i=Ge.raise(e)}n.trampoline((()=>Ge.unsafeStart(i,t,r)))}))}static deferFuture(e){return Ge.suspend((()=>Ge.fromFuture(e())))}static deferFutureAction(e){return Ge.deferAction((t=>Ge.fromFuture(e(t))))}static delayedTick(e){return Ge.asyncUnsafe(((t,r)=>{const n=t.connection,i=t.scheduler.scheduleOnce(e,(()=>{n.pop(),r(A.unit())}));n.push(i)}))}static firstCompletedOf(e){return ut(e,be.firstCompletedOf)}static fromFuture(e){return e.value().isEmpty()?Ge.asyncUnsafe(((t,r)=>{t.connection.push(e),e.onComplete((e=>{t.connection.pop(),r(e)}))})):Ge.fromTry(e.value().get())}static fromTry(e){return new We(e)}static fork(e,t){return Ge.shift(t).flatMap((()=>e))}static map2(e,t,r){return Ge.sequence([e,t]).map((e=>r(e[0],e[1])))}static map3(e,t,r,n){return Ge.sequence([e,t,r]).map((e=>n(e[0],e[1],e[2])))}static map4(e,t,r,n,i){return Ge.sequence([e,t,r,n]).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,r,n,i,o){return Ge.sequence([e,t,r,n,i]).map((e=>o(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,r,n,i,o,a){return Ge.sequence([e,t,r,n,i,o]).map((e=>a(e[0],e[1],e[2],e[3],e[4],e[5])))}static now(e){return new We(M(e))}static of(e){return Ge.always(e)}static once(e){return new $e(e,!1)}static parMap2(e,t,r){return Ge.gather([e,t]).map((e=>r(e[0],e[1])))}static parMap3(e,t,r,n){return Ge.gather([e,t,r]).map((e=>n(e[0],e[1],e[2])))}static parMap4(e,t,r,n,i){return Ge.gather([e,t,r,n]).map((e=>i(e[0],e[1],e[2],e[3])))}static parMap5(e,t,r,n,i,o){return Ge.gather([e,t,r,n,i]).map((e=>o(e[0],e[1],e[2],e[3],e[4])))}static parMap6(e,t,r,n,i,o,a){return Ge.gather([e,t,r,n,i,o]).map((e=>a(e[0],e[1],e[2],e[3],e[4],e[5])))}static pure(e){return Ge.now(e)}static raise(e){return new We(_(e))}static sequence(e){return function(e){return Ge.of((()=>Le(e))).flatMap((e=>ct([],e)))}(e)}static gather(e){return ut(e,be.sequence)}static shift(e){return e?Ke(e):Xe}static suspend(e){return Ge.unit().flatMap((()=>e()))}static tailRecM(e,t){try{return t(e).flatMap((e=>e.isRight()?Ge.now(e.get()):Ge.tailRecM(e.swap().get(),t)))}catch(e){return Ge.raise(e)}}static unit(){return He}static unsafeStart(e,t,r){return ot(e,t.scheduler,t,r,null,null,null)}}class We extends Ge{constructor(e){super(),this.value=e,this._tag="pure"}}const He=new We(A.unit());class $e extends Ge{constructor(e,t){super(),this._tag="once",this._thunk=e,this.onlyOnSuccess=t}memoize(){return this.onlyOnSuccess&&this._thunk?new $e(this._thunk,!1):this}runTry(){if(this._thunk){const e=A.of(this._thunk);return!e.isSuccess()&&this.onlyOnSuccess||(delete this._thunk,delete this.onlyOnSuccess,this.cache=e),e}return this.cache}}class Ve extends Ge{constructor(e){super(),this.thunk=e,this._tag="always"}}class Qe extends Ge{constructor(e,t,r){super(),this.source=e,this.f=t,this.g=r,this._tag="flatMap"}}class Ye extends Ge{constructor(e){super(),this.register=e,this._tag="async"}}class Ze extends Ge{constructor(e,t){super(),this._tag="memoize",this.source=e,this.result=null,this.onlySuccess=t}}class qe{constructor(e,t=new W,r={autoCancelableRunLoops:!1}){this.scheduler=e,this.options=r,this.connection=t,r.autoCancelableRunLoops&&(this.shouldCancel=()=>t.isCanceled())}markAsyncBoundary(){this.scheduler.batchIndex=0}shouldCancel(){return!1}}const Je={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:Ge.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>Ge.tailRecM(t,(t=>e(g.left,g.right,t)))};function Ke(e){return Ge.asyncUnsafe(((t,r)=>{(e||t.scheduler).executeAsync((()=>r(A.unit())))}))}h(Ge,Je);const Xe=Ke();function et(e,t){let r;return e?r=e:t&&t.length>0&&(r=t.pop()),r?"function"==typeof r?r:r[0]:null}function tt(e,t){let r=e;do{if(r&&"function"!=typeof r)return r[1];r=t?t.pop():null}while(r);return null}class rt{constructor(e,t){this.context=e,this.callback=t,this.canCall=!1,this.bFirst=null,this.bRest=null,this.asFunction=this.signal.bind(this)}prepare(e,t){this.bFirst=e,this.bRest=t,this.canCall=!0}signal(e){this.canCall?(this.canCall=!1,ot(new We(e),this.context.scheduler,this.context,this.callback,this,this.bFirst,this.bRest)):e.isFailure()&&this.context.scheduler.reportFailure(e.failed().get())}}function nt(e,t,r,n,i,o,a){if(!t.shouldCancel()){t.scheduler.batchIndex=a;const s=n||new rt(t,r);s.prepare(i,o),e(t,s.asFunction)}}function it(e,t,r,n,i,o){t.shouldCancel()||t.scheduler.executeAsync((()=>{ot(e,t.scheduler,t,r,n,i,o)}))}function ot(e,t,r,n,i,o,a){let s=e,l=o,c=a;const u=t.executionModel.recommendedBatchSize-1;let d=t.batchIndex;for(;;)if(s instanceof A){if(s.isSuccess()){const e=et(l,c);if(!e)return t.batchIndex=d,n(s);try{s=e(s.get())}catch(e){s=A.failure(e)}}else{const e=tt(l,c);if(!e)return t.batchIndex=d,n(s);try{s=e(s.failed().get())}catch(e){s=A.failure(e)}}l=null;const e=d+1&u;if(!e){const e=r||new qe(t);return it(s instanceof A?new We(s):s,e,n,i,l,c),e.connection}d=e}else switch(s._tag){case"pure":s=s.value;break;case"always":s=A.of(s.thunk);break;case"once":s=s.runTry();break;case"flatMap":const e=s;l&&(c||(c=[]),c.push(l)),l=e.g?[e.f,e.g]:e.f,s=e.source;break;case"async":const o=s,a=r||new qe(t);return nt(o.register,a,n,i,l,c,d),a.connection;case"memoize":return lt(s,t,r,n,l,c,d)}}function at(e,t,r,n,i){return be.create((o=>{const a=new qe(t);return i?it(e,a,o,null,r,n):ot(e,t,a,o,null,r,n),a.connection}))}function st(e,t,r){let n=!1;return i=>{n?i.isFailure()&&e.reportFailure(i.failed().get()):(n=!0,e.trampoline((()=>{t.pop(),r(i)})))}}function lt(e,t,r,n,i,o,a){let s;if(t.batchIndex=a,e.result)s=e.result;else{const r=at(e.source,t,null,null,!1);r.value().isEmpty()?(e.result=r,s=r,r.onComplete((t=>{t.isSuccess()||!e.onlySuccess?(e.result=t,delete e.source):e.result=null}))):(s=r.value().get(),!s.isSuccess()&&e.onlySuccess||(e.result=s))}ot(s instanceof A?new We(s):Ge.fromFuture(s),t,r,n,null,i,o)}function ct(e,t){for(;;){const r=t.next(),n=r.done;if(r.value){return r.value.flatMap((r=>(e.push(r),n?Ge.pure(e):ct(e,t))))}if(n)return Ge.pure(e)}}function ut(e,t){return Ge.asyncUnsafe(((r,n)=>{r.scheduler.trampoline((()=>{let i=!0;try{const o=[],a=ue(e);i=!1;for(let e=0;e<a.length;e++){const t=a[e].run(r.scheduler);o.push(t)}const s=t(o,r.scheduler);r.connection.push(s),s.onComplete(st(r.scheduler,r.connection,n))}catch(e){i?n(_(e)):r.scheduler.reportFailure(e)}}))}))}}}]);